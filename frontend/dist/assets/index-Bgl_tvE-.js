(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();const ha=!1;var Ca=Array.isArray,ns=Array.prototype.indexOf,na=Array.from,rr=Object.defineProperty,Mn=Object.getOwnPropertyDescriptor,sr=Object.getOwnPropertyDescriptors,as=Object.prototype,rs=Array.prototype,$a=Object.getPrototypeOf,Ua=Object.isExtensible;const Kt=()=>{};function ss(e){return e()}function Zn(e){for(var t=0;t<e.length;t++)e[t]()}function ir(){var e,t,n=new Promise((a,r)=>{e=a,t=r});return{promise:n,resolve:e,reject:t}}const we=2,Ta=4,aa=8,is=1<<24,Bt=16,jt=32,vn=64,ra=128,Et=512,Ne=1024,We=2048,Nt=4096,et=8192,Zt=16384,Ma=32768,bn=65536,Ba=1<<17,or=1<<18,En=1<<19,lr=1<<20,Vt=1<<25,cn=32768,ga=1<<21,Na=1<<22,Xt=1<<23,an=Symbol("$state"),os=Symbol(""),gn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ls(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function cs(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function us(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function fs(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function vs(e){throw new Error("https://svelte.dev/e/effect_orphan")}function ds(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function _s(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ps(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function hs(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function gs(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const ms=1,bs=2,cr=4,ws=8,ys=16,xs=1,ks=2,Me=Symbol(),Es="http://www.w3.org/1999/xhtml";function Ss(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function As(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function ur(e){return e===this.v}function fr(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function vr(e){return!fr(e,this.v)}let Vn=!1,Cs=!1;function $s(){Vn=!0}let oe=null;function wn(e){oe=e}function dn(e,t=!1,n){oe={p:oe,i:!1,c:null,e:null,s:e,x:null,l:Vn&&!t?{s:null,u:null,$:[]}:null}}function _n(e){var t=oe,n=t.e;if(n!==null){t.e=null;for(var a of n)Mr(a)}return t.i=!0,oe=t.p,{}}function Hn(){return!Vn||oe!==null&&oe.l===null}let tn=[];function dr(){var e=tn;tn=[],Zn(e)}function sa(e){if(tn.length===0&&!On){var t=tn;queueMicrotask(()=>{t===tn&&dr()})}tn.push(e)}function Ts(){for(;tn.length>0;)dr()}function _r(e){var t=K;if(t===null)return U.f|=Xt,e;if((t.f&Ma)===0){if((t.f&ra)===0)throw e;t.b.error(e)}else yn(e,t)}function yn(e,t){for(;t!==null;){if((t.f&ra)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Yn=new Set;let G=null,Nn=null,_t=null,ft=[],ia=null,ma=!1,On=!1;class Tt{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#a=0;#n=0;#l=null;#s=new Set;#r=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){ft=[],Nn=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[]};for(const a of t)this.#i(a,n);this.is_fork||this.#u(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects)):(Nn=this,G=null,ja(n.render_effects),ja(n.effects),Nn=null,this.#l?.resolve()),_t=null}#i(t,n){t.f^=Ne;for(var a=t.first;a!==null;){var r=a.f,s=(r&(jt|vn))!==0,l=s&&(r&Ne)!==0,c=l||(r&et)!==0||this.skipped_effects.has(a);if((a.f&ra)!==0&&a.b?.is_pending()&&(n={parent:n,effect:a,effects:[],render_effects:[]}),!c&&a.fn!==null){s?a.f^=Ne:(r&Ta)!==0?n.effects.push(a):Bn(a)&&((a.f&Bt)!==0&&this.#s.add(a),zn(a));var o=a.first;if(o!==null){a=o;continue}}var v=a.parent;for(a=a.next;a===null&&v!==null;)v===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),n=n.parent),a=v.next,v=v.parent}}#o(t){for(const n of t)(n.f&We)!==0?this.#s.add(n):(n.f&Nt)!==0&&this.#r.add(n),this.#c(n.deps),Oe(n,Ne)}#c(t){if(t!==null)for(const n of t)(n.f&we)===0||(n.f&cn)===0||(n.f^=cn,this.#c(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&Xt)===0&&(this.current.set(t,t.v),_t?.set(t,t.v))}activate(){G=this,this.apply()}deactivate(){G===this&&(G=null,_t=null)}flush(){if(this.activate(),ft.length>0){if(pr(),G!==null&&G!==this)return}else this.#a===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#u(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#a===0&&this.#f()}#f(){if(Yn.size>1){this.previous.clear();var t=_t,n=!0,a={parent:null,effect:null,effects:[],render_effects:[]};for(const s of Yn){if(s===this){n=!1;continue}const l=[];for(const[o,v]of this.current){if(s.current.has(o))if(n&&v!==s.current.get(o))s.current.set(o,v);else continue;l.push(o)}if(l.length===0)continue;const c=[...s.current.keys()].filter(o=>!this.current.has(o));if(c.length>0){var r=ft;ft=[];const o=new Set,v=new Map;for(const d of l)hr(d,c,o,v);if(ft.length>0){G=s,s.apply();for(const d of ft)s.#i(d,a);s.deactivate()}ft=r}}G=null,_t=t}this.committed=!0,Yn.delete(this)}increment(t){this.#a+=1,t&&(this.#n+=1)}decrement(t){this.#a-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#s)this.#r.delete(t),Oe(t,We),un(t);for(const t of this.#r)Oe(t,Nt),un(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=ir()).promise}static ensure(){if(G===null){const t=G=new Tt;Yn.add(G),On||Tt.enqueue(()=>{G===t&&t.flush()})}return G}static enqueue(t){sa(t)}apply(){}}function Ms(e){var t=On;On=!0;try{for(var n;;){if(Ts(),ft.length===0&&(G?.flush(),ft.length===0))return ia=null,n;pr()}}finally{On=t}}function pr(){var e=sn;ma=!0;var t=null;try{var n=0;for(ea(!0);ft.length>0;){var a=Tt.ensure();if(n++>1e3){var r,s;Ns()}a.process(ft),Qt.clear()}}finally{ma=!1,ea(e),ia=null}}function Ns(){try{ds()}catch(e){yn(e,ia)}}let Rt=null;function ja(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var a=e[n++];if((a.f&(Zt|et))===0&&Bn(a)&&(Rt=new Set,zn(a),a.deps===null&&a.first===null&&a.nodes===null&&(a.teardown===null&&a.ac===null?Pr(a):a.fn=null),Rt?.size>0)){Qt.clear();for(const r of Rt){if((r.f&(Zt|et))!==0)continue;const s=[r];let l=r.parent;for(;l!==null;)Rt.has(l)&&(Rt.delete(l),s.push(l)),l=l.parent;for(let c=s.length-1;c>=0;c--){const o=s[c];(o.f&(Zt|et))===0&&zn(o)}}Rt.clear()}}Rt=null}}function hr(e,t,n,a){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const r of e.reactions){const s=r.f;(s&we)!==0?hr(r,t,n,a):(s&(Na|Bt))!==0&&(s&We)===0&&gr(r,t,a)&&(Oe(r,We),un(r))}}function gr(e,t,n){const a=n.get(e);if(a!==void 0)return a;if(e.deps!==null)for(const r of e.deps){if(t.includes(r))return!0;if((r.f&we)!==0&&gr(r,t,n))return n.set(r,!0),!0}return n.set(e,!1),!1}function un(e){for(var t=ia=e;t.parent!==null;){t=t.parent;var n=t.f;if(ma&&t===K&&(n&Bt)!==0&&(n&or)===0)return;if((n&(vn|jt))!==0){if((n&Ne)===0)return;t.f^=Ne}}ft.push(t)}function Os(e){let t=0,n=fn(0),a;return()=>{Fn()&&(i(n),Nr(()=>(t===0&&(a=jn(()=>e(()=>Dn(n)))),t+=1,()=>{sa(()=>{t-=1,t===0&&(a?.(),a=void 0,Dn(n))})})))}}var Ds=bn|En|ra;function Ps(e,t,n){new Ls(e,t,n)}class Ls{parent;#e=!1;#t;#a=null;#n;#l;#s;#r=null;#i=null;#o=null;#c=null;#u=null;#f=0;#v=0;#_=!1;#d=null;#b=Os(()=>(this.#d=fn(this.#f),()=>{this.#d=null}));constructor(t,n,a){this.#t=t,this.#n=n,this.#l=a,this.parent=K.b,this.#e=!!this.#n.pending,this.#s=La(()=>{K.b=this;{var r=this.#g();try{this.#r=vt(()=>a(r))}catch(s){this.error(s)}this.#v>0?this.#h():this.#e=!1}return()=>{this.#u?.remove()}},Ds)}#w(){try{this.#r=vt(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#y(){const t=this.#n.pending;t&&(this.#i=vt(()=>t(this.#t)),Tt.enqueue(()=>{var n=this.#g();this.#r=this.#p(()=>(Tt.ensure(),vt(()=>this.#l(n)))),this.#v>0?this.#h():(rn(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#g(){var t=this.#t;return this.#e&&(this.#u=Ht(),this.#t.before(this.#u),t=this.#u),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(t){var n=K,a=U,r=oe;Ot(this.#s),Be(this.#s),wn(this.#s.ctx);try{return t()}catch(s){return _r(s),null}finally{Ot(n),Be(a),wn(r)}}#h(){const t=this.#n.pending;this.#r!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),Ir(this.#r,this.#c)),this.#i===null&&(this.#i=vt(()=>t(this.#t)))}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#v+=t,this.#v===0&&(this.#e=!1,this.#i&&rn(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#m(t),this.#f+=t,this.#d&&xn(this.#d,this.#f)}get_effect_pending(){return this.#b(),i(this.#d)}error(t){var n=this.#n.onerror;let a=this.#n.failed;if(this.#_||!n&&!a)throw t;this.#r&&(je(this.#r),this.#r=null),this.#i&&(je(this.#i),this.#i=null),this.#o&&(je(this.#o),this.#o=null);var r=!1,s=!1;const l=()=>{if(r){As();return}r=!0,s&&gs(),Tt.ensure(),this.#f=0,this.#o!==null&&rn(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#r=this.#p(()=>(this.#_=!1,vt(()=>this.#l(this.#t)))),this.#v>0?this.#h():this.#e=!1};var c=U;try{Be(null),s=!0,n?.(t,l),s=!1}catch(o){yn(o,this.#s&&this.#s.parent)}finally{Be(c)}a&&sa(()=>{this.#o=this.#p(()=>{Tt.ensure(),this.#_=!0;try{return vt(()=>{a(this.#t,()=>t,()=>l)})}catch(o){return yn(o,this.#s.parent),null}finally{this.#_=!1}})})}}function Fs(e,t,n,a){const r=Hn()?oa:mr;if(n.length===0&&e.length===0){a(t.map(r));return}var s=G,l=K,c=Is();function o(){Promise.all(n.map(v=>zs(v))).then(v=>{c();try{a([...t.map(r),...v])}catch(d){(l.f&Zt)===0&&yn(d,l)}s?.deactivate(),Xn()}).catch(v=>{yn(v,l)})}e.length>0?Promise.all(e).then(()=>{c();try{return o()}finally{s?.deactivate(),Xn()}}):o()}function Is(){var e=K,t=U,n=oe,a=G;return function(s=!0){Ot(e),Be(t),wn(n),s&&a?.activate()}}function Xn(){Ot(null),Be(null),wn(null)}function oa(e){var t=we|We,n=U!==null&&(U.f&we)!==0?U:null;return K!==null&&(K.f|=En),{ctx:oe,deps:null,effects:null,equals:ur,f:t,fn:e,reactions:null,rv:0,v:Me,wv:0,parent:n??K,ac:null}}function zs(e,t){let n=K;n===null&&cs();var a=n.b,r=void 0,s=fn(Me),l=!U,c=new Map;return Ys(()=>{var o=ir();r=o.promise;try{Promise.resolve(e()).then(o.resolve,o.reject).then(()=>{v===G&&v.committed&&v.deactivate(),Xn()})}catch(_){o.reject(_),Xn()}var v=G;if(l){var d=!a.is_pending();a.update_pending_count(1),v.increment(d),c.get(v)?.reject(gn),c.delete(v),c.set(v,o)}const m=(_,h=void 0)=>{if(v.activate(),h)h!==gn&&(s.f|=Xt,xn(s,h));else{(s.f&Xt)!==0&&(s.f^=Xt),xn(s,_);for(const[S,N]of c){if(c.delete(S),S===v)break;N.reject(gn)}}l&&(a.update_pending_count(-1),v.decrement(d))};o.promise.then(m,_=>m(null,_||"unknown"))}),Pa(()=>{for(const o of c.values())o.reject(gn)}),new Promise(o=>{function v(d){function m(){d===r?o(s):v(r)}d.then(m,m)}v(r)})}function Ct(e){const t=oa(e);return zr(t),t}function mr(e){const t=oa(e);return t.equals=vr,t}function br(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)je(t[n])}}function Rs(e){for(var t=e.parent;t!==null;){if((t.f&we)===0)return(t.f&Zt)===0?t:null;t=t.parent}return null}function Oa(e){var t,n=K;Ot(Rs(e));try{e.f&=~cn,br(e),t=Hr(e)}finally{Ot(n)}return t}function wr(e){var t=Oa(e);if(e.equals(t)||(G?.is_fork||(e.v=t),e.wv=qr()),!Sn)if(_t!==null)(Fn()||G?.is_fork)&&_t.set(e,t);else{var n=(e.f&Et)===0?Nt:Ne;Oe(e,n)}}let ba=new Set;const Qt=new Map;let yr=!1;function fn(e,t){var n={f:0,v:e,reactions:null,equals:ur,rv:0,wv:0};return n}function q(e,t){const n=fn(e);return zr(n),n}function xr(e,t=!1,n=!0){const a=fn(e);return t||(a.equals=vr),Vn&&n&&oe!==null&&oe.l!==null&&(oe.l.s??=[]).push(a),a}function p(e,t,n=!1){U!==null&&(!Mt||(U.f&Ba)!==0)&&Hn()&&(U.f&(we|Bt|Na|Ba))!==0&&!Ut?.includes(e)&&hs();let a=n?Yt(t):t;return xn(e,a)}function xn(e,t){if(!e.equals(t)){var n=e.v;Sn?Qt.set(e,t):Qt.set(e,n),e.v=t;var a=Tt.ensure();a.capture(e,n),(e.f&we)!==0&&((e.f&We)!==0&&Oa(e),Oe(e,(e.f&Et)!==0?Ne:Nt)),e.wv=qr(),kr(e,We),Hn()&&K!==null&&(K.f&Ne)!==0&&(K.f&(jt|vn))===0&&(ut===null?Xs([e]):ut.push(e)),!a.is_fork&&ba.size>0&&!yr&&qs()}return t}function qs(){yr=!1;var e=sn;ea(!0);const t=Array.from(ba);try{for(const n of t)(n.f&Ne)!==0&&Oe(n,Nt),Bn(n)&&zn(n)}finally{ea(e)}ba.clear()}function Dn(e){p(e,e.v+1)}function kr(e,t){var n=e.reactions;if(n!==null)for(var a=Hn(),r=n.length,s=0;s<r;s++){var l=n[s],c=l.f;if(!(!a&&l===K)){var o=(c&We)===0;if(o&&Oe(l,t),(c&we)!==0){var v=l;_t?.delete(v),(c&cn)===0&&(c&Et&&(l.f|=cn),kr(v,Nt))}else o&&((c&Bt)!==0&&Rt!==null&&Rt.add(l),un(l))}}}function Yt(e){if(typeof e!="object"||e===null||an in e)return e;const t=$a(e);if(t!==as&&t!==rs)return e;var n=new Map,a=Ca(e),r=q(0),s=on,l=c=>{if(on===s)return c();var o=U,v=on;Be(null),Ka(s);var d=c();return Be(o),Ka(v),d};return a&&n.set("length",q(e.length)),new Proxy(e,{defineProperty(c,o,v){(!("value"in v)||v.configurable===!1||v.enumerable===!1||v.writable===!1)&&_s();var d=n.get(o);return d===void 0?d=l(()=>{var m=q(v.value);return n.set(o,m),m}):p(d,v.value,!0),!0},deleteProperty(c,o){var v=n.get(o);if(v===void 0){if(o in c){const d=l(()=>q(Me));n.set(o,d),Dn(r)}}else p(v,Me),Dn(r);return!0},get(c,o,v){if(o===an)return e;var d=n.get(o),m=o in c;if(d===void 0&&(!m||Mn(c,o)?.writable)&&(d=l(()=>{var h=Yt(m?c[o]:Me),S=q(h);return S}),n.set(o,d)),d!==void 0){var _=i(d);return _===Me?void 0:_}return Reflect.get(c,o,v)},getOwnPropertyDescriptor(c,o){var v=Reflect.getOwnPropertyDescriptor(c,o);if(v&&"value"in v){var d=n.get(o);d&&(v.value=i(d))}else if(v===void 0){var m=n.get(o),_=m?.v;if(m!==void 0&&_!==Me)return{enumerable:!0,configurable:!0,value:_,writable:!0}}return v},has(c,o){if(o===an)return!0;var v=n.get(o),d=v!==void 0&&v.v!==Me||Reflect.has(c,o);if(v!==void 0||K!==null&&(!d||Mn(c,o)?.writable)){v===void 0&&(v=l(()=>{var _=d?Yt(c[o]):Me,h=q(_);return h}),n.set(o,v));var m=i(v);if(m===Me)return!1}return d},set(c,o,v,d){var m=n.get(o),_=o in c;if(a&&o==="length")for(var h=v;h<m.v;h+=1){var S=n.get(h+"");S!==void 0?p(S,Me):h in c&&(S=l(()=>q(Me)),n.set(h+"",S))}if(m===void 0)(!_||Mn(c,o)?.writable)&&(m=l(()=>q(void 0)),p(m,Yt(v)),n.set(o,m));else{_=m.v!==Me;var N=l(()=>Yt(v));p(m,N)}var b=Reflect.getOwnPropertyDescriptor(c,o);if(b?.set&&b.set.call(d,v),!_){if(a&&typeof o=="string"){var $=n.get("length"),M=Number(o);Number.isInteger(M)&&M>=$.v&&p($,M+1)}Dn(r)}return!0},ownKeys(c){i(r);var o=Reflect.ownKeys(c).filter(m=>{var _=n.get(m);return _===void 0||_.v!==Me});for(var[v,d]of n)d.v!==Me&&!(v in c)&&o.push(v);return o},setPrototypeOf(){ps()}})}function Wa(e){try{if(e!==null&&typeof e=="object"&&an in e)return e[an]}catch{}return e}function Vs(e,t){return Object.is(Wa(e),Wa(t))}var Ja,Er,Sr,Ar;function Hs(){if(Ja===void 0){Ja=window,Er=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Sr=Mn(t,"firstChild").get,Ar=Mn(t,"nextSibling").get,Ua(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Ua(n)&&(n.__t=void 0)}}function Ht(e=""){return document.createTextNode(e)}function kn(e){return Sr.call(e)}function Un(e){return Ar.call(e)}function f(e,t){return kn(e)}function ue(e,t=!1){{var n=kn(e);return n instanceof Comment&&n.data===""?Un(n):n}}function u(e,t=1,n=!1){let a=e;for(;t--;)a=Un(a);return a}function Us(e){e.textContent=""}function Cr(){return!1}let Ga=!1;function Bs(){Ga||(Ga=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Da(e){var t=U,n=K;Be(null),Ot(null);try{return e()}finally{Be(t),Ot(n)}}function $r(e,t,n,a=n){e.addEventListener(t,()=>Da(n));const r=e.__on_r;r?e.__on_r=()=>{r(),a(!0)}:e.__on_r=()=>a(!0),Bs()}function Tr(e){K===null&&(U===null&&vs(),fs()),Sn&&us()}function js(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Dt(e,t,n){var a=K;a!==null&&(a.f&et)!==0&&(e|=et);var r={ctx:oe,deps:null,nodes:null,f:e|We|Et,first:null,fn:t,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{zn(r),r.f|=Ma}catch(c){throw je(r),c}else t!==null&&un(r);var s=r;if(n&&s.deps===null&&s.teardown===null&&s.nodes===null&&s.first===s.last&&(s.f&En)===0&&(s=s.first,(e&Bt)!==0&&(e&bn)!==0&&s!==null&&(s.f|=bn)),s!==null&&(s.parent=a,a!==null&&js(s,a),U!==null&&(U.f&we)!==0&&(e&vn)===0)){var l=U;(l.effects??=[]).push(s)}return r}function Fn(){return U!==null&&!Mt}function Pa(e){const t=Dt(aa,null,!1);return Oe(t,Ne),t.teardown=e,t}function Qn(e){Tr();var t=K.f,n=!U&&(t&jt)!==0&&(t&Ma)===0;if(n){var a=oe;(a.e??=[]).push(e)}else return Mr(e)}function Mr(e){return Dt(Ta|lr,e,!1)}function Ws(e){return Tr(),Dt(aa|lr,e,!0)}function Js(e){Tt.ensure();const t=Dt(vn|En,e,!0);return(n={})=>new Promise(a=>{n.outro?rn(t,()=>{je(t),a(void 0)}):(je(t),a(void 0))})}function Gs(e){return Dt(Ta,e,!1)}function Ys(e){return Dt(Na|En,e,!0)}function Nr(e,t=0){return Dt(aa|t,e,!0)}function J(e,t=[],n=[],a=[]){Fs(a,t,n,r=>{Dt(aa,()=>e(...r.map(i)),!0)})}function La(e,t=0){var n=Dt(Bt|t,e,!0);return n}function vt(e){return Dt(jt|En,e,!0)}function Or(e){var t=e.teardown;if(t!==null){const n=Sn,a=U;Ya(!0),Be(null);try{t.call(null)}finally{Ya(n),Be(a)}}}function Dr(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const r=n.ac;r!==null&&Da(()=>{r.abort(gn)});var a=n.next;(n.f&vn)!==0?n.parent=null:je(n,t),n=a}}function Ks(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&jt)===0&&je(t),t=n}}function je(e,t=!0){var n=!1;(t||(e.f&or)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Zs(e.nodes.start,e.nodes.end),n=!0),Dr(e,t&&!n),ta(e,0),Oe(e,Zt);var a=e.nodes&&e.nodes.t;if(a!==null)for(const s of a)s.stop();Or(e);var r=e.parent;r!==null&&r.first!==null&&Pr(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Zs(e,t){for(;e!==null;){var n=e===t?null:Un(e);e.remove(),e=n}}function Pr(e){var t=e.parent,n=e.prev,a=e.next;n!==null&&(n.next=a),a!==null&&(a.prev=n),t!==null&&(t.first===e&&(t.first=a),t.last===e&&(t.last=n))}function rn(e,t,n=!0){var a=[];Lr(e,a,!0);var r=()=>{n&&je(e),t&&t()},s=a.length;if(s>0){var l=()=>--s||r();for(var c of a)c.out(l)}else r()}function Lr(e,t,n){if((e.f&et)===0){e.f^=et;var a=e.nodes&&e.nodes.t;if(a!==null)for(const c of a)(c.is_global||n)&&t.push(c);for(var r=e.first;r!==null;){var s=r.next,l=(r.f&bn)!==0||(r.f&jt)!==0&&(e.f&Bt)!==0;Lr(r,t,l?n:!1),r=s}}}function Fa(e){Fr(e,!0)}function Fr(e,t){if((e.f&et)!==0){e.f^=et,(e.f&Ne)===0&&(Oe(e,We),un(e));for(var n=e.first;n!==null;){var a=n.next,r=(n.f&bn)!==0||(n.f&jt)!==0;Fr(n,r?t:!1),n=a}var s=e.nodes&&e.nodes.t;if(s!==null)for(const l of s)(l.is_global||t)&&l.in()}}function Ir(e,t){if(e.nodes)for(var n=e.nodes.start,a=e.nodes.end;n!==null;){var r=n===a?null:Un(n);t.append(n),n=r}}let sn=!1;function ea(e){sn=e}let Sn=!1;function Ya(e){Sn=e}let U=null,Mt=!1;function Be(e){U=e}let K=null;function Ot(e){K=e}let Ut=null;function zr(e){U!==null&&(Ut===null?Ut=[e]:Ut.push(e))}let ze=null,Xe=0,ut=null;function Xs(e){ut=e}let Rr=1,In=0,on=In;function Ka(e){on=e}function qr(){return++Rr}function Bn(e){var t=e.f;if((t&We)!==0)return!0;if(t&we&&(e.f&=~cn),(t&Nt)!==0){var n=e.deps;if(n!==null)for(var a=n.length,r=0;r<a;r++){var s=n[r];if(Bn(s)&&wr(s),s.wv>e.wv)return!0}(t&Et)!==0&&_t===null&&Oe(e,Ne)}return!1}function Vr(e,t,n=!0){var a=e.reactions;if(a!==null&&!Ut?.includes(e))for(var r=0;r<a.length;r++){var s=a[r];(s.f&we)!==0?Vr(s,t,!1):t===s&&(n?Oe(s,We):(s.f&Ne)!==0&&Oe(s,Nt),un(s))}}function Hr(e){var t=ze,n=Xe,a=ut,r=U,s=Ut,l=oe,c=Mt,o=on,v=e.f;ze=null,Xe=0,ut=null,U=(v&(jt|vn))===0?e:null,Ut=null,wn(e.ctx),Mt=!1,on=++In,e.ac!==null&&(Da(()=>{e.ac.abort(gn)}),e.ac=null);try{e.f|=ga;var d=e.fn,m=d(),_=e.deps;if(ze!==null){var h;if(ta(e,Xe),_!==null&&Xe>0)for(_.length=Xe+ze.length,h=0;h<ze.length;h++)_[Xe+h]=ze[h];else e.deps=_=ze;if(Fn()&&(e.f&Et)!==0)for(h=Xe;h<_.length;h++)(_[h].reactions??=[]).push(e)}else _!==null&&Xe<_.length&&(ta(e,Xe),_.length=Xe);if(Hn()&&ut!==null&&!Mt&&_!==null&&(e.f&(we|Nt|We))===0)for(h=0;h<ut.length;h++)Vr(ut[h],e);return r!==null&&r!==e&&(In++,ut!==null&&(a===null?a=ut:a.push(...ut))),(e.f&Xt)!==0&&(e.f^=Xt),m}catch(S){return _r(S)}finally{e.f^=ga,ze=t,Xe=n,ut=a,U=r,Ut=s,wn(l),Mt=c,on=o}}function Qs(e,t){let n=t.reactions;if(n!==null){var a=ns.call(n,e);if(a!==-1){var r=n.length-1;r===0?n=t.reactions=null:(n[a]=n[r],n.pop())}}n===null&&(t.f&we)!==0&&(ze===null||!ze.includes(t))&&(Oe(t,Nt),(t.f&Et)!==0&&(t.f^=Et,t.f&=~cn),br(t),ta(t,0))}function ta(e,t){var n=e.deps;if(n!==null)for(var a=t;a<n.length;a++)Qs(e,n[a])}function zn(e){var t=e.f;if((t&Zt)===0){Oe(e,Ne);var n=K,a=sn;K=e,sn=!0;try{(t&(Bt|is))!==0?Ks(e):Dr(e),Or(e);var r=Hr(e);e.teardown=typeof r=="function"?r:null,e.wv=Rr;var s;ha&&Cs&&(e.f&We)!==0&&e.deps}finally{sn=a,K=n}}}async function ei(){await Promise.resolve(),Ms()}function i(e){var t=e.f,n=(t&we)!==0;if(U!==null&&!Mt){var a=K!==null&&(K.f&Zt)!==0;if(!a&&!Ut?.includes(e)){var r=U.deps;if((U.f&ga)!==0)e.rv<In&&(e.rv=In,ze===null&&r!==null&&r[Xe]===e?Xe++:ze===null?ze=[e]:ze.includes(e)||ze.push(e));else{(U.deps??=[]).push(e);var s=e.reactions;s===null?e.reactions=[U]:s.includes(U)||s.push(U)}}}if(Sn){if(Qt.has(e))return Qt.get(e);if(n){var l=e,c=l.v;return((l.f&Ne)===0&&l.reactions!==null||Br(l))&&(c=Oa(l)),Qt.set(l,c),c}}else n&&(!_t?.has(e)||G?.is_fork&&!Fn())&&(l=e,Bn(l)&&wr(l),sn&&Fn()&&(l.f&Et)===0&&Ur(l));if(_t?.has(e))return _t.get(e);if((e.f&Xt)!==0)throw e.v;return e.v}function Ur(e){if(e.deps!==null){e.f^=Et;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&we)!==0&&(t.f&Et)===0&&Ur(t)}}function Br(e){if(e.v===Me)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Qt.has(t)||(t.f&we)!==0&&Br(t))return!0;return!1}function jn(e){var t=Mt;try{return Mt=!0,e()}finally{Mt=t}}const ti=-7169;function Oe(e,t){e.f=e.f&ti|t}function ni(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(an in e)wa(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&an in n&&wa(n)}}}function wa(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let a in e)try{wa(e[a],t)}catch{}const n=$a(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const a=sr(n);for(let r in a){const s=a[r].get;if(s)try{s.call(e)}catch{}}}}}const ai=["touchstart","touchmove"];function ri(e){return ai.includes(e)}const jr=new Set,ya=new Set;function Wn(e){for(var t=0;t<e.length;t++)jr.add(e[t]);for(var n of ya)n(e)}let Za=null;function Kn(e){var t=this,n=t.ownerDocument,a=e.type,r=e.composedPath?.()||[],s=r[0]||e.target;Za=e;var l=0,c=Za===e&&e.__root;if(c){var o=r.indexOf(c);if(o!==-1&&(t===document||t===window)){e.__root=t;return}var v=r.indexOf(t);if(v===-1)return;o<=v&&(l=o)}if(s=r[l]||e.target,s!==t){rr(e,"currentTarget",{configurable:!0,get(){return s||n}});var d=U,m=K;Be(null),Ot(null);try{for(var _,h=[];s!==null;){var S=s.assignedSlot||s.parentNode||s.host||null;try{var N=s["__"+a];N!=null&&(!s.disabled||e.target===s)&&N.call(s,e)}catch(b){_?h.push(b):_=b}if(e.cancelBubble||S===t||S===null)break;s=S}if(_){for(let b of h)queueMicrotask(()=>{throw b});throw _}}finally{e.__root=t,delete e.currentTarget,Be(d),Ot(m)}}}function Wr(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Rn(e,t){var n=K;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function E(e,t){var n=(t&xs)!==0,a=(t&ks)!==0,r,s=!e.startsWith("<!>");return()=>{r===void 0&&(r=Wr(s?e:"<!>"+e),n||(r=kn(r)));var l=a||Er?document.importNode(r,!0):r.cloneNode(!0);if(n){var c=kn(l),o=l.lastChild;Rn(c,o)}else Rn(l,l);return l}}function si(e,t,n="svg"){var a=!e.startsWith("<!>"),r=`<${n}>${a?e:"<!>"+e}</${n}>`,s;return()=>{if(!s){var l=Wr(r),c=kn(l);s=kn(c)}var o=s.cloneNode(!0);return Rn(o,o),o}}function la(e,t){return si(e,t,"svg")}function Xa(e=""){{var t=Ht(e+"");return Rn(t,t),t}}function mn(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Ht();return e.append(t,n),Rn(t,n),e}function x(e,t){e!==null&&e.before(t)}function k(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function ii(e,t){return oi(e,t)}const pn=new Map;function oi(e,{target:t,anchor:n,props:a={},events:r,context:s,intro:l=!0}){Hs();var c=new Set,o=m=>{for(var _=0;_<m.length;_++){var h=m[_];if(!c.has(h)){c.add(h);var S=ri(h);t.addEventListener(h,Kn,{passive:S});var N=pn.get(h);N===void 0?(document.addEventListener(h,Kn,{passive:S}),pn.set(h,1)):pn.set(h,N+1)}}};o(na(jr)),ya.add(o);var v=void 0,d=Js(()=>{var m=n??t.appendChild(Ht());return Ps(m,{pending:()=>{}},_=>{if(s){dn({});var h=oe;h.c=s}r&&(a.$$events=r),v=e(_,a)||{},s&&_n()}),()=>{for(var _ of c){t.removeEventListener(_,Kn);var h=pn.get(_);--h===0?(document.removeEventListener(_,Kn),pn.delete(_)):pn.set(_,h)}ya.delete(o),m!==n&&m.parentNode?.removeChild(m)}});return li.set(v,d),v}let li=new WeakMap;class ci{anchor;#e=new Map;#t=new Map;#a=new Map;#n=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#s=()=>{var t=G;if(this.#e.has(t)){var n=this.#e.get(t),a=this.#t.get(n);if(a)Fa(a),this.#n.delete(n);else{var r=this.#a.get(n);r&&(this.#t.set(n,r.effect),this.#a.delete(n),r.fragment.lastChild.remove(),this.anchor.before(r.fragment),a=r.effect)}for(const[s,l]of this.#e){if(this.#e.delete(s),s===t)break;const c=this.#a.get(l);c&&(je(c.effect),this.#a.delete(l))}for(const[s,l]of this.#t){if(s===n||this.#n.has(s))continue;const c=()=>{if(Array.from(this.#e.values()).includes(s)){var v=document.createDocumentFragment();Ir(l,v),v.append(Ht()),this.#a.set(s,{effect:l,fragment:v})}else je(l);this.#n.delete(s),this.#t.delete(s)};this.#l||!a?(this.#n.add(s),rn(l,c,!1)):c()}}};#r=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[a,r]of this.#a)n.includes(a)||(je(r.effect),this.#a.delete(a))};ensure(t,n){var a=G,r=Cr();if(n&&!this.#t.has(t)&&!this.#a.has(t))if(r){var s=document.createDocumentFragment(),l=Ht();s.append(l),this.#a.set(t,{effect:vt(()=>n(l)),fragment:s})}else this.#t.set(t,vt(()=>n(this.anchor)));if(this.#e.set(a,t),r){for(const[c,o]of this.#t)c===t?a.skipped_effects.delete(o):a.skipped_effects.add(o);for(const[c,o]of this.#a)c===t?a.skipped_effects.delete(o.effect):a.skipped_effects.add(o.effect);a.oncommit(this.#s),a.ondiscard(this.#r)}else this.#s()}}function H(e,t,n=!1){var a=new ci(e),r=n?bn:0;function s(l,c){a.ensure(l,c)}La(()=>{var l=!1;t((c,o=!0)=>{l=!0,s(o,c)}),l||s(!1,null)},r)}function qt(e,t){return t}function ui(e,t,n){for(var a=[],r=t.length,s,l=t.length,c=0;c<r;c++){let m=t[c];rn(m,()=>{if(s){if(s.pending.delete(m),s.done.add(m),s.pending.size===0){var _=e.outrogroups;xa(na(s.done)),_.delete(s),_.size===0&&(e.outrogroups=null)}}else l-=1},!1)}if(l===0){var o=a.length===0&&n!==null;if(o){var v=n,d=v.parentNode;Us(d),d.append(v),e.items.clear()}xa(t,!o)}else s={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(s)}function xa(e,t=!0){for(var n=0;n<e.length;n++)je(e[n],t)}var Qa;function dt(e,t,n,a,r,s=null){var l=e,c=new Map,o=(t&cr)!==0;if(o){var v=e;l=v.appendChild(Ht())}var d=null,m=mr(()=>{var $=n();return Ca($)?$:$==null?[]:na($)}),_,h=!0;function S(){b.fallback=d,fi(b,_,l,t,a),d!==null&&(_.length===0?(d.f&Vt)===0?Fa(d):(d.f^=Vt,Tn(d,null,l)):rn(d,()=>{d=null}))}var N=La(()=>{_=i(m);for(var $=_.length,M=new Set,O=G,F=Cr(),B=0;B<$;B+=1){var j=_[B],D=a(j,B),P=h?null:c.get(D);P?(P.v&&xn(P.v,j),P.i&&xn(P.i,B),F&&O.skipped_effects.delete(P.e)):(P=vi(c,h?l:Qa??=Ht(),j,D,B,r,t,n),h||(P.e.f|=Vt),c.set(D,P)),M.add(D)}if($===0&&s&&!d&&(h?d=vt(()=>s(l)):(d=vt(()=>s(Qa??=Ht())),d.f|=Vt)),!h)if(F){for(const[ae,X]of c)M.has(ae)||O.skipped_effects.add(X.e);O.oncommit(S),O.ondiscard(()=>{})}else S();i(m)}),b={effect:N,items:c,outrogroups:null,fallback:d};h=!1}function fi(e,t,n,a,r){var s=(a&ws)!==0,l=t.length,c=e.items,o=e.effect.first,v,d=null,m,_=[],h=[],S,N,b,$;if(s)for($=0;$<l;$+=1)S=t[$],N=r(S,$),b=c.get(N).e,(b.f&Vt)===0&&(b.nodes?.a?.measure(),(m??=new Set).add(b));for($=0;$<l;$+=1){if(S=t[$],N=r(S,$),b=c.get(N).e,e.outrogroups!==null)for(const X of e.outrogroups)X.pending.delete(b),X.done.delete(b);if((b.f&Vt)!==0)if(b.f^=Vt,b===o)Tn(b,null,n);else{var M=d?d.next:o;b===e.effect.last&&(e.effect.last=b.prev),b.prev&&(b.prev.next=b.next),b.next&&(b.next.prev=b.prev),Gt(e,d,b),Gt(e,b,M),Tn(b,M,n),d=b,_=[],h=[],o=d.next;continue}if((b.f&et)!==0&&(Fa(b),s&&(b.nodes?.a?.unfix(),(m??=new Set).delete(b))),b!==o){if(v!==void 0&&v.has(b)){if(_.length<h.length){var O=h[0],F;d=O.prev;var B=_[0],j=_[_.length-1];for(F=0;F<_.length;F+=1)Tn(_[F],O,n);for(F=0;F<h.length;F+=1)v.delete(h[F]);Gt(e,B.prev,j.next),Gt(e,d,B),Gt(e,j,O),o=O,d=j,$-=1,_=[],h=[]}else v.delete(b),Tn(b,o,n),Gt(e,b.prev,b.next),Gt(e,b,d===null?e.effect.first:d.next),Gt(e,d,b),d=b;continue}for(_=[],h=[];o!==null&&o!==b;)(v??=new Set).add(o),h.push(o),o=o.next;if(o===null)continue}(b.f&Vt)===0&&_.push(b),d=b,o=b.next}if(e.outrogroups!==null){for(const X of e.outrogroups)X.pending.size===0&&(xa(na(X.done)),e.outrogroups?.delete(X));e.outrogroups.size===0&&(e.outrogroups=null)}if(o!==null||v!==void 0){var D=[];if(v!==void 0)for(b of v)(b.f&et)===0&&D.push(b);for(;o!==null;)(o.f&et)===0&&o!==e.fallback&&D.push(o),o=o.next;var P=D.length;if(P>0){var ae=(a&cr)!==0&&l===0?n:null;if(s){for($=0;$<P;$+=1)D[$].nodes?.a?.measure();for($=0;$<P;$+=1)D[$].nodes?.a?.fix()}ui(e,D,ae)}}s&&sa(()=>{if(m!==void 0)for(b of m)b.nodes?.a?.apply()})}function vi(e,t,n,a,r,s,l,c){var o=(l&ms)!==0?(l&ys)===0?xr(n,!1,!1):fn(n):null,v=(l&bs)!==0?fn(r):null;return{v:o,i:v,e:vt(()=>(s(t,o??n,v??r,c),()=>{e.delete(a)}))}}function Tn(e,t,n){if(e.nodes)for(var a=e.nodes.start,r=e.nodes.end,s=t&&(t.f&Vt)===0?t.nodes.start:n;a!==null;){var l=Un(a);if(s.before(a),a===r)return;a=l}}function Gt(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}const er=[...` 	
\r\f \v\uFEFF`];function di(e,t,n){var a=e==null?"":""+e;if(t&&(a=a?a+" "+t:t),n){for(var r in n)if(n[r])a=a?a+" "+r:r;else if(a.length)for(var s=r.length,l=0;(l=a.indexOf(r,l))>=0;){var c=l+s;(l===0||er.includes(a[l-1]))&&(c===a.length||er.includes(a[c]))?a=(l===0?"":a.substring(0,l))+a.substring(c+1):l=c}}return a===""?null:a}function be(e,t,n,a,r,s){var l=e.__className;if(l!==n||l===void 0){var c=di(n,a,s);c==null?e.removeAttribute("class"):e.className=c,e.__className=n}else if(s&&r!==s)for(var o in s){var v=!!s[o];(r==null||v!==!!r[o])&&e.classList.toggle(o,v)}return s}function Jr(e,t,n=!1){if(e.multiple){if(t==null)return;if(!Ca(t))return Ss();for(var a of e.options)a.selected=t.includes(Pn(a));return}for(a of e.options){var r=Pn(a);if(Vs(r,t)){a.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function _i(e){var t=new MutationObserver(()=>{Jr(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Pa(()=>{t.disconnect()})}function Qe(e,t,n=t){var a=new WeakSet,r=!0;$r(e,"change",s=>{var l=s?"[selected]":":checked",c;if(e.multiple)c=[].map.call(e.querySelectorAll(l),Pn);else{var o=e.querySelector(l)??e.querySelector("option:not([disabled])");c=o&&Pn(o)}n(c),G!==null&&a.add(G)}),Gs(()=>{var s=t();if(e===document.activeElement){var l=Nn??G;if(a.has(l))return}if(Jr(e,s,r),r&&s===void 0){var c=e.querySelector(":checked");c!==null&&(s=Pn(c),n(s))}e.__value=s,r=!1}),_i(e)}function Pn(e){return"__value"in e?e.__value:e.value}const pi=Symbol("is custom element"),hi=Symbol("is html");function gi(e,t){var n=Gr(e);n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function nn(e,t,n,a){var r=Gr(e);r[t]!==(r[t]=n)&&(t==="loading"&&(e[os]=n),n==null?e.removeAttribute(t):typeof n!="string"&&mi(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Gr(e){return e.__attributes??={[pi]:e.nodeName.includes("-"),[hi]:e.namespaceURI===Es}}var tr=new Map;function mi(e){var t=e.getAttribute("is")||e.nodeName,n=tr.get(t);if(n)return n;tr.set(t,n=[]);for(var a,r=e,s=Element.prototype;s!==r;){a=sr(r);for(var l in a)a[l].set&&n.push(l);r=$a(r)}return n}function xt(e,t,n=t){var a=new WeakSet;$r(e,"input",async r=>{var s=r?e.defaultValue:e.value;if(s=_a(e)?pa(s):s,n(s),G!==null&&a.add(G),await ei(),s!==(s=t())){var l=e.selectionStart,c=e.selectionEnd,o=e.value.length;if(e.value=s??"",c!==null){var v=e.value.length;l===c&&c===o&&v>o?(e.selectionStart=v,e.selectionEnd=v):(e.selectionStart=l,e.selectionEnd=Math.min(c,v))}}}),jn(t)==null&&e.value&&(n(_a(e)?pa(e.value):e.value),G!==null&&a.add(G)),Nr(()=>{var r=t();if(e===document.activeElement){var s=Nn??G;if(a.has(s))return}_a(e)&&r===pa(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function _a(e){var t=e.type;return t==="number"||t==="range"}function pa(e){return e===""?null:+e}function Yr(e=!1){const t=oe,n=t.l.u;if(!n)return;let a=()=>ni(t.s);if(e){let r=0,s={};const l=oa(()=>{let c=!1;const o=t.s;for(const v in o)o[v]!==s[v]&&(s[v]=o[v],c=!0);return c&&r++,r});a=()=>i(l)}n.b.length&&Ws(()=>{nr(t,a),Zn(n.b)}),Qn(()=>{const r=jn(()=>n.m.map(ss));return()=>{for(const s of r)typeof s=="function"&&s()}}),n.a.length&&Qn(()=>{nr(t,a),Zn(n.a)})}function nr(e,t){if(e.l.s)for(const n of e.l.s)i(n);t()}function Ia(e,t,n){if(e==null)return t(void 0),n&&n(void 0),Kt;const a=jn(()=>e.subscribe(t,n));return a.unsubscribe?()=>a.unsubscribe():a}const hn=[];function bi(e,t){return{subscribe:tt(e,t).subscribe}}function tt(e,t=Kt){let n=null;const a=new Set;function r(c){if(fr(e,c)&&(e=c,n)){const o=!hn.length;for(const v of a)v[1](),hn.push(v,e);if(o){for(let v=0;v<hn.length;v+=2)hn[v][0](hn[v+1]);hn.length=0}}}function s(c){r(c(e))}function l(c,o=Kt){const v=[c,o];return a.add(v),a.size===1&&(n=t(r,s)||Kt),c(e),()=>{a.delete(v),a.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:l}}function ca(e,t,n){const a=!Array.isArray(e),r=a?[e]:e;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=t.length<2;return bi(n,(l,c)=>{let o=!1;const v=[];let d=0,m=Kt;const _=()=>{if(d)return;m();const S=t(a?v[0]:v,l,c);s?l(S):m=typeof S=="function"?S:Kt},h=r.map((S,N)=>Ia(S,b=>{v[N]=b,d&=~(1<<N),o&&_()},()=>{d|=1<<N}));return o=!0,_(),function(){Zn(h),m(),o=!1}})}function wi(e){let t;return Ia(e,n=>t=n)(),t}let ka=Symbol();function Q(e,t,n){const a=n[t]??={store:null,source:xr(void 0),unsubscribe:Kt};if(a.store!==e&&!(ka in n))if(a.unsubscribe(),a.store=e??null,e==null)a.source.v=void 0,a.unsubscribe=Kt;else{var r=!0;a.unsubscribe=Ia(e,s=>{r?a.source.v=s:p(a.source,s)}),r=!1}return e&&ka in n?wi(e):i(a.source)}function An(){const e={};function t(){Pa(()=>{for(var n in e)e[n].unsubscribe();rr(e,ka,{enumerable:!1,value:!0})})}return[e,t]}function yi(e,t,n,a){var r=a,s=!0,l=()=>(s&&(s=!1,r=a),r),c;c=e[t],c===void 0&&a!==void 0&&(c=l());var o;return o=()=>{var v=e[t];return v===void 0?l():(s=!0,v)},o}function xi(e){oe===null&&ls(),Vn&&oe.l!==null?ki(oe).m.push(e):Qn(()=>{const t=jn(e);if(typeof t=="function")return t})}function ki(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const Ei="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Ei);$s();const qn=tt(!1);class Si{url;ws=null;handlers=new Map;reconnectDelay=1e3;maxReconnectDelay=3e4;constructor(){{const t=window.location.protocol==="https:"?"wss:":"ws:";this.url=`${t}//${window.location.host}/ws`}}connect(){console.log("[WS] Connecting to:",this.url),this.ws=new WebSocket(this.url),this.ws.onopen=()=>{console.log("[WS] Connected"),this.reconnectDelay=1e3,qn.set(!0)},this.ws.onmessage=t=>{try{const n=JSON.parse(t.data);console.log("[WS] Message:",n.type),this.dispatch(n.type,n)}catch(n){console.error("[WS] Failed to parse message:",n)}},this.ws.onclose=()=>{console.log("[WS] Closed, reconnecting in",this.reconnectDelay,"ms"),qn.set(!1),setTimeout(()=>this.connect(),this.reconnectDelay),this.reconnectDelay=Math.min(this.reconnectDelay*2,this.maxReconnectDelay)},this.ws.onerror=t=>{console.error("[WS] Error:",t)}}on(t,n){return this.handlers.has(t)||this.handlers.set(t,[]),this.handlers.get(t).push(n),()=>this.off(t,n)}off(t,n){const a=this.handlers.get(t);if(a){const r=a.indexOf(n);r!==-1&&a.splice(r,1)}}dispatch(t,n){(this.handlers.get(t)||[]).forEach(r=>{try{r(n)}catch(s){console.error("[WS] Handler error:",s)}})}send(t){this.ws?.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify(t))}}const zt=new Si;class Ai{baseUrl;constructor(t){this.baseUrl=t??""}async request(t,n,a){const r={method:t,headers:{"Content-Type":"application/json"}};a&&(r.body=JSON.stringify(a));const l=await(await fetch(`${this.baseUrl}${n}`,r)).json();if(!l.success)throw new Error(l.error||"Unknown error");return l.data}getSystemInfo(){return this.request("GET","/api/v1/system/info")}getNetworkStatus(){return this.request("GET","/api/v1/network/status")}permitJoin(t=60){return this.request("POST","/api/v1/network/permit-join",{duration:t})}getDevices(){return this.request("GET","/api/v1/devices")}getDevice(t){return this.request("GET",`/api/v1/devices/${t}`)}updateDevice(t,n,a){return this.request("PUT",`/api/v1/devices/${t}`,{friendly_name:n||null,category:a||null})}turnOn(t,n){return this.request("POST",`/api/v1/devices/${t}/endpoints/${n}/on`)}turnOff(t,n){return this.request("POST",`/api/v1/devices/${t}/endpoints/${n}/off`)}toggle(t,n){return this.request("POST",`/api/v1/devices/${t}/endpoints/${n}/toggle`)}getCameras(){return this.request("GET","/api/v1/cameras")}addCamera(t,n,a,r,s){const l={name:t,stream_url:n,stream_type:a};return r&&(l.username=r),s&&(l.password=s),this.request("POST","/api/v1/cameras",l)}updateCamera(t,n,a,r,s,l){const c={};return n!==void 0&&(c.name=n),a!==void 0&&(c.stream_url=a),r!==void 0&&(c.stream_type=r),s!==void 0&&(c.username=s),l!==void 0&&(c.password=l),this.request("PUT",`/api/v1/cameras/${t}`,c)}deleteCamera(t){return this.request("DELETE",`/api/v1/cameras/${t}`)}getCameraStreamUrl(t){return`${this.baseUrl}/api/v1/cameras/${t}/stream`}getAutomations(){return this.request("GET","/api/v1/automations")}getAutomation(t){return this.request("GET",`/api/v1/automations/${t}`)}createAutomation(t){return this.request("POST","/api/v1/automations",t)}updateAutomation(t,n){return this.request("PUT",`/api/v1/automations/${t}`,n)}deleteAutomation(t){return this.request("DELETE",`/api/v1/automations/${t}`)}triggerAutomation(t){return this.request("POST",`/api/v1/automations/${t}/trigger`)}enableAutomation(t){return this.request("POST",`/api/v1/automations/${t}/enable`)}disableAutomation(t){return this.request("POST",`/api/v1/automations/${t}/disable`)}}const fe=new Ai;function za(e,t){const n=typeof localStorage<"u"?localStorage.getItem(e):null,a=n!==null?JSON.parse(n):t,r=tt(a);return r.subscribe(s=>{typeof localStorage<"u"&&localStorage.setItem(e,JSON.stringify(s))}),r}const Jn=tt([]),Kr=tt([]),ua=tt([]),Ra=tt(null),fa=tt(null),Ci=za("casita:topPaneView","devices"),$i=za("casita:bottomPaneView","cameras"),Ti=za("casita:bottomPaneCollapsed",!1),Ea=tt(!1),Sa=tt(0),pt=tt({devices:!1,cameras:!1,automations:!1,network:!1}),Cn=tt(null),Mi=tt(!0),qa=ca([fa,Ra,qn,Mi],([e,t,n,a])=>{const r=a?{state:"online",detail:e?`v${e.version}`:"responding"}:{state:"offline",detail:"not reachable"},s=e?.firmware&&e.firmware!=="Unknown",l=s?{state:"online",detail:`fw:${e.firmware}`}:{state:"offline",detail:"not detected"};let c;return s?t?.connected?c={state:"online",detail:`ch:${t.channel} ${t.device_count} devices`}:c={state:"degraded",detail:"not joined"}:c={state:"offline",detail:"no coordinator"},{backend:r,coordinator:l,zigbee:c,websocket:n?{state:"online",detail:"connected"}:{state:"offline",detail:"reconnecting..."}}}),Zr=ca(qa,e=>{const t=[e.backend.state,e.coordinator.state,e.zigbee.state,e.websocket.state];return t.every(n=>n==="online")?"online":t.some(n=>n==="offline")||t.some(n=>n==="degraded")?"degraded":"unknown"}),Xr=ca(Jn,e=>e.length),Ni=ca(ua,e=>e.filter(t=>t.enabled).length);function kt(e){return Array.isArray(e)?e.slice().reverse().map(t=>t.toString(16).padStart(2,"0")).join(":"):String(e)}function Aa(e,t){Jn.update(n=>n.map(a=>kt(a.ieee_address)===e?{...a,state_on:t}:a))}async function ln(){pt.update(e=>({...e,devices:!0}));try{const e=await fe.getDevices();Jn.set(e)}catch(e){Cn.set(`Failed to load devices: ${e}`)}finally{pt.update(e=>({...e,devices:!1}))}}async function Ln(){pt.update(e=>({...e,cameras:!0}));try{const e=await fe.getCameras();Kr.set(e)}catch(e){Cn.set(`Failed to load cameras: ${e}`)}finally{pt.update(e=>({...e,cameras:!1}))}}async function $t(){pt.update(e=>({...e,automations:!0}));try{const e=await fe.getAutomations();ua.set(e)}catch(e){Cn.set(`Failed to load automations: ${e}`)}finally{pt.update(e=>({...e,automations:!1}))}}async function va(){pt.update(e=>({...e,network:!0}));try{const e=await fe.getNetworkStatus();Ra.set(e)}catch(e){Cn.set(`Failed to load network status: ${e}`)}finally{pt.update(e=>({...e,network:!1}))}}async function Qr(){try{const e=await fe.getSystemInfo();fa.set(e)}catch(e){Cn.set(`Failed to load system info: ${e}`)}}async function Oi(){await Promise.all([ln(),Ln(),$t(),va(),Qr()])}let $n=null;async function Di(e=60){try{await fe.permitJoin(e),Ea.set(!0),Sa.set(e),$n&&clearInterval($n),$n=setInterval(()=>{Sa.update(t=>t<=1?(clearInterval($n),$n=null,Ea.set(!1),0):t-1)},1e3)}catch(t){Cn.set(`Failed to permit join: ${t}`)}}var Pi=E('<div class="empty-state">No devices found. Click "Permit Join" to pair new devices.</div>'),Li=E("<span> </span>"),Fi=E('<button class="btn btn-sm"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M7.5 1v7h1V1h-1z"></path><path d="M3 8.812a4.999 4.999 0 0 1 2.578-4.375l-.485-.874A6 6 0 1 0 11 3.616l-.501.865A5 5 0 1 1 3 8.812z"></path></svg></button>'),Ii=E('<div class="device-row svelte-1cs4wva"><span class="device-name mono svelte-1cs4wva"> </span> <span class="device-tags svelte-1cs4wva"><span> </span> <span class="tag"> </span> <!></span> <span class="device-meta mono text-xs muted svelte-1cs4wva"> </span> <span class="device-actions svelte-1cs4wva"><!> <button class="btn btn-sm" title="Edit"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"></path></svg></button></span></div>'),zi=E('<div class="device-list svelte-1cs4wva"></div>'),Ri=E("<option> </option>"),qi=E('<div class="modal-backdrop"><div class="modal"><div class="modal-header"><span class="modal-title">Edit Device</span> <button class="btn btn-sm">×</button></div> <div class="modal-body"><div class="info-panel mb-md"><div class="info-row"><span class="info-label">IEEE</span> <span class="info-value"> </span></div> <div class="info-row"><span class="info-label">Model</span> <span class="info-value"> </span></div> <div class="info-row"><span class="info-label">Manufacturer</span> <span class="info-value"> </span></div></div> <div class="form-group"><label class="form-label" for="edit-name">Friendly Name</label> <input id="edit-name" class="form-input" type="text" placeholder="e.g., Living Room Light"/></div> <div class="form-group"><label class="form-label" for="edit-category">Category</label> <select id="edit-category" class="form-select"></select></div></div> <div class="modal-footer"><button class="btn">Cancel</button> <button class="btn btn-primary">Save</button></div></div></div>'),Vi=E('<div class="toolbar"><button class="btn btn-sm"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"></path></svg> </button> <div class="toolbar-spacer"></div> <span class="text-sm muted"> </span> <button class="btn btn-sm" title="Refresh"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"></path><path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"></path></svg></button></div> <!> <!>',1);function Hi(e,t){dn(t,!0);const n=()=>Q(Ea,"$permitJoinActive",l),a=()=>Q(Sa,"$permitJoinRemaining",l),r=()=>Q(Jn,"$devices",l),s=()=>Q(pt,"$loading",l),[l,c]=An();let o=q(null),v=q(""),d=q("other");const m=["light","outlet","switch","sensor","lock","thermostat","fan","blinds","other"];function _(C){return{light:"tag-yellow",outlet:"tag-blue",switch:"tag-purple",sensor:"tag-green",lock:"tag-red",thermostat:"tag-blue",fan:"tag-purple",blinds:"tag-yellow",other:""}[C]||""}async function h(C,I){const T=kt(C.ieee_address),V=C.state_on;Aa(T,!V);try{await fe.toggle(T,I)}catch(le){Aa(T,V??!1),console.error("Toggle failed:",le)}}function S(C){p(o,C,!0),p(v,C.friendly_name||"",!0),p(d,C.category||"other",!0)}async function N(){if(!i(o))return;const C=kt(i(o).ieee_address);try{await fe.updateDevice(C,i(v)||void 0,i(d)),p(o,null),ln()}catch(I){console.error("Failed to update device:",I)}}const b=["light","outlet","lock","thermostat","fan","blinds"],$=["switch","sensor"];function M(C){const I=C.category||"other";return $.includes(I)?!1:b.includes(I)?!0:C.endpoints.some(T=>T.in_clusters.includes(6)||T.in_clusters.includes(8))}function O(C){const I=C.endpoints.filter(T=>T.in_clusters.includes(6)||T.in_clusters.includes(8)).map(T=>T.id);return I.length===0&&M(C)?[1]:I}var F=Vi(),B=ue(F),j=f(B);j.__click=()=>Di(60);var D=u(f(j)),P=u(j,4),ae=f(P),X=u(P,2);X.__click=()=>ln();var nt=u(B,2);{var ye=C=>{var I=Pi();x(C,I)},at=C=>{var I=zi();dt(I,5,r,T=>kt(T.ieee_address),(T,V)=>{const le=Ct(()=>kt(i(V).ieee_address)),xe=Ct(()=>i(V).friendly_name||i(V).model||i(le)),De=Ct(()=>O(i(V)));var Re=Ii(),Pe=f(Re),ke=f(Pe),qe=u(Pe,2),ve=f(qe),Le=f(ve),Je=u(ve,2),Ve=f(Je),he=u(Je,2);{var ht=g=>{var y=Li();let w;var z=f(y);J(()=>{w=be(y,1,"tag",null,w,{"tag-green":i(V).state_on,"tag-red":!i(V).state_on}),k(z,i(V).state_on?"ON":"OFF")}),x(g,y)};H(he,g=>{i(V).state_on!==void 0&&M(i(V))&&g(ht)})}var Ge=u(qe,2),Ye=f(Ge),st=u(Ge,2),Ke=f(st);dt(Ke,17,()=>i(De),qt,(g,y)=>{var w=Fi();w.__click=()=>h(i(V),i(y)),J(()=>nn(w,"title",i(De).length>1?`Toggle EP${i(y)}`:"Toggle")),x(g,w)});var it=u(Ke,2);it.__click=()=>S(i(V)),J(g=>{k(ke,i(xe)),be(ve,1,`tag ${g??""}`,"svelte-1cs4wva"),k(Le,i(V).category||"other"),k(Ve,i(V).device_type),k(Ye,i(le))},[()=>_(i(V).category||"other")]),x(T,Re)}),x(C,I)};H(nt,C=>{r().length===0?C(ye):C(at,!1)})}var rt=u(nt,2);{var A=C=>{const I=Ct(()=>kt(i(o).ieee_address));var T=qi();T.__click=()=>p(o,null);var V=f(T);V.__click=w=>w.stopPropagation();var le=f(V),xe=u(f(le),2);xe.__click=()=>p(o,null);var De=u(le,2),Re=f(De),Pe=f(Re),ke=u(f(Pe),2),qe=f(ke),ve=u(Pe,2),Le=u(f(ve),2),Je=f(Le),Ve=u(ve,2),he=u(f(Ve),2),ht=f(he),Ge=u(Re,2),Ye=u(f(Ge),2),st=u(Ge,2),Ke=u(f(st),2);dt(Ke,21,()=>m,qt,(w,z)=>{var ee=Ri(),Ee=f(ee),ie={};J(()=>{k(Ee,i(z)),ie!==(ie=i(z))&&(ee.value=(ee.__value=i(z))??"")}),x(w,ee)});var it=u(De,2),g=f(it);g.__click=()=>p(o,null);var y=u(g,2);y.__click=N,J(()=>{k(qe,i(I)),k(Je,i(o).model||"Unknown"),k(ht,i(o).manufacturer||"Unknown")}),xt(Ye,()=>i(v),w=>p(v,w)),Qe(Ke,()=>i(d),w=>p(d,w)),x(C,T)};H(rt,C=>{i(o)&&C(A)})}J(()=>{j.disabled=n(),k(D,` ${n()?`Joining (${a()}s)`:"Pair"}`),k(ae,`${r().length??""} device(s)`),X.disabled=s().devices}),x(e,F),_n(),c()}Wn(["click"]);var Ui=E('<div class="empty-state">No automations configured.<br/> <span class="text-xs">Use "Link Devices" to connect a button to control another device.</span></div>'),Bi=E('<span class="interaction-flow svelte-2b6lb5"><span class="mono"> </span> <span class="flow-arrow svelte-2b6lb5">→</span> <span class="mono"> </span></span>'),ji=E('<span class="mono"> </span>'),Wi=E('<span class="tag tag-blue">link</span>'),Ji=E('<div><span class="automation-name svelte-2b6lb5"><!></span> <span class="automation-tags svelte-2b6lb5"><span> </span> <!></span> <span class="automation-trigger mono text-xs muted svelte-2b6lb5"><!></span> <span class="automation-actions svelte-2b6lb5"><button class="btn btn-sm"> </button> <button class="btn btn-sm" title="Run now"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"></path></svg></button> <button class="btn btn-sm" title="Edit"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"></path></svg></button> <button class="btn btn-sm btn-danger" title="Delete"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"></path><path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"></path></svg></button></span></div>'),Gi=E('<div class="automation-list svelte-2b6lb5"></div>'),Yi=E("<option> </option>"),Ki=E("<option> </option>"),Zi=E('<div class="link-preview svelte-2b6lb5"><span class="mono"> </span> <span class="flow-arrow svelte-2b6lb5">→</span> <span class="mono"> </span></div>'),Xi=E('<div class="modal-backdrop" role="button" tabindex="-1"><div class="modal" role="dialog"><div class="modal-header"><span class="modal-title">Link Devices</span> <button class="btn btn-sm">×</button></div> <div class="modal-body"><p class="text-sm muted mb-md">Create a simple interaction: when one device triggers, control another.</p> <div class="link-builder svelte-2b6lb5"><div class="link-row svelte-2b6lb5"><span class="link-label svelte-2b6lb5">When</span> <select class="form-select svelte-2b6lb5"><option>Select source device...</option><!></select></div> <div class="link-row svelte-2b6lb5"><span class="link-label svelte-2b6lb5">is</span> <select class="form-select svelte-2b6lb5"><option>toggled</option><option>turned on</option><option>turned off</option></select></div> <div class="link-row svelte-2b6lb5"><span class="link-label svelte-2b6lb5">then</span> <select class="form-select svelte-2b6lb5"><option>toggle</option><option>turn on</option><option>turn off</option></select></div> <div class="link-row svelte-2b6lb5"><span class="link-label svelte-2b6lb5"></span> <select class="form-select svelte-2b6lb5"><option>Select target device...</option><!></select></div></div> <!></div> <div class="modal-footer"><button class="btn">Cancel</button> <button class="btn btn-primary">Create Link</button></div></div></div>'),Qi=E('<label class="form-check"><input type="checkbox"/> </label>'),eo=E('<div class="form-group"><label class="form-label" for="sched-time">Time</label> <input id="sched-time" class="form-input" type="time"/></div> <div class="form-group"><label class="form-label">Days</label> <div class="flex gap-sm"></div></div>',1),to=E('<div class="form-group"><label class="form-label" for="interval-sec">Interval (seconds)</label> <input id="interval-sec" class="form-input" type="number" min="10"/></div>'),no=E('<div class="form-group"><label class="form-label" for="sched-type">Schedule Type</label> <select id="sched-type" class="form-select"><option>Time of Day</option><option>Interval</option></select></div> <!>',1),ao=E("<option> </option>"),ro=E('<div class="form-group"><label class="form-label" for="trigger-device">Device</label> <select id="trigger-device" class="form-select"><option>Select...</option><!></select></div> <div class="form-group"><label class="form-label" for="state-change">State Change</label> <select id="state-change" class="form-select"><option>Any</option><option>Turned On</option><option>Turned Off</option><option>Toggled</option></select></div>',1),so=E("<option> </option>"),io=E('<select class="form-select"><option>Device...</option><!></select> <select class="form-select action-cmd-select svelte-2b6lb5"><option>On</option><option>Off</option><option>Toggle</option></select>',1),oo=E('<input class="form-input" type="number" placeholder="Seconds" style="width: 80px"/> <span class="text-sm muted">seconds</span>',1),lo=E('<input class="form-input" type="text" placeholder="Log message"/>'),co=E('<div class="action-row svelte-2b6lb5"><select class="form-select action-type-select svelte-2b6lb5"><option>Device</option><option>Delay</option><option>Log</option></select> <!> <button class="btn btn-sm btn-danger">×</button></div>'),uo=E('<div class="modal-backdrop" role="button" tabindex="-1"><div class="modal modal-lg" role="dialog"><div class="modal-header"><span class="modal-title"> </span> <button class="btn btn-sm">×</button></div> <div class="modal-body"><div class="form-group"><label class="form-label" for="auto-name">Name</label> <input id="auto-name" class="form-input" type="text" placeholder="e.g., Evening Lights" required/></div> <div class="form-group"><label class="form-label" for="auto-desc">Description</label> <input id="auto-desc" class="form-input" type="text" placeholder="Optional description"/></div> <div class="section"><div class="section-title">Trigger</div> <div class="form-group"><label class="form-label" for="trigger-type">Type</label> <select id="trigger-type" class="form-select"><option>Manual Only</option><option>Schedule</option><option>Device State</option></select></div> <!></div> <div class="section"><div class="section-title">Actions</div> <!> <button class="btn btn-sm">+ Add Action</button></div></div> <div class="modal-footer"><button class="btn">Cancel</button> <button class="btn btn-primary">Save</button></div></div></div>'),fo=E('<div class="toolbar"><button class="btn btn-sm"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"></path><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"></path></svg> Link</button> <button class="btn btn-sm"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"></path></svg> Add</button> <div class="toolbar-spacer"></div> <span class="text-sm muted"> </span> <button class="btn btn-sm" title="Refresh"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"></path><path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"></path></svg></button></div> <!> <!> <!>',1);function vo(e,t){dn(t,!0);const n=()=>Q(Jn,"$devices",s),a=()=>Q(ua,"$automations",s),r=()=>Q(pt,"$loading",s),[s,l]=An();let c=q(!1),o=q(""),v=q("toggled"),d=q(""),m=q("toggle"),_=q(!1),h=q(null),S=q(""),N=q(""),b=q("manual"),$=q("time_of_day"),M=q("18:00"),O=q(Yt([1,2,3,4,5])),F=q(300),B=q(""),j=q("any"),D=q(Yt([]));function P(g){const y=n().find(w=>kt(w.ieee_address)===g);return y?.friendly_name||y?.model||g.slice(0,11)+"..."}function ae(g){return g.trigger.type==="device_state"&&g.actions.length===1&&g.actions[0].type==="device_control"}function X(g){if(!ae(g))return null;const y=g.trigger,w=g.actions[0];return{source:P(y.device_ieee),trigger:y.state_change.type,target:P(w.device_ieee),action:w.command.type}}function nt(){p(h,null),p(S,""),p(N,""),p(b,"manual"),p($,"time_of_day"),p(M,"18:00"),p(O,[1,2,3,4,5],!0),p(F,300),p(B,""),p(j,"any"),p(D,[{type:"device_control",deviceIeee:"",endpoint:1,command:"toggle",seconds:5,message:""}],!0)}function ye(){p(o,""),p(v,"toggled"),p(d,""),p(m,"toggle")}function at(){nt(),p(_,!0)}function rt(){ye(),p(c,!0)}function A(g){p(h,g.id,!0),p(S,g.name,!0),p(N,g.description||"",!0),p(b,g.trigger.type,!0),g.trigger.type==="schedule"?(p($,g.trigger.schedule.type,!0),g.trigger.schedule.type==="time_of_day"?(p(M,g.trigger.schedule.time,!0),p(O,[...g.trigger.schedule.days],!0)):p(F,g.trigger.schedule.seconds,!0)):g.trigger.type==="device_state"&&(p(B,g.trigger.device_ieee,!0),p(j,g.trigger.state_change.type,!0)),p(D,g.actions.map(y=>y.type==="device_control"?{type:"device_control",deviceIeee:y.device_ieee,endpoint:y.endpoint,command:y.command.type,seconds:5,message:""}:y.type==="delay"?{type:"delay",deviceIeee:"",endpoint:1,command:"toggle",seconds:y.seconds,message:""}:{type:"log",deviceIeee:"",endpoint:1,command:"toggle",seconds:5,message:y.message}),!0),p(_,!0)}function C(){p(D,[...i(D),{type:"device_control",deviceIeee:"",endpoint:1,command:"toggle",seconds:5,message:""}],!0)}function I(g){p(D,i(D).filter((y,w)=>w!==g),!0)}async function T(){if(!i(o)||!i(d))return;const g=P(i(o)),y=P(i(d)),w=`${g} → ${y}`;try{await fe.createAutomation({name:w,description:`When ${g} ${i(v).replace("_"," ")}, ${i(m).replace("_"," ")} ${y}`,trigger:{type:"device_state",device_ieee:i(o),state_change:{type:i(v)}},actions:[{type:"device_control",device_ieee:i(d),endpoint:1,command:{type:i(m)}}]}),p(c,!1),$t()}catch(z){console.error("Failed to create link:",z)}}async function V(){let g;i(b)==="manual"?g={type:"manual"}:i(b)==="schedule"?g={type:"schedule",schedule:i($)==="time_of_day"?{type:"time_of_day",time:i(M),days:i(O)}:{type:"interval",seconds:i(F)}}:g={type:"device_state",device_ieee:i(B),state_change:{type:i(j)}};const y=i(D).filter(w=>w.type==="delay"||w.type==="log"||w.type==="device_control"&&w.deviceIeee).map(w=>w.type==="device_control"?{type:"device_control",device_ieee:w.deviceIeee,endpoint:w.endpoint,command:{type:w.command}}:w.type==="delay"?{type:"delay",seconds:w.seconds}:{type:"log",message:w.message,level:"info"});try{i(h)?await fe.updateAutomation(i(h),{name:i(S),description:i(N)||void 0,trigger:g,actions:y}):await fe.createAutomation({name:i(S),description:i(N)||void 0,trigger:g,actions:y}),p(_,!1),$t()}catch(w){console.error("Failed to save:",w)}}async function le(g){try{g.enabled?await fe.disableAutomation(g.id):await fe.enableAutomation(g.id),$t()}catch(y){console.error("Failed to toggle:",y)}}async function xe(g){try{await fe.triggerAutomation(g)}catch(y){console.error("Failed to trigger:",y)}}async function De(g,y){if(confirm(`Delete "${y}"?`))try{await fe.deleteAutomation(g),$t()}catch(w){console.error("Failed to delete:",w)}}function Re(g){if(g.type==="manual")return"Manual";if(g.type==="schedule"){if(g.schedule.type==="time_of_day"){const y=g.schedule.days.length===0?"daily":g.schedule.days.map(w=>["Su","Mo","Tu","We","Th","Fr","Sa"][w]).join(",");return`${g.schedule.time} (${y})`}return`Every ${g.schedule.seconds}s`}return P(g.device_ieee)}var Pe=fo(),ke=ue(Pe),qe=f(ke);qe.__click=rt;var ve=u(qe,2);ve.__click=at;var Le=u(ve,4),Je=f(Le),Ve=u(Le,2);Ve.__click=()=>$t();var he=u(ke,2);{var ht=g=>{var y=Ui();x(g,y)},Ge=g=>{var y=Gi();dt(y,5,a,w=>w.id,(w,z)=>{const ee=Ct(()=>X(i(z)));var Ee=Ji();let ie;var de=f(Ee),Fe=f(de);{var St=L=>{var R=Bi(),ce=f(R),W=f(ce),Z=u(ce,4),te=f(Z);J(()=>{k(W,i(ee).source),k(te,i(ee).target)}),x(L,R)},Pt=L=>{var R=ji(),ce=f(R);J(()=>k(ce,i(z).name)),x(L,R)};H(Fe,L=>{i(ee)?L(St):L(Pt,!1)})}var Lt=u(de,2),Y=f(Lt);let re;var _e=f(Y),Se=u(Y,2);{var ge=L=>{var R=Wi();x(L,R)};H(Se,L=>{i(ee)&&L(ge)})}var ne=u(Lt,2),me=f(ne);{var He=L=>{var R=Xa();J(ce=>k(R,ce),[()=>i(ee).trigger.replace("_"," ")]),x(L,R)},ot=L=>{var R=Xa();J(ce=>k(R,ce),[()=>Re(i(z).trigger)]),x(L,R)};H(me,L=>{i(ee)?L(He):L(ot,!1)})}var gt=u(ne,2),Ie=f(gt);Ie.__click=()=>le(i(z));var Ft=f(Ie),Wt=u(Ie,2);Wt.__click=()=>xe(i(z).id);var At=u(Wt,2);At.__click=()=>A(i(z));var en=u(At,2);en.__click=()=>De(i(z).id,i(z).name),J(()=>{ie=be(Ee,1,"automation-row svelte-2b6lb5",null,ie,{"disabled-row":!i(z).enabled}),re=be(Y,1,"tag",null,re,{"tag-green":i(z).enabled,"tag-red":!i(z).enabled}),k(_e,i(z).enabled?"ON":"OFF"),nn(Ie,"title",i(z).enabled?"Disable":"Enable"),k(Ft,i(z).enabled?"Off":"On")}),x(w,Ee)}),x(g,y)};H(he,g=>{a().length===0?g(ht):g(Ge,!1)})}var Ye=u(he,2);{var st=g=>{var y=Xi();y.__click=()=>p(c,!1),y.__keydown=W=>W.key==="Escape"&&p(c,!1);var w=f(y);w.__click=W=>W.stopPropagation();var z=f(w),ee=u(f(z),2);ee.__click=()=>p(c,!1);var Ee=u(z,2),ie=u(f(Ee),2),de=f(ie),Fe=u(f(de),2),St=f(Fe);St.value=St.__value="";var Pt=u(St);dt(Pt,1,n,qt,(W,Z)=>{const te=Ct(()=>kt(i(Z).ieee_address));var se=Yi(),Ze=f(se),Ae={};J(()=>{k(Ze,i(Z).friendly_name||i(Z).model||i(te)),Ae!==(Ae=i(te))&&(se.value=(se.__value=i(te))??"")}),x(W,se)});var Lt=u(de,2),Y=u(f(Lt),2),re=f(Y);re.value=re.__value="toggled";var _e=u(re);_e.value=_e.__value="turned_on";var Se=u(_e);Se.value=Se.__value="turned_off";var ge=u(Lt,2),ne=u(f(ge),2),me=f(ne);me.value=me.__value="toggle";var He=u(me);He.value=He.__value="turn_on";var ot=u(He);ot.value=ot.__value="turn_off";var gt=u(ge,2),Ie=u(f(gt),2),Ft=f(Ie);Ft.value=Ft.__value="";var Wt=u(Ft);dt(Wt,1,n,qt,(W,Z)=>{const te=Ct(()=>kt(i(Z).ieee_address));var se=Ki(),Ze=f(se),Ae={};J(()=>{k(Ze,i(Z).friendly_name||i(Z).model||i(te)),Ae!==(Ae=i(te))&&(se.value=(se.__value=i(te))??"")}),x(W,se)});var At=u(ie,2);{var en=W=>{var Z=Zi(),te=f(Z),se=f(te),Ze=u(te,4),Ae=f(Ze);J((Ue,mt)=>{k(se,Ue),k(Ae,mt)},[()=>P(i(o)),()=>P(i(d))]),x(W,Z)};H(At,W=>{i(o)&&i(d)&&W(en)})}var L=u(Ee,2),R=f(L);R.__click=()=>p(c,!1);var ce=u(R,2);ce.__click=T,J(()=>ce.disabled=!i(o)||!i(d)),Qe(Fe,()=>i(o),W=>p(o,W)),Qe(Y,()=>i(v),W=>p(v,W)),Qe(ne,()=>i(m),W=>p(m,W)),Qe(Ie,()=>i(d),W=>p(d,W)),x(g,y)};H(Ye,g=>{i(c)&&g(st)})}var Ke=u(Ye,2);{var it=g=>{var y=uo();y.__click=()=>p(_,!1),y.__keydown=L=>L.key==="Escape"&&p(_,!1);var w=f(y);w.__click=L=>L.stopPropagation();var z=f(w),ee=f(z),Ee=f(ee),ie=u(ee,2);ie.__click=()=>p(_,!1);var de=u(z,2),Fe=f(de),St=u(f(Fe),2),Pt=u(Fe,2),Lt=u(f(Pt),2),Y=u(Pt,2),re=u(f(Y),2),_e=u(f(re),2),Se=f(_e);Se.value=Se.__value="manual";var ge=u(Se);ge.value=ge.__value="schedule";var ne=u(ge);ne.value=ne.__value="device_state";var me=u(re,2);{var He=L=>{var R=no(),ce=ue(R),W=u(f(ce),2),Z=f(W);Z.value=Z.__value="time_of_day";var te=u(Z);te.value=te.__value="interval";var se=u(ce,2);{var Ze=Ue=>{var mt=eo(),It=ue(mt),Ce=u(f(It),2),bt=u(It,2),wt=u(f(bt),2);dt(wt,20,()=>["Su","Mo","Tu","We","Th","Fr","Sa"],qt,(lt,yt,pe)=>{var $e=Qi(),Te=f($e);Te.__change=()=>{i(O).includes(pe)?p(O,i(O).filter(ct=>ct!==pe),!0):p(O,[...i(O),pe].sort(),!0)};var Jt=u(Te);J(ct=>{gi(Te,ct),k(Jt,` ${yt??""}`)},[()=>i(O).includes(pe)]),x(lt,$e)}),xt(Ce,()=>i(M),lt=>p(M,lt)),x(Ue,mt)},Ae=Ue=>{var mt=to(),It=u(f(mt),2);xt(It,()=>i(F),Ce=>p(F,Ce)),x(Ue,mt)};H(se,Ue=>{i($)==="time_of_day"?Ue(Ze):Ue(Ae,!1)})}Qe(W,()=>i($),Ue=>p($,Ue)),x(L,R)},ot=L=>{var R=mn(),ce=ue(R);{var W=Z=>{var te=ro(),se=ue(te),Ze=u(f(se),2),Ae=f(Ze);Ae.value=Ae.__value="";var Ue=u(Ae);dt(Ue,1,n,qt,(yt,pe)=>{const $e=Ct(()=>kt(i(pe).ieee_address));var Te=ao(),Jt=f(Te),ct={};J(()=>{k(Jt,i(pe).friendly_name||i(pe).model||i($e)),ct!==(ct=i($e))&&(Te.value=(Te.__value=i($e))??"")}),x(yt,Te)});var mt=u(se,2),It=u(f(mt),2),Ce=f(It);Ce.value=Ce.__value="any";var bt=u(Ce);bt.value=bt.__value="turned_on";var wt=u(bt);wt.value=wt.__value="turned_off";var lt=u(wt);lt.value=lt.__value="toggled",Qe(Ze,()=>i(B),yt=>p(B,yt)),Qe(It,()=>i(j),yt=>p(j,yt)),x(Z,te)};H(ce,Z=>{i(b)==="device_state"&&Z(W)},!0)}x(L,R)};H(me,L=>{i(b)==="schedule"?L(He):L(ot,!1)})}var gt=u(Y,2),Ie=u(f(gt),2);dt(Ie,17,()=>i(D),qt,(L,R,ce)=>{var W=co(),Z=f(W),te=f(Z);te.value=te.__value="device_control";var se=u(te);se.value=se.__value="delay";var Ze=u(se);Ze.value=Ze.__value="log";var Ae=u(Z,2);{var Ue=Ce=>{var bt=io(),wt=ue(bt),lt=f(wt);lt.value=lt.__value="";var yt=u(lt);dt(yt,1,n,qt,(ct,Va)=>{const da=Ct(()=>kt(i(Va).ieee_address));var Gn=so(),es=f(Gn),Ha={};J(ts=>{k(es,ts),Ha!==(Ha=i(da))&&(Gn.value=(Gn.__value=i(da))??"")},[()=>i(Va).friendly_name||i(da).slice(0,8)]),x(ct,Gn)});var pe=u(wt,2),$e=f(pe);$e.value=$e.__value="turn_on";var Te=u($e);Te.value=Te.__value="turn_off";var Jt=u(Te);Jt.value=Jt.__value="toggle",Qe(wt,()=>i(R).deviceIeee,ct=>i(R).deviceIeee=ct),Qe(pe,()=>i(R).command,ct=>i(R).command=ct),x(Ce,bt)},mt=Ce=>{var bt=mn(),wt=ue(bt);{var lt=pe=>{var $e=oo(),Te=ue($e);xt(Te,()=>i(R).seconds,Jt=>i(R).seconds=Jt),x(pe,$e)},yt=pe=>{var $e=lo();xt($e,()=>i(R).message,Te=>i(R).message=Te),x(pe,$e)};H(wt,pe=>{i(R).type==="delay"?pe(lt):pe(yt,!1)},!0)}x(Ce,bt)};H(Ae,Ce=>{i(R).type==="device_control"?Ce(Ue):Ce(mt,!1)})}var It=u(Ae,2);It.__click=()=>I(ce),Qe(Z,()=>i(R).type,Ce=>i(R).type=Ce),x(L,W)});var Ft=u(Ie,2);Ft.__click=C;var Wt=u(de,2),At=f(Wt);At.__click=()=>p(_,!1);var en=u(At,2);en.__click=V,J(()=>k(Ee,`${i(h)?"Edit":"Add"} Automation`)),xt(St,()=>i(S),L=>p(S,L)),xt(Lt,()=>i(N),L=>p(N,L)),Qe(_e,()=>i(b),L=>p(b,L)),x(g,y)};H(Ke,g=>{i(_)&&g(it)})}J(()=>{k(Je,`${a().length??""} rule(s)`),Ve.disabled=r().automations}),x(e,Pe),_n(),l()}Wn(["click","keydown","change"]);var _o=E('<div class="empty-state">No cameras configured.</div>'),po=la('<svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M5 3.5h6A1.5 1.5 0 0 1 12.5 5v6a1.5 1.5 0 0 1-1.5 1.5H5A1.5 1.5 0 0 1 3.5 11V5A1.5 1.5 0 0 1 5 3.5z"></path></svg>'),ho=la('<svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"></path></svg>'),go=E('<div class="stream-placeholder svelte-3om0xx">WebRTC not supported in UI</div>'),mo=E('<img class="stream-img svelte-3om0xx"/>'),bo=E('<div class="camera-stream-row svelte-3om0xx"><!></div>'),wo=E('<div class="camera-row svelte-3om0xx"><span class="camera-name mono svelte-3om0xx"> </span> <span class="camera-tags svelte-3om0xx"><span class="tag"> </span> <span> </span></span> <span class="camera-actions svelte-3om0xx"><button class="btn btn-sm"><!></button> <button class="btn btn-sm" title="Edit"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"></path></svg></button> <button class="btn btn-sm btn-danger" title="Delete"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"></path><path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"></path></svg></button></span></div> <!>',1),yo=E('<div class="camera-list svelte-3om0xx"></div>'),xo=E('<div class="form-hint">Format: rtsp://host:554/path</div>'),ko=E('<div class="form-group"><label class="form-label">Username (optional)</label> <input class="form-input" type="text" placeholder="admin"/></div> <div class="form-group"><label class="form-label">Password (optional)</label> <input class="form-input" type="password"/></div>',1),Eo=E('<div class="modal-backdrop"><div class="modal"><div class="modal-header"><span class="modal-title"> </span> <button class="btn btn-sm">×</button></div> <div class="modal-body"><div class="form-group"><label class="form-label">Name</label> <input class="form-input" type="text" placeholder="Living Room" required/></div> <div class="form-group"><label class="form-label">Stream Type</label> <select class="form-select"><option>MJPEG (HTTP)</option><option>RTSP</option><option>WebRTC</option></select></div> <div class="form-group"><label class="form-label">Stream URL</label> <input class="form-input" type="text" required/> <!></div> <!></div> <div class="modal-footer"><button class="btn">Cancel</button> <button class="btn btn-primary"> </button></div></div></div>'),So=E('<div class="toolbar"><button class="btn btn-sm"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"></path></svg> Add</button> <div class="toolbar-spacer"></div> <span class="text-sm muted"> </span> <button class="btn btn-sm" title="Refresh"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"></path><path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"></path></svg></button></div> <!> <!>',1);function Ao(e,t){dn(t,!0);const n=()=>Q(Kr,"$cameras",r),a=()=>Q(pt,"$loading",r),[r,s]=An();let l=q(!1),c=q(null),o=q(""),v=q(""),d=q("mjpeg"),m=q(""),_=q(""),h=q(Yt(new Set));function S(){p(c,null),p(o,""),p(v,""),p(d,"mjpeg"),p(m,""),p(_,"")}function N(A){p(c,A.id,!0),p(o,A.name,!0),p(v,A.stream_url,!0),p(d,A.stream_type,!0),p(m,""),p(_,""),p(l,!0)}async function b(){try{i(c)?await fe.updateCamera(i(c),i(o),i(v),i(d),i(m)||void 0,i(_)||void 0):await fe.addCamera(i(o),i(v),i(d),i(m)||void 0,i(_)||void 0),p(l,!1),S(),Ln()}catch(A){console.error("Failed to save camera:",A),alert("Failed to save camera")}}async function $(A){if(confirm(`Delete "${A.name}"?`))try{await fe.deleteCamera(A.id),Ln()}catch(C){console.error("Failed to delete:",C)}}function M(A){i(h).has(A)?(i(h).delete(A),p(h,new Set(i(h)),!0)):(i(h).add(A),p(h,new Set(i(h)),!0))}function O(A){return fe.getCameraStreamUrl(A)}var F=So(),B=ue(F),j=f(B);j.__click=()=>{S(),p(l,!0)};var D=u(j,4),P=f(D),ae=u(D,2);ae.__click=()=>Ln();var X=u(B,2);{var nt=A=>{var C=_o();x(A,C)},ye=A=>{var C=yo();dt(C,5,n,I=>I.id,(I,T)=>{const V=Ct(()=>i(h).has(i(T).id));var le=wo(),xe=ue(le),De=f(xe),Re=f(De),Pe=u(De,2),ke=f(Pe),qe=f(ke),ve=u(ke,2);let Le;var Je=f(ve),Ve=u(Pe,2),he=f(Ve);he.__click=()=>M(i(T).id);var ht=f(he);{var Ge=y=>{var w=po();x(y,w)},Ye=y=>{var w=ho();x(y,w)};H(ht,y=>{i(V)?y(Ge):y(Ye,!1)})}var st=u(he,2);st.__click=()=>N(i(T));var Ke=u(st,2);Ke.__click=()=>$(i(T));var it=u(xe,2);{var g=y=>{var w=bo(),z=f(w);{var ee=ie=>{var de=go();x(ie,de)},Ee=ie=>{var de=mo();J(Fe=>{nn(de,"src",Fe),nn(de,"alt",i(T).name)},[()=>O(i(T).id)]),x(ie,de)};H(z,ie=>{i(T).stream_type==="webrtc"?ie(ee):ie(Ee,!1)})}x(y,w)};H(it,y=>{i(V)&&y(g)})}J(y=>{k(Re,i(T).name),k(qe,y),Le=be(ve,1,"tag",null,Le,{"tag-green":i(T).enabled,"tag-red":!i(T).enabled}),k(Je,i(T).enabled?"ON":"OFF"),nn(he,"title",i(V)?"Stop":"Play")},[()=>i(T).stream_type.toUpperCase()]),x(I,le)}),x(A,C)};H(X,A=>{n().length===0?A(nt):A(ye,!1)})}var at=u(X,2);{var rt=A=>{var C=Eo();C.__click=()=>p(l,!1);var I=f(C);I.__click=w=>w.stopPropagation();var T=f(I),V=f(T),le=f(V),xe=u(V,2);xe.__click=()=>p(l,!1);var De=u(T,2),Re=f(De),Pe=u(f(Re),2),ke=u(Re,2),qe=u(f(ke),2),ve=f(qe);ve.value=ve.__value="mjpeg";var Le=u(ve);Le.value=Le.__value="rtsp";var Je=u(Le);Je.value=Je.__value="webrtc";var Ve=u(ke,2),he=u(f(Ve),2),ht=u(he,2);{var Ge=w=>{var z=xo();x(w,z)};H(ht,w=>{i(d)==="rtsp"&&w(Ge)})}var Ye=u(Ve,2);{var st=w=>{var z=ko(),ee=ue(z),Ee=u(f(ee),2),ie=u(ee,2),de=u(f(ie),2);xt(Ee,()=>i(m),Fe=>p(m,Fe)),xt(de,()=>i(_),Fe=>p(_,Fe)),x(w,z)};H(Ye,w=>{i(d)==="rtsp"&&w(st)})}var Ke=u(De,2),it=f(Ke);it.__click=()=>p(l,!1);var g=u(it,2);g.__click=b;var y=f(g);J(()=>{k(le,`${i(c)?"Edit":"Add"} Camera`),nn(he,"placeholder",i(d)==="rtsp"?"rtsp://192.168.1.x:554/stream":"http://192.168.1.x:8000/video_feed"),k(y,i(c)?"Save":"Add")}),xt(Pe,()=>i(o),w=>p(o,w)),Qe(qe,()=>i(d),w=>p(d,w)),xt(he,()=>i(v),w=>p(v,w)),x(A,C)};H(at,A=>{i(l)&&A(rt)})}J(()=>{k(P,`${n().length??""} camera(s)`),ae.disabled=a().cameras}),x(e,F),_n(),s()}Wn(["click"]);var Co=E('<div class="info-row"><span class="info-label">Application</span> <span class="info-value"> </span></div> <div class="info-row"><span class="info-label">Version</span> <span class="info-value"> </span></div> <div class="info-row"><span class="info-label">Firmware</span> <span class="info-value"> </span></div>',1),$o=E('<div class="muted text-sm">Loading...</div>'),To=E('<div class="info-row"><span class="info-label">State</span> <span class="info-value"><span> </span></span></div> <div class="info-row"><span class="info-label">Channel</span> <span class="info-value"> </span></div> <div class="info-row"><span class="info-label">PAN ID</span> <span class="info-value"> </span></div> <div class="info-row"><span class="info-label">Ext PAN ID</span> <span class="info-value text-xs"> </span></div> <div class="info-row"><span class="info-label">Permit Join</span> <span class="info-value"><span> </span></span></div>',1),Mo=E('<div class="muted text-sm">No Zigbee adapter detected</div>'),No=E('<div class="muted text-sm">Loading...</div>'),Oo=E('<div class="toolbar"><span class="text-sm">Overall: <span> </span></span> <div class="toolbar-spacer"></div> <button class="btn btn-sm" title="Refresh"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"></path><path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"></path></svg></button></div> <div class="section"><div class="section-title">Connections</div> <div class="connection-list svelte-rgo3ix"><div class="connection-row svelte-rgo3ix"><span class="connection-name mono svelte-rgo3ix">Backend API</span> <span> </span> <span class="connection-detail mono text-xs muted svelte-rgo3ix"> </span></div> <div class="connection-row svelte-rgo3ix"><span class="connection-name mono svelte-rgo3ix">Zigbee Adapter</span> <span> </span> <span class="connection-detail mono text-xs muted svelte-rgo3ix"> </span></div> <div class="connection-row svelte-rgo3ix"><span class="connection-name mono svelte-rgo3ix">Zigbee Network</span> <span> </span> <span class="connection-detail mono text-xs muted svelte-rgo3ix"> </span></div> <div class="connection-row svelte-rgo3ix"><span class="connection-name mono svelte-rgo3ix">WebSocket</span> <span> </span> <span class="connection-detail mono text-xs muted svelte-rgo3ix"> </span></div></div></div> <div class="status-panels svelte-rgo3ix"><div class="info-panel"><div class="info-panel-title">System</div> <!></div> <div class="info-panel"><div class="info-panel-title">Zigbee Network</div> <!></div> <div class="info-panel"><div class="info-panel-title">Statistics</div> <div class="info-row"><span class="info-label">Devices</span> <span class="info-value"> </span></div> <div class="info-row"><span class="info-label">Automations</span> <span class="info-value"> </span></div> <div class="info-row"><span class="info-label">WebSocket</span> <span class="info-value"><span> </span></span></div></div></div>',1);function Do(e,t){dn(t,!1);const n=()=>Q(Zr,"$overallHealth",m),a=()=>Q(pt,"$loading",m),r=()=>Q(qa,"$connectionStatus",m),s=()=>Q(fa,"$systemInfo",m),l=()=>Q(Ra,"$networkStatus",m),c=()=>Q(Xr,"$deviceCount",m),o=()=>Q(ua,"$automations",m),v=()=>Q(Ni,"$enabledAutomations",m),d=()=>Q(qn,"$wsConnected",m),[m,_]=An();function h(Y){return"0x"+Y.toString(16).padStart(4,"0").toUpperCase()}function S(){va(),Qr()}function N(Y){switch(Y){case"online":return"tag-green";case"offline":return"tag-red";case"degraded":return"tag-yellow";default:return""}}function b(Y){switch(Y){case"online":return"ONLINE";case"offline":return"OFFLINE";case"degraded":return"DEGRADED";default:return"UNKNOWN"}}Yr();var $=Oo(),M=ue($),O=f(M),F=u(f(O)),B=f(F),j=u(O,4);j.__click=S;var D=u(M,2),P=u(f(D),2),ae=f(P),X=u(f(ae),2),nt=f(X),ye=u(X,2),at=f(ye),rt=u(ae,2),A=u(f(rt),2),C=f(A),I=u(A,2),T=f(I),V=u(rt,2),le=u(f(V),2),xe=f(le),De=u(le,2),Re=f(De),Pe=u(V,2),ke=u(f(Pe),2),qe=f(ke),ve=u(ke,2),Le=f(ve),Je=u(D,2),Ve=f(Je),he=u(f(Ve),2);{var ht=Y=>{var re=Co(),_e=ue(re),Se=u(f(_e),2),ge=f(Se),ne=u(_e,2),me=u(f(ne),2),He=f(me),ot=u(ne,2),gt=u(f(ot),2),Ie=f(gt);J(()=>{k(ge,s().name),k(He,s().version),k(Ie,s().firmware??"Not detected")}),x(Y,re)},Ge=Y=>{var re=$o();x(Y,re)};H(he,Y=>{s()?Y(ht):Y(Ge,!1)})}var Ye=u(Ve,2),st=u(f(Ye),2);{var Ke=Y=>{var re=To(),_e=ue(re),Se=u(f(_e),2),ge=f(Se);let ne;var me=f(ge),He=u(_e,2),ot=u(f(He),2),gt=f(ot),Ie=u(He,2),Ft=u(f(Ie),2),Wt=f(Ft),At=u(Ie,2),en=u(f(At),2),L=f(en),R=u(At,2),ce=u(f(R),2),W=f(ce);let Z;var te=f(W);J(se=>{ne=be(ge,1,"tag",null,ne,{"tag-green":l().connected,"tag-red":!l().connected}),k(me,l().connected?"Joined":"Disconnected"),k(gt,l().channel),k(Wt,se),k(L,l().extended_pan_id),Z=be(W,1,"tag",null,Z,{"tag-yellow":l().permit_join}),k(te,l().permit_join?"Active":"No")},[()=>h(l().pan_id)]),x(Y,re)},it=Y=>{var re=mn(),_e=ue(re);{var Se=ne=>{var me=Mo();x(ne,me)},ge=ne=>{var me=No();x(ne,me)};H(_e,ne=>{r().coordinator.state==="offline"?ne(Se):ne(ge,!1)},!0)}x(Y,re)};H(st,Y=>{l()?Y(Ke):Y(it,!1)})}var g=u(Ye,2),y=u(f(g),2),w=u(f(y),2),z=f(w),ee=u(y,2),Ee=u(f(ee),2),ie=f(Ee),de=u(ee,2),Fe=u(f(de),2),St=f(Fe);let Pt;var Lt=f(St);J((Y,re,_e,Se,ge,ne,me,He,ot,gt)=>{be(F,1,`tag ${Y??""}`,"svelte-rgo3ix"),k(B,re),j.disabled=a().network,be(X,1,`tag ${_e??""}`,"svelte-rgo3ix"),k(nt,Se),k(at,r().backend.detail),be(A,1,`tag ${ge??""}`,"svelte-rgo3ix"),k(C,ne),k(T,r().coordinator.detail),be(le,1,`tag ${me??""}`,"svelte-rgo3ix"),k(xe,He),k(Re,r().zigbee.detail),be(ke,1,`tag ${ot??""}`,"svelte-rgo3ix"),k(qe,gt),k(Le,r().websocket.detail),k(z,c()),k(ie,`${o().length??""} (${v()??""} active)`),Pt=be(St,1,"tag",null,Pt,{"tag-green":d(),"tag-red":!d()}),k(Lt,d()?"Live":"Disconnected")},[()=>N(n()),()=>b(n()),()=>N(r().backend.state),()=>b(r().backend.state),()=>N(r().coordinator.state),()=>b(r().coordinator.state),()=>N(r().zigbee.state),()=>b(r().zigbee.state),()=>N(r().websocket.state),()=>b(r().websocket.state)]),x(e,$),_n(),_()}Wn(["click"]);var Po=la('<path d="M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z"></path>'),Lo=la('<path d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"></path>'),Fo=E('<button class="pane-nav-btn pane-toggle"><svg width="10" height="10" viewBox="0 0 16 16" fill="currentColor"><!></svg></button>'),Io=E("<button> </button>"),zo=E('<div class="pane-content"><!></div>'),Ro=E('<div><nav class="pane-nav"><!> <!></nav> <!></div>');function ar(e,t){dn(t,!0);const n=()=>Q(t.collapsed,"$collapsed",r),a=()=>Q(t.view,"$view",r),[r,s]=An();let l=yi(t,"collapsible",3,!1);const c=[{id:"devices",label:"Devices"},{id:"automations",label:"Auto"},{id:"cameras",label:"Cameras"},{id:"status",label:"Status"}];function o(M){t.view.set(M),M==="devices"?ln():M==="automations"?$t():M==="cameras"?Ln():M==="status"&&va()}function v(){t.collapsed&&t.collapsed.update(M=>!M)}Qn(()=>{t.collapsed&&!n()&&o(a())});var d=Ro();let m;var _=f(d),h=f(_);{var S=M=>{var O=Fo();O.__click=v;var F=f(O),B=f(F);{var j=P=>{var ae=Po();x(P,ae)},D=P=>{var ae=Lo();x(P,ae)};H(B,P=>{t.collapsed&&n()?P(j):P(D,!1)})}J(()=>nn(O,"title",t.collapsed&&n()?"Expand":"Collapse")),x(M,O)};H(h,M=>{l()&&M(S)})}var N=u(h,2);dt(N,17,()=>c,qt,(M,O)=>{var F=Io();let B;F.__click=()=>o(i(O).id);var j=f(F);J(()=>{B=be(F,1,"pane-nav-btn",null,B,{active:a()===i(O).id}),k(j,i(O).label)}),x(M,F)});var b=u(_,2);{var $=M=>{var O=zo(),F=f(O);{var B=D=>{Hi(D,{})},j=D=>{var P=mn(),ae=ue(P);{var X=ye=>{vo(ye,{})},nt=ye=>{var at=mn(),rt=ue(at);{var A=I=>{Ao(I,{})},C=I=>{var T=mn(),V=ue(T);{var le=xe=>{Do(xe,{})};H(V,xe=>{a()==="status"&&xe(le)},!0)}x(I,T)};H(rt,I=>{a()==="cameras"?I(A):I(C,!1)},!0)}x(ye,at)};H(ae,ye=>{a()==="automations"?ye(X):ye(nt,!1)},!0)}x(D,P)};H(F,D=>{a()==="devices"?D(B):D(j,!1)})}x(M,O)};H(b,M=>{(!t.collapsed||!n())&&M($)})}J(()=>m=be(d,1,"pane",null,m,{"pane-collapsed":t.collapsed&&n()})),x(e,d),_n(),s()}Wn(["click"]);var qo=E('<div class="footer-item"><span> </span></div>'),Vo=E('<div id="app"><header class="header"><div class="header-title">casita</div> <div class="header-status"><span></span> <span class="mono"> </span> <span class="muted">|</span> <span class="mono"> </span></div></header> <div class="panes-container"><!> <!></div> <footer class="footer"><div class="footer-item"><span></span> <span>ws</span></div> <div class="footer-item"><span> </span></div> <!></footer></div>');function Ho(e,t){dn(t,!1);const n=()=>Q(Zr,"$overallHealth",c),a=()=>Q(Xr,"$deviceCount",c),r=()=>Q(qn,"$wsConnected",c),s=()=>Q(fa,"$systemInfo",c),l=()=>Q(qa,"$connectionStatus",c),[c,o]=An();function v(A){switch(A){case"online":return"online";case"degraded":return"warning";case"offline":return"offline";default:return"warning"}}function d(A){switch(A){case"online":return"all systems operational";case"degraded":return"degraded";case"offline":return"offline";default:return"unknown"}}xi(()=>{zt.connect(),zt.on("device_joined",()=>ln()),zt.on("device_left",()=>ln()),zt.on("device_updated",()=>ln()),zt.on("device_state_changed",A=>{A.ieee&&A.state_on!==void 0&&Aa(A.ieee,A.state_on)}),zt.on("network_state_changed",()=>va()),zt.on("automation_created",()=>$t()),zt.on("automation_updated",()=>$t()),zt.on("automation_deleted",()=>$t()),Oi()}),Yr();var m=Vo(),_=f(m),h=u(f(_),2),S=f(h),N=u(S,2),b=f(N),$=u(N,4),M=f($),O=u(_,2),F=f(O);ar(F,{get view(){return Ci}});var B=u(F,2);ar(B,{get view(){return $i},collapsible:!0,get collapsed(){return Ti}});var j=u(O,2),D=f(j),P=f(D);let ae;var X=u(D,2),nt=f(X),ye=f(nt),at=u(X,2);{var rt=A=>{var C=qo(),I=f(C),T=f(I);J(()=>k(T,l().coordinator.detail)),x(A,C)};H(at,A=>{l().coordinator.state==="online"&&A(rt)})}J((A,C)=>{be(S,1,`status-dot ${A??""}`),k(b,C),k(M,`${a()??""} devices`),ae=be(P,1,"status-dot",null,ae,{online:r(),offline:!r()}),k(ye,`v${s()?.version??"?"??""}`)},[()=>v(n()),()=>d(n())]),x(e,m),_n(),o()}ii(Ho,{target:document.getElementById("app")});
