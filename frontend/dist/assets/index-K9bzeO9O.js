(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();const ba=!1;var $a=Array.isArray,os=Array.prototype.indexOf,aa=Array.from,or=Object.defineProperty,Nn=Object.getOwnPropertyDescriptor,lr=Object.getOwnPropertyDescriptors,ls=Object.prototype,cs=Array.prototype,Da=Object.getPrototypeOf,ja=Object.isExtensible;const Yt=()=>{};function us(e){return e()}function Xn(e){for(var t=0;t<e.length;t++)e[t]()}function cr(){var e,t,n=new Promise((a,s)=>{e=a,t=s});return{promise:n,resolve:e,reject:t}}const xe=2,Oa=4,ra=8,fs=1<<24,Bt=16,jt=32,hn=64,sa=128,St=512,De=1024,Je=2048,Dt=4096,nt=8192,Zt=16384,Na=32768,yn=65536,Wa=1<<17,ur=1<<18,Sn=1<<19,fr=1<<20,Vt=1<<25,vn=32768,ya=1<<21,La=1<<22,Qt=1<<23,Xt=Symbol("$state"),vs=Symbol(""),bn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function vr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function ds(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ps(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function _s(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function hs(e){throw new Error("https://svelte.dev/e/effect_orphan")}function gs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ms(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function bs(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ys(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ws(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const xs=1,Es=2,dr=4,ks=8,Ss=16,As=1,Cs=2,$e=Symbol(),Ts="http://www.w3.org/1999/xhtml";function Ms(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function $s(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function pr(e){return e===this.v}function _r(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function hr(e){return!_r(e,this.v)}let jn=!1,Ds=!1;function Os(){jn=!0}let le=null;function wn(e){le=e}function nn(e,t=!1,n){le={p:le,i:!1,c:null,e:null,s:e,x:null,l:jn&&!t?{s:null,u:null,$:[]}:null}}function an(e){var t=le,n=t.e;if(n!==null){t.e=null;for(var a of n)Lr(a)}return t.i=!0,le=t.p,{}}function Wn(){return!jn||le!==null&&le.l===null}let on=[];function gr(){var e=on;on=[],Xn(e)}function An(e){if(on.length===0&&!Pn){var t=on;queueMicrotask(()=>{t===on&&gr()})}on.push(e)}function Ns(){for(;on.length>0;)gr()}function mr(e){var t=Q;if(t===null)return G.f|=Qt,e;if((t.f&Na)===0){if((t.f&sa)===0)throw e;t.b.error(e)}else xn(e,t)}function xn(e,t){for(;t!==null;){if((t.f&sa)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Qn=new Set;let Y=null,Ln=null,pt=null,ft=[],ia=null,wa=!1,Pn=!1;class Mt{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#a=0;#n=0;#l=null;#s=new Set;#r=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){ft=[],Ln=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[]};for(const a of t)this.#i(a,n);this.is_fork||this.#u(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects)):(Ln=this,Y=null,Ja(n.render_effects),Ja(n.effects),Ln=null,this.#l?.resolve()),pt=null}#i(t,n){t.f^=De;for(var a=t.first;a!==null;){var s=a.f,r=(s&(jt|hn))!==0,o=r&&(s&De)!==0,c=o||(s&nt)!==0||this.skipped_effects.has(a);if((a.f&sa)!==0&&a.b?.is_pending()&&(n={parent:n,effect:a,effects:[],render_effects:[]}),!c&&a.fn!==null){r?a.f^=De:(s&Oa)!==0?n.effects.push(a):Gn(a)&&((a.f&Bt)!==0&&this.#s.add(a),Un(a));var l=a.first;if(l!==null){a=l;continue}}var v=a.parent;for(a=a.next;a===null&&v!==null;)v===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),n=n.parent),a=v.next,v=v.parent}}#o(t){for(const n of t)(n.f&Je)!==0?this.#s.add(n):(n.f&Dt)!==0&&this.#r.add(n),this.#c(n.deps),Oe(n,De)}#c(t){if(t!==null)for(const n of t)(n.f&xe)===0||(n.f&vn)===0||(n.f^=vn,this.#c(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&Qt)===0&&(this.current.set(t,t.v),pt?.set(t,t.v))}activate(){Y=this,this.apply()}deactivate(){Y===this&&(Y=null,pt=null)}flush(){if(this.activate(),ft.length>0){if(br(),Y!==null&&Y!==this)return}else this.#a===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#u(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#a===0&&this.#f()}#f(){if(Qn.size>1){this.previous.clear();var t=pt,n=!0,a={parent:null,effect:null,effects:[],render_effects:[]};for(const r of Qn){if(r===this){n=!1;continue}const o=[];for(const[l,v]of this.current){if(r.current.has(l))if(n&&v!==r.current.get(l))r.current.set(l,v);else continue;o.push(l)}if(o.length===0)continue;const c=[...r.current.keys()].filter(l=>!this.current.has(l));if(c.length>0){var s=ft;ft=[];const l=new Set,v=new Map;for(const p of o)yr(p,c,l,v);if(ft.length>0){Y=r,r.apply();for(const p of ft)r.#i(p,a);r.deactivate()}ft=s}}Y=null,pt=t}this.committed=!0,Qn.delete(this)}increment(t){this.#a+=1,t&&(this.#n+=1)}decrement(t){this.#a-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#s)this.#r.delete(t),Oe(t,Je),dn(t);for(const t of this.#r)Oe(t,Dt),dn(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=cr()).promise}static ensure(){if(Y===null){const t=Y=new Mt;Qn.add(Y),Pn||Mt.enqueue(()=>{Y===t&&t.flush()})}return Y}static enqueue(t){An(t)}apply(){}}function Ls(e){var t=Pn;Pn=!0;try{for(var n;;){if(Ns(),ft.length===0&&(Y?.flush(),ft.length===0))return ia=null,n;br()}}finally{Pn=t}}function br(){var e=cn;wa=!0;var t=null;try{var n=0;for(ta(!0);ft.length>0;){var a=Mt.ensure();if(n++>1e3){var s,r;Ps()}a.process(ft),en.clear()}}finally{wa=!1,ta(e),ia=null}}function Ps(){try{gs()}catch(e){xn(e,ia)}}let zt=null;function Ja(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var a=e[n++];if((a.f&(Zt|nt))===0&&Gn(a)&&(zt=new Set,Un(a),a.deps===null&&a.first===null&&a.nodes===null&&(a.teardown===null&&a.ac===null?Rr(a):a.fn=null),zt?.size>0)){en.clear();for(const s of zt){if((s.f&(Zt|nt))!==0)continue;const r=[s];let o=s.parent;for(;o!==null;)zt.has(o)&&(zt.delete(o),r.push(o)),o=o.parent;for(let c=r.length-1;c>=0;c--){const l=r[c];(l.f&(Zt|nt))===0&&Un(l)}}zt.clear()}}zt=null}}function yr(e,t,n,a){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const s of e.reactions){const r=s.f;(r&xe)!==0?yr(s,t,n,a):(r&(La|Bt))!==0&&(r&Je)===0&&wr(s,t,a)&&(Oe(s,Je),dn(s))}}function wr(e,t,n){const a=n.get(e);if(a!==void 0)return a;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if((s.f&xe)!==0&&wr(s,t,n))return n.set(s,!0),!0}return n.set(e,!1),!1}function dn(e){for(var t=ia=e;t.parent!==null;){t=t.parent;var n=t.f;if(wa&&t===Q&&(n&Bt)!==0&&(n&ur)===0)return;if((n&(hn|jt))!==0){if((n&De)===0)return;t.f^=De}}ft.push(t)}function Is(e){let t=0,n=pn(0),a;return()=>{zn()&&(i(n),Ia(()=>(t===0&&(a=rn(()=>e(()=>In(n)))),t+=1,()=>{An(()=>{t-=1,t===0&&(a?.(),a=void 0,In(n))})})))}}var Fs=yn|Sn|sa;function Rs(e,t,n){new zs(e,t,n)}class zs{parent;#e=!1;#t;#a=null;#n;#l;#s;#r=null;#i=null;#o=null;#c=null;#u=null;#f=0;#v=0;#p=!1;#d=null;#b=Is(()=>(this.#d=pn(this.#f),()=>{this.#d=null}));constructor(t,n,a){this.#t=t,this.#n=n,this.#l=a,this.parent=Q.b,this.#e=!!this.#n.pending,this.#s=Fa(()=>{Q.b=this;{var s=this.#g();try{this.#r=vt(()=>a(s))}catch(r){this.error(r)}this.#v>0?this.#h():this.#e=!1}return()=>{this.#u?.remove()}},Fs)}#y(){try{this.#r=vt(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#w(){const t=this.#n.pending;t&&(this.#i=vt(()=>t(this.#t)),Mt.enqueue(()=>{var n=this.#g();this.#r=this.#_(()=>(Mt.ensure(),vt(()=>this.#l(n)))),this.#v>0?this.#h():(ln(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#g(){var t=this.#t;return this.#e&&(this.#u=Ut(),this.#t.before(this.#u),t=this.#u),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#_(t){var n=Q,a=G,s=le;Ot(this.#s),je(this.#s),wn(this.#s.ctx);try{return t()}catch(r){return mr(r),null}finally{Ot(n),je(a),wn(s)}}#h(){const t=this.#n.pending;this.#r!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),Vr(this.#r,this.#c)),this.#i===null&&(this.#i=vt(()=>t(this.#t)))}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#v+=t,this.#v===0&&(this.#e=!1,this.#i&&ln(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#m(t),this.#f+=t,this.#d&&En(this.#d,this.#f)}get_effect_pending(){return this.#b(),i(this.#d)}error(t){var n=this.#n.onerror;let a=this.#n.failed;if(this.#p||!n&&!a)throw t;this.#r&&(We(this.#r),this.#r=null),this.#i&&(We(this.#i),this.#i=null),this.#o&&(We(this.#o),this.#o=null);var s=!1,r=!1;const o=()=>{if(s){$s();return}s=!0,r&&ws(),Mt.ensure(),this.#f=0,this.#o!==null&&ln(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#r=this.#_(()=>(this.#p=!1,vt(()=>this.#l(this.#t)))),this.#v>0?this.#h():this.#e=!1};var c=G;try{je(null),r=!0,n?.(t,o),r=!1}catch(l){xn(l,this.#s&&this.#s.parent)}finally{je(c)}a&&An(()=>{this.#o=this.#_(()=>{Mt.ensure(),this.#p=!0;try{return vt(()=>{a(this.#t,()=>t,()=>o)})}catch(l){return xn(l,this.#s.parent),null}finally{this.#p=!1}})})}}function qs(e,t,n,a){const s=Wn()?oa:xr;if(n.length===0&&e.length===0){a(t.map(s));return}var r=Y,o=Q,c=Vs();function l(){Promise.all(n.map(v=>Us(v))).then(v=>{c();try{a([...t.map(s),...v])}catch(p){(o.f&Zt)===0&&xn(p,o)}r?.deactivate(),ea()}).catch(v=>{xn(v,o)})}e.length>0?Promise.all(e).then(()=>{c();try{return l()}finally{r?.deactivate(),ea()}}):l()}function Vs(){var e=Q,t=G,n=le,a=Y;return function(r=!0){Ot(e),je(t),wn(n),r&&a?.activate()}}function ea(){Ot(null),je(null),wn(null)}function oa(e){var t=xe|Je,n=G!==null&&(G.f&xe)!==0?G:null;return Q!==null&&(Q.f|=Sn),{ctx:le,deps:null,effects:null,equals:pr,f:t,fn:e,reactions:null,rv:0,v:$e,wv:0,parent:n??Q,ac:null}}function Us(e,t){let n=Q;n===null&&ds();var a=n.b,s=void 0,r=pn($e),o=!G,c=new Map;return Qs(()=>{var l=cr();s=l.promise;try{Promise.resolve(e()).then(l.resolve,l.reject).then(()=>{v===Y&&v.committed&&v.deactivate(),ea()})}catch(_){l.reject(_),ea()}var v=Y;if(o){var p=!a.is_pending();a.update_pending_count(1),v.increment(p),c.get(v)?.reject(bn),c.delete(v),c.set(v,l)}const g=(_,h=void 0)=>{if(v.activate(),h)h!==bn&&(r.f|=Qt,En(r,h));else{(r.f&Qt)!==0&&(r.f^=Qt),En(r,_);for(const[C,N]of c){if(c.delete(C),C===v)break;N.reject(bn)}}o&&(a.update_pending_count(-1),v.decrement(p))};l.promise.then(g,_=>g(null,_||"unknown"))}),ca(()=>{for(const l of c.values())l.reject(bn)}),new Promise(l=>{function v(p){function g(){p===s?l(r):v(s)}p.then(g,g)}v(s)})}function Et(e){const t=oa(e);return Ur(t),t}function xr(e){const t=oa(e);return t.equals=hr,t}function Er(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)We(t[n])}}function Hs(e){for(var t=e.parent;t!==null;){if((t.f&xe)===0)return(t.f&Zt)===0?t:null;t=t.parent}return null}function Pa(e){var t,n=Q;Ot(Hs(e));try{e.f&=~vn,Er(e),t=Wr(e)}finally{Ot(n)}return t}function kr(e){var t=Pa(e);if(e.equals(t)||(Y?.is_fork||(e.v=t),e.wv=Br()),!Cn)if(pt!==null)(zn()||Y?.is_fork)&&pt.set(e,t);else{var n=(e.f&St)===0?Dt:De;Oe(e,n)}}let xa=new Set;const en=new Map;let Sr=!1;function pn(e,t){var n={f:0,v:e,reactions:null,equals:pr,rv:0,wv:0};return n}function z(e,t){const n=pn(e);return Ur(n),n}function Ar(e,t=!1,n=!0){const a=pn(e);return t||(a.equals=hr),jn&&n&&le!==null&&le.l!==null&&(le.l.s??=[]).push(a),a}function d(e,t,n=!1){G!==null&&(!$t||(G.f&Wa)!==0)&&Wn()&&(G.f&(xe|Bt|La|Wa))!==0&&!Ht?.includes(e)&&ys();let a=n?Kt(t):t;return En(e,a)}function En(e,t){if(!e.equals(t)){var n=e.v;Cn?en.set(e,t):en.set(e,n),e.v=t;var a=Mt.ensure();a.capture(e,n),(e.f&xe)!==0&&((e.f&Je)!==0&&Pa(e),Oe(e,(e.f&St)!==0?De:Dt)),e.wv=Br(),Cr(e,Je),Wn()&&Q!==null&&(Q.f&De)!==0&&(Q.f&(jt|hn))===0&&(ut===null?ti([e]):ut.push(e)),!a.is_fork&&xa.size>0&&!Sr&&Bs()}return t}function Bs(){Sr=!1;var e=cn;ta(!0);const t=Array.from(xa);try{for(const n of t)(n.f&De)!==0&&Oe(n,Dt),Gn(n)&&Un(n)}finally{ta(e)}xa.clear()}function In(e){d(e,e.v+1)}function Cr(e,t){var n=e.reactions;if(n!==null)for(var a=Wn(),s=n.length,r=0;r<s;r++){var o=n[r],c=o.f;if(!(!a&&o===Q)){var l=(c&Je)===0;if(l&&Oe(o,t),(c&xe)!==0){var v=o;pt?.delete(v),(c&vn)===0&&(c&St&&(o.f|=vn),Cr(v,Dt))}else l&&((c&Bt)!==0&&zt!==null&&zt.add(o),dn(o))}}}function Kt(e){if(typeof e!="object"||e===null||Xt in e)return e;const t=Da(e);if(t!==ls&&t!==cs)return e;var n=new Map,a=$a(e),s=z(0),r=un,o=c=>{if(un===r)return c();var l=G,v=un;je(null),Qa(r);var p=c();return je(l),Qa(v),p};return a&&n.set("length",z(e.length)),new Proxy(e,{defineProperty(c,l,v){(!("value"in v)||v.configurable===!1||v.enumerable===!1||v.writable===!1)&&ms();var p=n.get(l);return p===void 0?p=o(()=>{var g=z(v.value);return n.set(l,g),g}):d(p,v.value,!0),!0},deleteProperty(c,l){var v=n.get(l);if(v===void 0){if(l in c){const p=o(()=>z($e));n.set(l,p),In(s)}}else d(v,$e),In(s);return!0},get(c,l,v){if(l===Xt)return e;var p=n.get(l),g=l in c;if(p===void 0&&(!g||Nn(c,l)?.writable)&&(p=o(()=>{var h=Kt(g?c[l]:$e),C=z(h);return C}),n.set(l,p)),p!==void 0){var _=i(p);return _===$e?void 0:_}return Reflect.get(c,l,v)},getOwnPropertyDescriptor(c,l){var v=Reflect.getOwnPropertyDescriptor(c,l);if(v&&"value"in v){var p=n.get(l);p&&(v.value=i(p))}else if(v===void 0){var g=n.get(l),_=g?.v;if(g!==void 0&&_!==$e)return{enumerable:!0,configurable:!0,value:_,writable:!0}}return v},has(c,l){if(l===Xt)return!0;var v=n.get(l),p=v!==void 0&&v.v!==$e||Reflect.has(c,l);if(v!==void 0||Q!==null&&(!p||Nn(c,l)?.writable)){v===void 0&&(v=o(()=>{var _=p?Kt(c[l]):$e,h=z(_);return h}),n.set(l,v));var g=i(v);if(g===$e)return!1}return p},set(c,l,v,p){var g=n.get(l),_=l in c;if(a&&l==="length")for(var h=v;h<g.v;h+=1){var C=n.get(h+"");C!==void 0?d(C,$e):h in c&&(C=o(()=>z($e)),n.set(h+"",C))}if(g===void 0)(!_||Nn(c,l)?.writable)&&(g=o(()=>z(void 0)),d(g,Kt(v)),n.set(l,g));else{_=g.v!==$e;var N=o(()=>Kt(v));d(g,N)}var b=Reflect.getOwnPropertyDescriptor(c,l);if(b?.set&&b.set.call(p,v),!_){if(a&&typeof l=="string"){var M=n.get("length"),O=Number(l);Number.isInteger(O)&&O>=M.v&&d(M,O+1)}In(s)}return!0},ownKeys(c){i(s);var l=Reflect.ownKeys(c).filter(g=>{var _=n.get(g);return _===void 0||_.v!==$e});for(var[v,p]of n)p.v!==$e&&!(v in c)&&l.push(v);return l},setPrototypeOf(){bs()}})}function Ga(e){try{if(e!==null&&typeof e=="object"&&Xt in e)return e[Xt]}catch{}return e}function js(e,t){return Object.is(Ga(e),Ga(t))}var Ka,Tr,Mr,$r;function Ws(){if(Ka===void 0){Ka=window,Tr=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Mr=Nn(t,"firstChild").get,$r=Nn(t,"nextSibling").get,ja(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),ja(n)&&(n.__t=void 0)}}function Ut(e=""){return document.createTextNode(e)}function kn(e){return Mr.call(e)}function Jn(e){return $r.call(e)}function u(e,t){return kn(e)}function ue(e,t=!1){{var n=kn(e);return n instanceof Comment&&n.data===""?Jn(n):n}}function f(e,t=1,n=!1){let a=e;for(;t--;)a=Jn(a);return a}function Js(e){e.textContent=""}function Dr(){return!1}let Ya=!1;function Gs(){Ya||(Ya=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function la(e){var t=G,n=Q;je(null),Ot(null);try{return e()}finally{je(t),Ot(n)}}function Or(e,t,n,a=n){e.addEventListener(t,()=>la(n));const s=e.__on_r;s?e.__on_r=()=>{s(),a(!0)}:e.__on_r=()=>a(!0),Gs()}function Nr(e){Q===null&&(G===null&&hs(),_s()),Cn&&ps()}function Ks(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Nt(e,t,n){var a=Q;a!==null&&(a.f&nt)!==0&&(e|=nt);var s={ctx:le,deps:null,nodes:null,f:e|Je|St,first:null,fn:t,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{Un(s),s.f|=Na}catch(c){throw We(s),c}else t!==null&&dn(s);var r=s;if(n&&r.deps===null&&r.teardown===null&&r.nodes===null&&r.first===r.last&&(r.f&Sn)===0&&(r=r.first,(e&Bt)!==0&&(e&yn)!==0&&r!==null&&(r.f|=yn)),r!==null&&(r.parent=a,a!==null&&Ks(r,a),G!==null&&(G.f&xe)!==0&&(e&hn)===0)){var o=G;(o.effects??=[]).push(r)}return s}function zn(){return G!==null&&!$t}function ca(e){const t=Nt(ra,null,!1);return Oe(t,De),t.teardown=e,t}function qn(e){Nr();var t=Q.f,n=!G&&(t&jt)!==0&&(t&Na)===0;if(n){var a=le;(a.e??=[]).push(e)}else return Lr(e)}function Lr(e){return Nt(Oa|fr,e,!1)}function Ys(e){return Nr(),Nt(ra|fr,e,!0)}function Zs(e){Mt.ensure();const t=Nt(hn|Sn,e,!0);return(n={})=>new Promise(a=>{n.outro?ln(t,()=>{We(t),a(void 0)}):(We(t),a(void 0))})}function Pr(e){return Nt(Oa,e,!1)}function Qs(e){return Nt(La|Sn,e,!0)}function Ia(e,t=0){return Nt(ra|t,e,!0)}function J(e,t=[],n=[],a=[]){qs(a,t,n,s=>{Nt(ra,()=>e(...s.map(i)),!0)})}function Fa(e,t=0){var n=Nt(Bt|t,e,!0);return n}function vt(e){return Nt(jt|Sn,e,!0)}function Ir(e){var t=e.teardown;if(t!==null){const n=Cn,a=G;Za(!0),je(null);try{t.call(null)}finally{Za(n),je(a)}}}function Fr(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&la(()=>{s.abort(bn)});var a=n.next;(n.f&hn)!==0?n.parent=null:We(n,t),n=a}}function Xs(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&jt)===0&&We(t),t=n}}function We(e,t=!0){var n=!1;(t||(e.f&ur)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(ei(e.nodes.start,e.nodes.end),n=!0),Fr(e,t&&!n),na(e,0),Oe(e,Zt);var a=e.nodes&&e.nodes.t;if(a!==null)for(const r of a)r.stop();Ir(e);var s=e.parent;s!==null&&s.first!==null&&Rr(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function ei(e,t){for(;e!==null;){var n=e===t?null:Jn(e);e.remove(),e=n}}function Rr(e){var t=e.parent,n=e.prev,a=e.next;n!==null&&(n.next=a),a!==null&&(a.prev=n),t!==null&&(t.first===e&&(t.first=a),t.last===e&&(t.last=n))}function ln(e,t,n=!0){var a=[];zr(e,a,!0);var s=()=>{n&&We(e),t&&t()},r=a.length;if(r>0){var o=()=>--r||s();for(var c of a)c.out(o)}else s()}function zr(e,t,n){if((e.f&nt)===0){e.f^=nt;var a=e.nodes&&e.nodes.t;if(a!==null)for(const c of a)(c.is_global||n)&&t.push(c);for(var s=e.first;s!==null;){var r=s.next,o=(s.f&yn)!==0||(s.f&jt)!==0&&(e.f&Bt)!==0;zr(s,t,o?n:!1),s=r}}}function Ra(e){qr(e,!0)}function qr(e,t){if((e.f&nt)!==0){e.f^=nt,(e.f&De)===0&&(Oe(e,Je),dn(e));for(var n=e.first;n!==null;){var a=n.next,s=(n.f&yn)!==0||(n.f&jt)!==0;qr(n,s?t:!1),n=a}var r=e.nodes&&e.nodes.t;if(r!==null)for(const o of r)(o.is_global||t)&&o.in()}}function Vr(e,t){if(e.nodes)for(var n=e.nodes.start,a=e.nodes.end;n!==null;){var s=n===a?null:Jn(n);t.append(n),n=s}}let cn=!1;function ta(e){cn=e}let Cn=!1;function Za(e){Cn=e}let G=null,$t=!1;function je(e){G=e}let Q=null;function Ot(e){Q=e}let Ht=null;function Ur(e){G!==null&&(Ht===null?Ht=[e]:Ht.push(e))}let Fe=null,et=0,ut=null;function ti(e){ut=e}let Hr=1,Vn=0,un=Vn;function Qa(e){un=e}function Br(){return++Hr}function Gn(e){var t=e.f;if((t&Je)!==0)return!0;if(t&xe&&(e.f&=~vn),(t&Dt)!==0){var n=e.deps;if(n!==null)for(var a=n.length,s=0;s<a;s++){var r=n[s];if(Gn(r)&&kr(r),r.wv>e.wv)return!0}(t&St)!==0&&pt===null&&Oe(e,De)}return!1}function jr(e,t,n=!0){var a=e.reactions;if(a!==null&&!Ht?.includes(e))for(var s=0;s<a.length;s++){var r=a[s];(r.f&xe)!==0?jr(r,t,!1):t===r&&(n?Oe(r,Je):(r.f&De)!==0&&Oe(r,Dt),dn(r))}}function Wr(e){var t=Fe,n=et,a=ut,s=G,r=Ht,o=le,c=$t,l=un,v=e.f;Fe=null,et=0,ut=null,G=(v&(jt|hn))===0?e:null,Ht=null,wn(e.ctx),$t=!1,un=++Vn,e.ac!==null&&(la(()=>{e.ac.abort(bn)}),e.ac=null);try{e.f|=ya;var p=e.fn,g=p(),_=e.deps;if(Fe!==null){var h;if(na(e,et),_!==null&&et>0)for(_.length=et+Fe.length,h=0;h<Fe.length;h++)_[et+h]=Fe[h];else e.deps=_=Fe;if(zn()&&(e.f&St)!==0)for(h=et;h<_.length;h++)(_[h].reactions??=[]).push(e)}else _!==null&&et<_.length&&(na(e,et),_.length=et);if(Wn()&&ut!==null&&!$t&&_!==null&&(e.f&(xe|Dt|Je))===0)for(h=0;h<ut.length;h++)jr(ut[h],e);return s!==null&&s!==e&&(Vn++,ut!==null&&(a===null?a=ut:a.push(...ut))),(e.f&Qt)!==0&&(e.f^=Qt),g}catch(C){return mr(C)}finally{e.f^=ya,Fe=t,et=n,ut=a,G=s,Ht=r,wn(o),$t=c,un=l}}function ni(e,t){let n=t.reactions;if(n!==null){var a=os.call(n,e);if(a!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[a]=n[s],n.pop())}}n===null&&(t.f&xe)!==0&&(Fe===null||!Fe.includes(t))&&(Oe(t,Dt),(t.f&St)!==0&&(t.f^=St,t.f&=~vn),Er(t),na(t,0))}function na(e,t){var n=e.deps;if(n!==null)for(var a=t;a<n.length;a++)ni(e,n[a])}function Un(e){var t=e.f;if((t&Zt)===0){Oe(e,De);var n=Q,a=cn;Q=e,cn=!0;try{(t&(Bt|fs))!==0?Xs(e):Fr(e),Ir(e);var s=Wr(e);e.teardown=typeof s=="function"?s:null,e.wv=Hr;var r;ba&&Ds&&(e.f&Je)!==0&&e.deps}finally{cn=a,Q=n}}}async function ai(){await Promise.resolve(),Ls()}function i(e){var t=e.f,n=(t&xe)!==0;if(G!==null&&!$t){var a=Q!==null&&(Q.f&Zt)!==0;if(!a&&!Ht?.includes(e)){var s=G.deps;if((G.f&ya)!==0)e.rv<Vn&&(e.rv=Vn,Fe===null&&s!==null&&s[et]===e?et++:Fe===null?Fe=[e]:Fe.includes(e)||Fe.push(e));else{(G.deps??=[]).push(e);var r=e.reactions;r===null?e.reactions=[G]:r.includes(G)||r.push(G)}}}if(Cn){if(en.has(e))return en.get(e);if(n){var o=e,c=o.v;return((o.f&De)===0&&o.reactions!==null||Gr(o))&&(c=Pa(o)),en.set(o,c),c}}else n&&(!pt?.has(e)||Y?.is_fork&&!zn())&&(o=e,Gn(o)&&kr(o),cn&&zn()&&(o.f&St)===0&&Jr(o));if(pt?.has(e))return pt.get(e);if((e.f&Qt)!==0)throw e.v;return e.v}function Jr(e){if(e.deps!==null){e.f^=St;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&xe)!==0&&(t.f&St)===0&&Jr(t)}}function Gr(e){if(e.v===$e)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(en.has(t)||(t.f&xe)!==0&&Gr(t))return!0;return!1}function rn(e){var t=$t;try{return $t=!0,e()}finally{$t=t}}const ri=-7169;function Oe(e,t){e.f=e.f&ri|t}function si(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Xt in e)Ea(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Xt in n&&Ea(n)}}}function Ea(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let a in e)try{Ea(e[a],t)}catch{}const n=Da(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const a=lr(n);for(let s in a){const r=a[s].get;if(r)try{r.call(e)}catch{}}}}}const ii=["touchstart","touchmove"];function oi(e){return ii.includes(e)}const Kr=new Set,ka=new Set;function li(e,t,n,a={}){function s(r){if(a.capture||Dn.call(t,r),!r.cancelBubble)return la(()=>n?.call(this,r))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?An(()=>{t.addEventListener(e,s,a)}):t.addEventListener(e,s,a),s}function ha(e,t,n,a,s){var r={capture:a,passive:s},o=li(e,t,n,r);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&ca(()=>{t.removeEventListener(e,o,r)})}function Kn(e){for(var t=0;t<e.length;t++)Kr.add(e[t]);for(var n of ka)n(e)}let Xa=null;function Dn(e){var t=this,n=t.ownerDocument,a=e.type,s=e.composedPath?.()||[],r=s[0]||e.target;Xa=e;var o=0,c=Xa===e&&e.__root;if(c){var l=s.indexOf(c);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var v=s.indexOf(t);if(v===-1)return;l<=v&&(o=l)}if(r=s[o]||e.target,r!==t){or(e,"currentTarget",{configurable:!0,get(){return r||n}});var p=G,g=Q;je(null),Ot(null);try{for(var _,h=[];r!==null;){var C=r.assignedSlot||r.parentNode||r.host||null;try{var N=r["__"+a];N!=null&&(!r.disabled||e.target===r)&&N.call(r,e)}catch(b){_?h.push(b):_=b}if(e.cancelBubble||C===t||C===null)break;r=C}if(_){for(let b of h)queueMicrotask(()=>{throw b});throw _}}finally{e.__root=t,delete e.currentTarget,je(p),Ot(g)}}}function Yr(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Hn(e,t){var n=Q;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function S(e,t){var n=(t&As)!==0,a=(t&Cs)!==0,s,r=!e.startsWith("<!>");return()=>{s===void 0&&(s=Yr(r?e:"<!>"+e),n||(s=kn(s)));var o=a||Tr?document.importNode(s,!0):s.cloneNode(!0);if(n){var c=kn(o),l=o.lastChild;Hn(c,l)}else Hn(o,o);return o}}function ci(e,t,n="svg"){var a=!e.startsWith("<!>"),s=`<${n}>${a?e:"<!>"+e}</${n}>`,r;return()=>{if(!r){var o=Yr(s),c=kn(o);r=kn(c)}var l=r.cloneNode(!0);return Hn(l,l),l}}function ua(e,t){return ci(e,t,"svg")}function er(e=""){{var t=Ut(e+"");return Hn(t,t),t}}function tn(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Ut();return e.append(t,n),Hn(t,n),e}function x(e,t){e!==null&&e.before(t)}function k(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function ui(e,t){return fi(e,t)}const gn=new Map;function fi(e,{target:t,anchor:n,props:a={},events:s,context:r,intro:o=!0}){Ws();var c=new Set,l=g=>{for(var _=0;_<g.length;_++){var h=g[_];if(!c.has(h)){c.add(h);var C=oi(h);t.addEventListener(h,Dn,{passive:C});var N=gn.get(h);N===void 0?(document.addEventListener(h,Dn,{passive:C}),gn.set(h,1)):gn.set(h,N+1)}}};l(aa(Kr)),ka.add(l);var v=void 0,p=Zs(()=>{var g=n??t.appendChild(Ut());return Rs(g,{pending:()=>{}},_=>{if(r){nn({});var h=le;h.c=r}s&&(a.$$events=s),v=e(_,a)||{},r&&an()}),()=>{for(var _ of c){t.removeEventListener(_,Dn);var h=gn.get(_);--h===0?(document.removeEventListener(_,Dn),gn.delete(_)):gn.set(_,h)}ka.delete(l),g!==n&&g.parentNode?.removeChild(g)}});return vi.set(v,p),v}let vi=new WeakMap;class di{anchor;#e=new Map;#t=new Map;#a=new Map;#n=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#s=()=>{var t=Y;if(this.#e.has(t)){var n=this.#e.get(t),a=this.#t.get(n);if(a)Ra(a),this.#n.delete(n);else{var s=this.#a.get(n);s&&(this.#t.set(n,s.effect),this.#a.delete(n),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),a=s.effect)}for(const[r,o]of this.#e){if(this.#e.delete(r),r===t)break;const c=this.#a.get(o);c&&(We(c.effect),this.#a.delete(o))}for(const[r,o]of this.#t){if(r===n||this.#n.has(r))continue;const c=()=>{if(Array.from(this.#e.values()).includes(r)){var v=document.createDocumentFragment();Vr(o,v),v.append(Ut()),this.#a.set(r,{effect:o,fragment:v})}else We(o);this.#n.delete(r),this.#t.delete(r)};this.#l||!a?(this.#n.add(r),ln(o,c,!1)):c()}}};#r=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[a,s]of this.#a)n.includes(a)||(We(s.effect),this.#a.delete(a))};ensure(t,n){var a=Y,s=Dr();if(n&&!this.#t.has(t)&&!this.#a.has(t))if(s){var r=document.createDocumentFragment(),o=Ut();r.append(o),this.#a.set(t,{effect:vt(()=>n(o)),fragment:r})}else this.#t.set(t,vt(()=>n(this.anchor)));if(this.#e.set(a,t),s){for(const[c,l]of this.#t)c===t?a.skipped_effects.delete(l):a.skipped_effects.add(l);for(const[c,l]of this.#a)c===t?a.skipped_effects.delete(l.effect):a.skipped_effects.add(l.effect);a.oncommit(this.#s),a.ondiscard(this.#r)}else this.#s()}}function H(e,t,n=!1){var a=new di(e),s=n?yn:0;function r(o,c){a.ensure(o,c)}Fa(()=>{var o=!1;t((c,l=!0)=>{o=!0,r(l,c)}),o||r(!1,null)},s)}function qt(e,t){return t}function pi(e,t,n){for(var a=[],s=t.length,r,o=t.length,c=0;c<s;c++){let g=t[c];ln(g,()=>{if(r){if(r.pending.delete(g),r.done.add(g),r.pending.size===0){var _=e.outrogroups;Sa(aa(r.done)),_.delete(r),_.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var l=a.length===0&&n!==null;if(l){var v=n,p=v.parentNode;Js(p),p.append(v),e.items.clear()}Sa(t,!l)}else r={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(r)}function Sa(e,t=!0){for(var n=0;n<e.length;n++)We(e[n],t)}var tr;function dt(e,t,n,a,s,r=null){var o=e,c=new Map,l=(t&dr)!==0;if(l){var v=e;o=v.appendChild(Ut())}var p=null,g=xr(()=>{var M=n();return $a(M)?M:M==null?[]:aa(M)}),_,h=!0;function C(){b.fallback=p,_i(b,_,o,t,a),p!==null&&(_.length===0?(p.f&Vt)===0?Ra(p):(p.f^=Vt,On(p,null,o)):ln(p,()=>{p=null}))}var N=Fa(()=>{_=i(g);for(var M=_.length,O=new Set,P=Y,F=Dr(),B=0;B<M;B+=1){var j=_[B],I=a(j,B),w=h?null:c.get(I);w?(w.v&&En(w.v,j),w.i&&En(w.i,B),F&&P.skipped_effects.delete(w.e)):(w=hi(c,h?o:tr??=Ut(),j,I,B,s,t,n),h||(w.e.f|=Vt),c.set(I,w)),O.add(I)}if(M===0&&r&&!p&&(h?p=vt(()=>r(o)):(p=vt(()=>r(tr??=Ut())),p.f|=Vt)),!h)if(F){for(const[A,$]of c)O.has(A)||P.skipped_effects.add($.e);P.oncommit(C),P.ondiscard(()=>{})}else C();i(g)}),b={effect:N,items:c,outrogroups:null,fallback:p};h=!1}function _i(e,t,n,a,s){var r=(a&ks)!==0,o=t.length,c=e.items,l=e.effect.first,v,p=null,g,_=[],h=[],C,N,b,M;if(r)for(M=0;M<o;M+=1)C=t[M],N=s(C,M),b=c.get(N).e,(b.f&Vt)===0&&(b.nodes?.a?.measure(),(g??=new Set).add(b));for(M=0;M<o;M+=1){if(C=t[M],N=s(C,M),b=c.get(N).e,e.outrogroups!==null)for(const $ of e.outrogroups)$.pending.delete(b),$.done.delete(b);if((b.f&Vt)!==0)if(b.f^=Vt,b===l)On(b,null,n);else{var O=p?p.next:l;b===e.effect.last&&(e.effect.last=b.prev),b.prev&&(b.prev.next=b.next),b.next&&(b.next.prev=b.prev),Gt(e,p,b),Gt(e,b,O),On(b,O,n),p=b,_=[],h=[],l=p.next;continue}if((b.f&nt)!==0&&(Ra(b),r&&(b.nodes?.a?.unfix(),(g??=new Set).delete(b))),b!==l){if(v!==void 0&&v.has(b)){if(_.length<h.length){var P=h[0],F;p=P.prev;var B=_[0],j=_[_.length-1];for(F=0;F<_.length;F+=1)On(_[F],P,n);for(F=0;F<h.length;F+=1)v.delete(h[F]);Gt(e,B.prev,j.next),Gt(e,p,B),Gt(e,j,P),l=P,p=j,M-=1,_=[],h=[]}else v.delete(b),On(b,l,n),Gt(e,b.prev,b.next),Gt(e,b,p===null?e.effect.first:p.next),Gt(e,p,b),p=b;continue}for(_=[],h=[];l!==null&&l!==b;)(v??=new Set).add(l),h.push(l),l=l.next;if(l===null)continue}(b.f&Vt)===0&&_.push(b),p=b,l=b.next}if(e.outrogroups!==null){for(const $ of e.outrogroups)$.pending.size===0&&(Sa(aa($.done)),e.outrogroups?.delete($));e.outrogroups.size===0&&(e.outrogroups=null)}if(l!==null||v!==void 0){var I=[];if(v!==void 0)for(b of v)(b.f&nt)===0&&I.push(b);for(;l!==null;)(l.f&nt)===0&&l!==e.fallback&&I.push(l),l=l.next;var w=I.length;if(w>0){var A=(a&dr)!==0&&o===0?n:null;if(r){for(M=0;M<w;M+=1)I[M].nodes?.a?.measure();for(M=0;M<w;M+=1)I[M].nodes?.a?.fix()}pi(e,I,A)}}r&&An(()=>{if(g!==void 0)for(b of g)b.nodes?.a?.apply()})}function hi(e,t,n,a,s,r,o,c){var l=(o&xs)!==0?(o&Ss)===0?Ar(n,!1,!1):pn(n):null,v=(o&Es)!==0?pn(s):null;return{v:l,i:v,e:vt(()=>(r(t,l??n,v??s,c),()=>{e.delete(a)}))}}function On(e,t,n){if(e.nodes)for(var a=e.nodes.start,s=e.nodes.end,r=t&&(t.f&Vt)===0?t.nodes.start:n;a!==null;){var o=Jn(a);if(r.before(a),a===s)return;a=o}}function Gt(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}const nr=[...` 	
\r\f \v\uFEFF`];function gi(e,t,n){var a=e==null?"":""+e;if(t&&(a=a?a+" "+t:t),n){for(var s in n)if(n[s])a=a?a+" "+s:s;else if(a.length)for(var r=s.length,o=0;(o=a.indexOf(s,o))>=0;){var c=o+r;(o===0||nr.includes(a[o-1]))&&(c===a.length||nr.includes(a[c]))?a=(o===0?"":a.substring(0,o))+a.substring(c+1):o=c}}return a===""?null:a}function we(e,t,n,a,s,r){var o=e.__className;if(o!==n||o===void 0){var c=gi(n,a,r);c==null?e.removeAttribute("class"):e.className=c,e.__className=n}else if(r&&s!==r)for(var l in r){var v=!!r[l];(s==null||v!==!!s[l])&&e.classList.toggle(l,v)}return r}function Zr(e,t,n=!1){if(e.multiple){if(t==null)return;if(!$a(t))return Ms();for(var a of e.options)a.selected=t.includes(Fn(a));return}for(a of e.options){var s=Fn(a);if(js(s,t)){a.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function mi(e){var t=new MutationObserver(()=>{Zr(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ca(()=>{t.disconnect()})}function tt(e,t,n=t){var a=new WeakSet,s=!0;Or(e,"change",r=>{var o=r?"[selected]":":checked",c;if(e.multiple)c=[].map.call(e.querySelectorAll(o),Fn);else{var l=e.querySelector(o)??e.querySelector("option:not([disabled])");c=l&&Fn(l)}n(c),Y!==null&&a.add(Y)}),Pr(()=>{var r=t();if(e===document.activeElement){var o=Ln??Y;if(a.has(o))return}if(Zr(e,r,s),s&&r===void 0){var c=e.querySelector(":checked");c!==null&&(r=Fn(c),n(r))}e.__value=r,s=!1}),mi(e)}function Fn(e){return"__value"in e?e.__value:e.value}const bi=Symbol("is custom element"),yi=Symbol("is html");function wi(e,t){var n=Qr(e);n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function _n(e,t,n,a){var s=Qr(e);s[t]!==(s[t]=n)&&(t==="loading"&&(e[vs]=n),n==null?e.removeAttribute(t):typeof n!="string"&&xi(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Qr(e){return e.__attributes??={[bi]:e.nodeName.includes("-"),[yi]:e.namespaceURI===Ts}}var ar=new Map;function xi(e){var t=e.getAttribute("is")||e.nodeName,n=ar.get(t);if(n)return n;ar.set(t,n=[]);for(var a,s=e,r=Element.prototype;r!==s;){a=lr(s);for(var o in a)a[o].set&&n.push(o);s=Da(s)}return n}function xt(e,t,n=t){var a=new WeakSet;Or(e,"input",async s=>{var r=s?e.defaultValue:e.value;if(r=ga(e)?ma(r):r,n(r),Y!==null&&a.add(Y),await ai(),r!==(r=t())){var o=e.selectionStart,c=e.selectionEnd,l=e.value.length;if(e.value=r??"",c!==null){var v=e.value.length;o===c&&c===l&&v>l?(e.selectionStart=v,e.selectionEnd=v):(e.selectionStart=o,e.selectionEnd=Math.min(c,v))}}}),rn(t)==null&&e.value&&(n(ga(e)?ma(e.value):e.value),Y!==null&&a.add(Y)),Ia(()=>{var s=t();if(e===document.activeElement){var r=Ln??Y;if(a.has(r))return}ga(e)&&s===ma(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function ga(e){var t=e.type;return t==="number"||t==="range"}function ma(e){return e===""?null:+e}function rr(e,t){return e===t||e?.[Xt]===t}function Ei(e={},t,n,a){return Pr(()=>{var s,r;return Ia(()=>{s=r,r=[],rn(()=>{e!==n(...r)&&(t(e,...r),s&&rr(n(...s),e)&&t(null,...s))})}),()=>{An(()=>{r&&rr(n(...r),e)&&t(null,...r)})}}),e}function Xr(e=!1){const t=le,n=t.l.u;if(!n)return;let a=()=>si(t.s);if(e){let s=0,r={};const o=oa(()=>{let c=!1;const l=t.s;for(const v in l)l[v]!==r[v]&&(r[v]=l[v],c=!0);return c&&s++,s});a=()=>i(o)}n.b.length&&Ys(()=>{sr(t,a),Xn(n.b)}),qn(()=>{const s=rn(()=>n.m.map(us));return()=>{for(const r of s)typeof r=="function"&&r()}}),n.a.length&&qn(()=>{sr(t,a),Xn(n.a)})}function sr(e,t){if(e.l.s)for(const n of e.l.s)i(n);t()}function za(e,t,n){if(e==null)return t(void 0),n&&n(void 0),Yt;const a=rn(()=>e.subscribe(t,n));return a.unsubscribe?()=>a.unsubscribe():a}const mn=[];function ki(e,t){return{subscribe:at(e,t).subscribe}}function at(e,t=Yt){let n=null;const a=new Set;function s(c){if(_r(e,c)&&(e=c,n)){const l=!mn.length;for(const v of a)v[1](),mn.push(v,e);if(l){for(let v=0;v<mn.length;v+=2)mn[v][0](mn[v+1]);mn.length=0}}}function r(c){s(c(e))}function o(c,l=Yt){const v=[c,l];return a.add(v),a.size===1&&(n=t(s,r)||Yt),c(e),()=>{a.delete(v),a.size===0&&n&&(n(),n=null)}}return{set:s,update:r,subscribe:o}}function fa(e,t,n){const a=!Array.isArray(e),s=a?[e]:e;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=t.length<2;return ki(n,(o,c)=>{let l=!1;const v=[];let p=0,g=Yt;const _=()=>{if(p)return;g();const C=t(a?v[0]:v,o,c);r?o(C):g=typeof C=="function"?C:Yt},h=s.map((C,N)=>za(C,b=>{v[N]=b,p&=~(1<<N),l&&_()},()=>{p|=1<<N}));return l=!0,_(),function(){Xn(h),g(),l=!1}})}function Si(e){let t;return za(e,n=>t=n)(),t}let Aa=Symbol();function ee(e,t,n){const a=n[t]??={store:null,source:Ar(void 0),unsubscribe:Yt};if(a.store!==e&&!(Aa in n))if(a.unsubscribe(),a.store=e??null,e==null)a.source.v=void 0,a.unsubscribe=Yt;else{var s=!0;a.unsubscribe=za(e,r=>{s?a.source.v=r:d(a.source,r)}),s=!1}return e&&Aa in n?Si(e):i(a.source)}function Tn(){const e={};function t(){ca(()=>{for(var n in e)e[n].unsubscribe();or(e,Aa,{enumerable:!1,value:!0})})}return[e,t]}function Ai(e,t,n,a){var s=a,r=!0,o=()=>(r&&(r=!1,s=a),s),c;c=e[t],c===void 0&&a!==void 0&&(c=o());var l;return l=()=>{var v=e[t];return v===void 0?o():(r=!0,v)},l}function es(e){le===null&&vr(),jn&&le.l!==null?Ti(le).m.push(e):qn(()=>{const t=rn(e);if(typeof t=="function")return t})}function Ci(e){le===null&&vr(),es(()=>()=>rn(e))}function Ti(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const Mi="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Mi);Os();const Bn=at(!1);class $i{url;ws=null;handlers=new Map;reconnectDelay=1e3;maxReconnectDelay=3e4;constructor(){{const t=window.location.protocol==="https:"?"wss:":"ws:";this.url=`${t}//${window.location.host}/ws`}}connect(){console.log("[WS] Connecting to:",this.url),this.ws=new WebSocket(this.url),this.ws.onopen=()=>{console.log("[WS] Connected"),this.reconnectDelay=1e3,Bn.set(!0)},this.ws.onmessage=t=>{try{const n=JSON.parse(t.data);console.log("[WS] Message:",n.type),this.dispatch(n.type,n)}catch(n){console.error("[WS] Failed to parse message:",n)}},this.ws.onclose=()=>{console.log("[WS] Closed, reconnecting in",this.reconnectDelay,"ms"),Bn.set(!1),setTimeout(()=>this.connect(),this.reconnectDelay),this.reconnectDelay=Math.min(this.reconnectDelay*2,this.maxReconnectDelay)},this.ws.onerror=t=>{console.error("[WS] Error:",t)}}on(t,n){return this.handlers.has(t)||this.handlers.set(t,[]),this.handlers.get(t).push(n),()=>this.off(t,n)}off(t,n){const a=this.handlers.get(t);if(a){const s=a.indexOf(n);s!==-1&&a.splice(s,1)}}dispatch(t,n){(this.handlers.get(t)||[]).forEach(s=>{try{s(n)}catch(r){console.error("[WS] Handler error:",r)}})}send(t){this.ws?.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify(t))}}const Rt=new $i;class Di{baseUrl;constructor(t){this.baseUrl=t??""}async request(t,n,a){const s={method:t,headers:{"Content-Type":"application/json"}};a&&(s.body=JSON.stringify(a));const o=await(await fetch(`${this.baseUrl}${n}`,s)).json();if(!o.success)throw new Error(o.error||"Unknown error");return o.data}getSystemInfo(){return this.request("GET","/api/v1/system/info")}getNetworkStatus(){return this.request("GET","/api/v1/network/status")}permitJoin(t=60){return this.request("POST","/api/v1/network/permit-join",{duration:t})}getDevices(){return this.request("GET","/api/v1/devices")}getDevice(t){return this.request("GET",`/api/v1/devices/${t}`)}updateDevice(t,n,a){return this.request("PUT",`/api/v1/devices/${t}`,{friendly_name:n||null,category:a||null})}turnOn(t,n){return this.request("POST",`/api/v1/devices/${t}/endpoints/${n}/on`)}turnOff(t,n){return this.request("POST",`/api/v1/devices/${t}/endpoints/${n}/off`)}toggle(t,n){return this.request("POST",`/api/v1/devices/${t}/endpoints/${n}/toggle`)}getCameras(){return this.request("GET","/api/v1/cameras")}addCamera(t,n,a,s,r){const o={name:t,stream_url:n,stream_type:a};return s&&(o.username=s),r&&(o.password=r),this.request("POST","/api/v1/cameras",o)}updateCamera(t,n,a,s,r,o){const c={};return n!==void 0&&(c.name=n),a!==void 0&&(c.stream_url=a),s!==void 0&&(c.stream_type=s),r!==void 0&&(c.username=r),o!==void 0&&(c.password=o),this.request("PUT",`/api/v1/cameras/${t}`,c)}deleteCamera(t){return this.request("DELETE",`/api/v1/cameras/${t}`)}getCameraStreamUrl(t){return`${this.baseUrl}/api/v1/cameras/${t}/stream`}getAutomations(){return this.request("GET","/api/v1/automations")}getAutomation(t){return this.request("GET",`/api/v1/automations/${t}`)}createAutomation(t){return this.request("POST","/api/v1/automations",t)}updateAutomation(t,n){return this.request("PUT",`/api/v1/automations/${t}`,n)}deleteAutomation(t){return this.request("DELETE",`/api/v1/automations/${t}`)}triggerAutomation(t){return this.request("POST",`/api/v1/automations/${t}/trigger`)}enableAutomation(t){return this.request("POST",`/api/v1/automations/${t}/enable`)}disableAutomation(t){return this.request("POST",`/api/v1/automations/${t}/disable`)}}const pe=new Di;function qa(e,t){const n=typeof localStorage<"u"?localStorage.getItem(e):null,a=n!==null?JSON.parse(n):t,s=at(a);return s.subscribe(r=>{typeof localStorage<"u"&&localStorage.setItem(e,JSON.stringify(r))}),s}const Yn=at([]),ts=at([]),va=at([]),Va=at(null),da=at(null),Oi=qa("casita:topPaneView","devices"),Ni=qa("casita:bottomPaneView","cameras"),Li=qa("casita:bottomPaneCollapsed",!1),Ca=at(!1),Ta=at(0),_t=at({devices:!1,cameras:!1,automations:!1,network:!1}),Mn=at(null),Pi=at(!0),Ua=fa([da,Va,Bn,Pi],([e,t,n,a])=>{const s=a?{state:"online",detail:e?`v${e.version}`:"responding"}:{state:"offline",detail:"not reachable"},r=e?.firmware&&e.firmware!=="Unknown",o=r?{state:"online",detail:`fw:${e.firmware}`}:{state:"offline",detail:"not detected"};let c;return r?t?.connected?c={state:"online",detail:`ch:${t.channel} ${t.device_count} devices`}:c={state:"degraded",detail:"not joined"}:c={state:"offline",detail:"no coordinator"},{backend:s,coordinator:o,zigbee:c,websocket:n?{state:"online",detail:"connected"}:{state:"offline",detail:"reconnecting..."}}}),ns=fa(Ua,e=>{const t=[e.backend.state,e.coordinator.state,e.zigbee.state,e.websocket.state];return t.every(n=>n==="online")?"online":t.some(n=>n==="offline")||t.some(n=>n==="degraded")?"degraded":"unknown"}),as=fa(Yn,e=>e.length),Ii=fa(va,e=>e.filter(t=>t.enabled).length);function kt(e){return Array.isArray(e)?e.slice().reverse().map(t=>t.toString(16).padStart(2,"0")).join(":"):String(e)}function Ma(e,t){Yn.update(n=>n.map(a=>kt(a.ieee_address)===e?{...a,state_on:t}:a))}async function fn(){_t.update(e=>({...e,devices:!0}));try{const e=await pe.getDevices();Yn.set(e)}catch(e){Mn.set(`Failed to load devices: ${e}`)}finally{_t.update(e=>({...e,devices:!1}))}}async function Rn(){_t.update(e=>({...e,cameras:!0}));try{const e=await pe.getCameras();ts.set(e)}catch(e){Mn.set(`Failed to load cameras: ${e}`)}finally{_t.update(e=>({...e,cameras:!1}))}}async function Tt(){_t.update(e=>({...e,automations:!0}));try{const e=await pe.getAutomations();va.set(e)}catch(e){Mn.set(`Failed to load automations: ${e}`)}finally{_t.update(e=>({...e,automations:!1}))}}async function pa(){_t.update(e=>({...e,network:!0}));try{const e=await pe.getNetworkStatus();Va.set(e)}catch(e){Mn.set(`Failed to load network status: ${e}`)}finally{_t.update(e=>({...e,network:!1}))}}async function rs(){try{const e=await pe.getSystemInfo();da.set(e)}catch(e){Mn.set(`Failed to load system info: ${e}`)}}async function Fi(){await Promise.all([fn(),Rn(),Tt(),pa(),rs()])}let $n=null;async function Ri(e=60){try{await pe.permitJoin(e),Ca.set(!0),Ta.set(e),$n&&clearInterval($n),$n=setInterval(()=>{Ta.update(t=>t<=1?(clearInterval($n),$n=null,Ca.set(!1),0):t-1)},1e3)}catch(t){Mn.set(`Failed to permit join: ${t}`)}}var zi=S('<div class="empty-state">No devices found. Click "Permit Join" to pair new devices.</div>'),qi=S("<span> </span>"),Vi=S('<button class="btn btn-sm"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M7.5 1v7h1V1h-1z"></path><path d="M3 8.812a4.999 4.999 0 0 1 2.578-4.375l-.485-.874A6 6 0 1 0 11 3.616l-.501.865A5 5 0 1 1 3 8.812z"></path></svg></button>'),Ui=S('<div class="device-row svelte-1cs4wva"><span class="device-name mono svelte-1cs4wva"> </span> <span class="device-tags svelte-1cs4wva"><span> </span> <span class="tag"> </span> <!></span> <span class="device-meta mono text-xs muted svelte-1cs4wva"> </span> <span class="device-actions svelte-1cs4wva"><!> <button class="btn btn-sm" title="Edit"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"></path></svg></button></span></div>'),Hi=S('<div class="device-list svelte-1cs4wva"></div>'),Bi=S("<option> </option>"),ji=S('<div class="modal-backdrop"><div class="modal"><div class="modal-header"><span class="modal-title">Edit Device</span> <button class="btn btn-sm">×</button></div> <div class="modal-body"><div class="info-panel mb-md"><div class="info-row"><span class="info-label">IEEE</span> <span class="info-value"> </span></div> <div class="info-row"><span class="info-label">Model</span> <span class="info-value"> </span></div> <div class="info-row"><span class="info-label">Manufacturer</span> <span class="info-value"> </span></div></div> <div class="form-group"><label class="form-label" for="edit-name">Friendly Name</label> <input id="edit-name" class="form-input" type="text" placeholder="e.g., Living Room Light"/></div> <div class="form-group"><label class="form-label" for="edit-category">Category</label> <select id="edit-category" class="form-select"></select></div></div> <div class="modal-footer"><button class="btn">Cancel</button> <button class="btn btn-primary">Save</button></div></div></div>'),Wi=S('<div class="toolbar"><button class="btn btn-sm"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"></path></svg> </button> <div class="toolbar-spacer"></div> <span class="text-sm muted"> </span> <button class="btn btn-sm" title="Refresh"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"></path><path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"></path></svg></button></div> <!> <!>',1);function Ji(e,t){nn(t,!0);const n=()=>ee(Ca,"$permitJoinActive",o),a=()=>ee(Ta,"$permitJoinRemaining",o),s=()=>ee(Yn,"$devices",o),r=()=>ee(_t,"$loading",o),[o,c]=Tn();let l=z(null),v=z(""),p=z("other");const g=["light","outlet","switch","sensor","lock","thermostat","fan","blinds","other"];function _(D){return{light:"tag-yellow",outlet:"tag-blue",switch:"tag-purple",sensor:"tag-green",lock:"tag-red",thermostat:"tag-blue",fan:"tag-purple",blinds:"tag-yellow",other:""}[D]||""}async function h(D,q){const L=kt(D.ieee_address),W=D.state_on;Ma(L,!W);try{await pe.toggle(L,q)}catch(fe){Ma(L,W??!1),console.error("Toggle failed:",fe)}}function C(D){d(l,D,!0),d(v,D.friendly_name||"",!0),d(p,D.category||"other",!0)}async function N(){if(!i(l))return;const D=kt(i(l).ieee_address);try{await pe.updateDevice(D,i(v)||void 0,i(p)),d(l,null),fn()}catch(q){console.error("Failed to update device:",q)}}const b=["light","outlet","lock","thermostat","fan","blinds"],M=["switch","sensor"];function O(D){const q=D.category||"other";return M.includes(q)?!1:b.includes(q)?!0:D.endpoints.some(L=>L.in_clusters.includes(6)||L.in_clusters.includes(8))}function P(D){const q=D.endpoints.filter(L=>L.in_clusters.includes(6)||L.in_clusters.includes(8)).map(L=>L.id);return q.length===0&&O(D)?[1]:q}var F=Wi(),B=ue(F),j=u(B);j.__click=()=>Ri(60);var I=f(u(j)),w=f(j,4),A=u(w),$=f(w,2);$.__click=()=>fn();var te=f(B,2);{var ne=D=>{var q=zi();x(D,q)},ce=D=>{var q=Hi();dt(q,5,s,L=>kt(L.ieee_address),(L,W)=>{const fe=Et(()=>kt(i(W).ieee_address)),Ee=Et(()=>i(W).friendly_name||i(W).model||i(fe)),Ne=Et(()=>P(i(W)));var Re=Ui(),Le=u(Re),ke=u(Le),ze=f(Le,2),_e=u(ze),Pe=u(_e),Ge=f(_e,2),qe=u(Ge),me=f(Ge,2);{var ht=m=>{var E=qi();let y;var V=u(E);J(()=>{y=we(E,1,"tag",null,y,{"tag-green":i(W).state_on,"tag-red":!i(W).state_on}),k(V,i(W).state_on?"ON":"OFF")}),x(m,E)};H(me,m=>{i(W).state_on!==void 0&&O(i(W))&&m(ht)})}var Ke=f(ze,2),Ye=u(Ke),rt=f(Ke,2),Ze=u(rt);dt(Ze,17,()=>i(Ne),qt,(m,E)=>{var y=Vi();y.__click=()=>h(i(W),i(E)),J(()=>_n(y,"title",i(Ne).length>1?`Toggle EP${i(E)}`:"Toggle")),x(m,y)});var st=f(Ze,2);st.__click=()=>C(i(W)),J(m=>{k(ke,i(Ee)),we(_e,1,`tag ${m??""}`,"svelte-1cs4wva"),k(Pe,i(W).category||"other"),k(qe,i(W).device_type),k(Ye,i(fe))},[()=>_(i(W).category||"other")]),x(L,Re)}),x(D,q)};H(te,D=>{s().length===0?D(ne):D(ce,!1)})}var de=f(te,2);{var T=D=>{const q=Et(()=>kt(i(l).ieee_address));var L=ji();L.__click=()=>d(l,null);var W=u(L);W.__click=y=>y.stopPropagation();var fe=u(W),Ee=f(u(fe),2);Ee.__click=()=>d(l,null);var Ne=f(fe,2),Re=u(Ne),Le=u(Re),ke=f(u(Le),2),ze=u(ke),_e=f(Le,2),Pe=f(u(_e),2),Ge=u(Pe),qe=f(_e,2),me=f(u(qe),2),ht=u(me),Ke=f(Re,2),Ye=f(u(Ke),2),rt=f(Ke,2),Ze=f(u(rt),2);dt(Ze,21,()=>g,qt,(y,V)=>{var ae=Bi(),Ve=u(ae),Ue={};J(()=>{k(Ve,i(V)),Ue!==(Ue=i(V))&&(ae.value=(ae.__value=i(V))??"")}),x(y,ae)});var st=f(Ne,2),m=u(st);m.__click=()=>d(l,null);var E=f(m,2);E.__click=N,J(()=>{k(ze,i(q)),k(Ge,i(l).model||"Unknown"),k(ht,i(l).manufacturer||"Unknown")}),xt(Ye,()=>i(v),y=>d(v,y)),tt(Ze,()=>i(p),y=>d(p,y)),x(D,L)};H(de,D=>{i(l)&&D(T)})}J(()=>{j.disabled=n(),k(I,` ${n()?`Joining (${a()}s)`:"Pair"}`),k(A,`${s().length??""} device(s)`),$.disabled=r().devices}),x(e,F),an(),c()}Kn(["click"]);var Gi=S('<div class="empty-state">No automations configured.<br/> <span class="text-xs">Use "Link Devices" to connect a button to control another device.</span></div>'),Ki=S('<span class="interaction-flow svelte-2b6lb5"><span class="mono"> </span> <span class="flow-arrow svelte-2b6lb5">→</span> <span class="mono"> </span></span>'),Yi=S('<span class="mono"> </span>'),Zi=S('<span class="tag tag-blue">link</span>'),Qi=S('<div><span class="automation-name svelte-2b6lb5"><!></span> <span class="automation-tags svelte-2b6lb5"><span> </span> <!></span> <span class="automation-trigger mono text-xs muted svelte-2b6lb5"><!></span> <span class="automation-actions svelte-2b6lb5"><button class="btn btn-sm"> </button> <button class="btn btn-sm" title="Run now"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"></path></svg></button> <button class="btn btn-sm" title="Edit"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"></path></svg></button> <button class="btn btn-sm btn-danger" title="Delete"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"></path><path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"></path></svg></button></span></div>'),Xi=S('<div class="automation-list svelte-2b6lb5"></div>'),eo=S("<option> </option>"),to=S("<option> </option>"),no=S('<div class="link-preview svelte-2b6lb5"><span class="mono"> </span> <span class="flow-arrow svelte-2b6lb5">→</span> <span class="mono"> </span></div>'),ao=S('<div class="modal-backdrop" role="button" tabindex="-1"><div class="modal" role="dialog"><div class="modal-header"><span class="modal-title">Link Devices</span> <button class="btn btn-sm">×</button></div> <div class="modal-body"><p class="text-sm muted mb-md">Create a simple interaction: when one device triggers, control another.</p> <div class="link-builder svelte-2b6lb5"><div class="link-row svelte-2b6lb5"><span class="link-label svelte-2b6lb5">When</span> <select class="form-select svelte-2b6lb5"><option>Select source device...</option><!></select></div> <div class="link-row svelte-2b6lb5"><span class="link-label svelte-2b6lb5">is</span> <select class="form-select svelte-2b6lb5"><option>toggled</option><option>turned on</option><option>turned off</option></select></div> <div class="link-row svelte-2b6lb5"><span class="link-label svelte-2b6lb5">then</span> <select class="form-select svelte-2b6lb5"><option>toggle</option><option>turn on</option><option>turn off</option></select></div> <div class="link-row svelte-2b6lb5"><span class="link-label svelte-2b6lb5"></span> <select class="form-select svelte-2b6lb5"><option>Select target device...</option><!></select></div></div> <!></div> <div class="modal-footer"><button class="btn">Cancel</button> <button class="btn btn-primary">Create Link</button></div></div></div>'),ro=S('<label class="form-check"><input type="checkbox"/> </label>'),so=S('<div class="form-group"><label class="form-label" for="sched-time">Time</label> <input id="sched-time" class="form-input" type="time"/></div> <div class="form-group"><label class="form-label">Days</label> <div class="flex gap-sm"></div></div>',1),io=S('<div class="form-group"><label class="form-label" for="interval-sec">Interval (seconds)</label> <input id="interval-sec" class="form-input" type="number" min="10"/></div>'),oo=S('<div class="form-group"><label class="form-label" for="sched-type">Schedule Type</label> <select id="sched-type" class="form-select"><option>Time of Day</option><option>Interval</option></select></div> <!>',1),lo=S("<option> </option>"),co=S('<div class="form-group"><label class="form-label" for="trigger-device">Device</label> <select id="trigger-device" class="form-select"><option>Select...</option><!></select></div> <div class="form-group"><label class="form-label" for="state-change">State Change</label> <select id="state-change" class="form-select"><option>Any</option><option>Turned On</option><option>Turned Off</option><option>Toggled</option></select></div>',1),uo=S("<option> </option>"),fo=S('<select class="form-select"><option>Device...</option><!></select> <select class="form-select action-cmd-select svelte-2b6lb5"><option>On</option><option>Off</option><option>Toggle</option></select>',1),vo=S('<input class="form-input" type="number" placeholder="Seconds" style="width: 80px"/> <span class="text-sm muted">seconds</span>',1),po=S('<input class="form-input" type="text" placeholder="Log message"/>'),_o=S('<div class="action-row svelte-2b6lb5"><select class="form-select action-type-select svelte-2b6lb5"><option>Device</option><option>Delay</option><option>Log</option></select> <!> <button class="btn btn-sm btn-danger">×</button></div>'),ho=S('<div class="modal-backdrop" role="button" tabindex="-1"><div class="modal modal-lg" role="dialog"><div class="modal-header"><span class="modal-title"> </span> <button class="btn btn-sm">×</button></div> <div class="modal-body"><div class="form-group"><label class="form-label" for="auto-name">Name</label> <input id="auto-name" class="form-input" type="text" placeholder="e.g., Evening Lights" required/></div> <div class="form-group"><label class="form-label" for="auto-desc">Description</label> <input id="auto-desc" class="form-input" type="text" placeholder="Optional description"/></div> <div class="section"><div class="section-title">Trigger</div> <div class="form-group"><label class="form-label" for="trigger-type">Type</label> <select id="trigger-type" class="form-select"><option>Manual Only</option><option>Schedule</option><option>Device State</option></select></div> <!></div> <div class="section"><div class="section-title">Actions</div> <!> <button class="btn btn-sm">+ Add Action</button></div></div> <div class="modal-footer"><button class="btn">Cancel</button> <button class="btn btn-primary">Save</button></div></div></div>'),go=S('<div class="toolbar"><button class="btn btn-sm"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"></path><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"></path></svg> Link</button> <button class="btn btn-sm"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"></path></svg> Add</button> <div class="toolbar-spacer"></div> <span class="text-sm muted"> </span> <button class="btn btn-sm" title="Refresh"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"></path><path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"></path></svg></button></div> <!> <!> <!>',1);function mo(e,t){nn(t,!0);const n=()=>ee(Yn,"$devices",r),a=()=>ee(va,"$automations",r),s=()=>ee(_t,"$loading",r),[r,o]=Tn();let c=z(!1),l=z(""),v=z("toggled"),p=z(""),g=z("toggle"),_=z(!1),h=z(null),C=z(""),N=z(""),b=z("manual"),M=z("time_of_day"),O=z("18:00"),P=z(Kt([1,2,3,4,5])),F=z(300),B=z(""),j=z("any"),I=z(Kt([]));function w(m){const E=n().find(y=>kt(y.ieee_address)===m);return E?.friendly_name||E?.model||m.slice(0,11)+"..."}function A(m){return m.trigger.type==="device_state"&&m.actions.length===1&&m.actions[0].type==="device_control"}function $(m){if(!A(m))return null;const E=m.trigger,y=m.actions[0];return{source:w(E.device_ieee),trigger:E.state_change.type,target:w(y.device_ieee),action:y.command.type}}function te(){d(h,null),d(C,""),d(N,""),d(b,"manual"),d(M,"time_of_day"),d(O,"18:00"),d(P,[1,2,3,4,5],!0),d(F,300),d(B,""),d(j,"any"),d(I,[{type:"device_control",deviceIeee:"",endpoint:1,command:"toggle",seconds:5,message:""}],!0)}function ne(){d(l,""),d(v,"toggled"),d(p,""),d(g,"toggle")}function ce(){te(),d(_,!0)}function de(){ne(),d(c,!0)}function T(m){d(h,m.id,!0),d(C,m.name,!0),d(N,m.description||"",!0),d(b,m.trigger.type,!0),m.trigger.type==="schedule"?(d(M,m.trigger.schedule.type,!0),m.trigger.schedule.type==="time_of_day"?(d(O,m.trigger.schedule.time,!0),d(P,[...m.trigger.schedule.days],!0)):d(F,m.trigger.schedule.seconds,!0)):m.trigger.type==="device_state"&&(d(B,m.trigger.device_ieee,!0),d(j,m.trigger.state_change.type,!0)),d(I,m.actions.map(E=>E.type==="device_control"?{type:"device_control",deviceIeee:E.device_ieee,endpoint:E.endpoint,command:E.command.type,seconds:5,message:""}:E.type==="delay"?{type:"delay",deviceIeee:"",endpoint:1,command:"toggle",seconds:E.seconds,message:""}:{type:"log",deviceIeee:"",endpoint:1,command:"toggle",seconds:5,message:E.message}),!0),d(_,!0)}function D(){d(I,[...i(I),{type:"device_control",deviceIeee:"",endpoint:1,command:"toggle",seconds:5,message:""}],!0)}function q(m){d(I,i(I).filter((E,y)=>y!==m),!0)}async function L(){if(!i(l)||!i(p))return;const m=w(i(l)),E=w(i(p)),y=`${m} → ${E}`;try{await pe.createAutomation({name:y,description:`When ${m} ${i(v).replace("_"," ")}, ${i(g).replace("_"," ")} ${E}`,trigger:{type:"device_state",device_ieee:i(l),state_change:{type:i(v)}},actions:[{type:"device_control",device_ieee:i(p),endpoint:1,command:{type:i(g)}}]}),d(c,!1),Tt()}catch(V){console.error("Failed to create link:",V)}}async function W(){let m;i(b)==="manual"?m={type:"manual"}:i(b)==="schedule"?m={type:"schedule",schedule:i(M)==="time_of_day"?{type:"time_of_day",time:i(O),days:i(P)}:{type:"interval",seconds:i(F)}}:m={type:"device_state",device_ieee:i(B),state_change:{type:i(j)}};const E=i(I).filter(y=>y.type==="delay"||y.type==="log"||y.type==="device_control"&&y.deviceIeee).map(y=>y.type==="device_control"?{type:"device_control",device_ieee:y.deviceIeee,endpoint:y.endpoint,command:{type:y.command}}:y.type==="delay"?{type:"delay",seconds:y.seconds}:{type:"log",message:y.message,level:"info"});try{i(h)?await pe.updateAutomation(i(h),{name:i(C),description:i(N)||void 0,trigger:m,actions:E}):await pe.createAutomation({name:i(C),description:i(N)||void 0,trigger:m,actions:E}),d(_,!1),Tt()}catch(y){console.error("Failed to save:",y)}}async function fe(m){try{m.enabled?await pe.disableAutomation(m.id):await pe.enableAutomation(m.id),Tt()}catch(E){console.error("Failed to toggle:",E)}}async function Ee(m){try{await pe.triggerAutomation(m)}catch(E){console.error("Failed to trigger:",E)}}async function Ne(m,E){if(confirm(`Delete "${E}"?`))try{await pe.deleteAutomation(m),Tt()}catch(y){console.error("Failed to delete:",y)}}function Re(m){if(m.type==="manual")return"Manual";if(m.type==="schedule"){if(m.schedule.type==="time_of_day"){const E=m.schedule.days.length===0?"daily":m.schedule.days.map(y=>["Su","Mo","Tu","We","Th","Fr","Sa"][y]).join(",");return`${m.schedule.time} (${E})`}return`Every ${m.schedule.seconds}s`}return w(m.device_ieee)}var Le=go(),ke=ue(Le),ze=u(ke);ze.__click=de;var _e=f(ze,2);_e.__click=ce;var Pe=f(_e,4),Ge=u(Pe),qe=f(Pe,2);qe.__click=()=>Tt();var me=f(ke,2);{var ht=m=>{var E=Gi();x(m,E)},Ke=m=>{var E=Xi();dt(E,5,a,y=>y.id,(y,V)=>{const ae=Et(()=>$(i(V)));var Ve=Qi();let Ue;var it=u(Ve),Qe=u(it);{var At=R=>{var U=Ki(),ve=u(U),K=u(ve),X=f(ve,4),re=u(X);J(()=>{k(K,i(ae).source),k(re,i(ae).target)}),x(R,U)},Lt=R=>{var U=Yi(),ve=u(U);J(()=>k(ve,i(V).name)),x(R,U)};H(Qe,R=>{i(ae)?R(At):R(Lt,!1)})}var Pt=f(it,2),Z=u(Pt);let ie;var he=u(Z),Se=f(Z,2);{var be=R=>{var U=Zi();x(R,U)};H(Se,R=>{i(ae)&&R(be)})}var se=f(Pt,2),ye=u(se);{var He=R=>{var U=er();J(ve=>k(U,ve),[()=>i(ae).trigger.replace("_"," ")]),x(R,U)},ot=R=>{var U=er();J(ve=>k(U,ve),[()=>Re(i(V).trigger)]),x(R,U)};H(ye,R=>{i(ae)?R(He):R(ot,!1)})}var gt=f(se,2),Ie=u(gt);Ie.__click=()=>fe(i(V));var It=u(Ie),Wt=f(Ie,2);Wt.__click=()=>Ee(i(V).id);var Ct=f(Wt,2);Ct.__click=()=>T(i(V));var sn=f(Ct,2);sn.__click=()=>Ne(i(V).id,i(V).name),J(()=>{Ue=we(Ve,1,"automation-row svelte-2b6lb5",null,Ue,{"disabled-row":!i(V).enabled}),ie=we(Z,1,"tag",null,ie,{"tag-green":i(V).enabled,"tag-red":!i(V).enabled}),k(he,i(V).enabled?"ON":"OFF"),_n(Ie,"title",i(V).enabled?"Disable":"Enable"),k(It,i(V).enabled?"Off":"On")}),x(y,Ve)}),x(m,E)};H(me,m=>{a().length===0?m(ht):m(Ke,!1)})}var Ye=f(me,2);{var rt=m=>{var E=ao();E.__click=()=>d(c,!1),E.__keydown=K=>K.key==="Escape"&&d(c,!1);var y=u(E);y.__click=K=>K.stopPropagation();var V=u(y),ae=f(u(V),2);ae.__click=()=>d(c,!1);var Ve=f(V,2),Ue=f(u(Ve),2),it=u(Ue),Qe=f(u(it),2),At=u(Qe);At.value=At.__value="";var Lt=f(At);dt(Lt,1,n,qt,(K,X)=>{const re=Et(()=>kt(i(X).ieee_address));var oe=eo(),Xe=u(oe),Ae={};J(()=>{k(Xe,i(X).friendly_name||i(X).model||i(re)),Ae!==(Ae=i(re))&&(oe.value=(oe.__value=i(re))??"")}),x(K,oe)});var Pt=f(it,2),Z=f(u(Pt),2),ie=u(Z);ie.value=ie.__value="toggled";var he=f(ie);he.value=he.__value="turned_on";var Se=f(he);Se.value=Se.__value="turned_off";var be=f(Pt,2),se=f(u(be),2),ye=u(se);ye.value=ye.__value="toggle";var He=f(ye);He.value=He.__value="turn_on";var ot=f(He);ot.value=ot.__value="turn_off";var gt=f(be,2),Ie=f(u(gt),2),It=u(Ie);It.value=It.__value="";var Wt=f(It);dt(Wt,1,n,qt,(K,X)=>{const re=Et(()=>kt(i(X).ieee_address));var oe=to(),Xe=u(oe),Ae={};J(()=>{k(Xe,i(X).friendly_name||i(X).model||i(re)),Ae!==(Ae=i(re))&&(oe.value=(oe.__value=i(re))??"")}),x(K,oe)});var Ct=f(Ue,2);{var sn=K=>{var X=no(),re=u(X),oe=u(re),Xe=f(re,4),Ae=u(Xe);J((Be,mt)=>{k(oe,Be),k(Ae,mt)},[()=>w(i(l)),()=>w(i(p))]),x(K,X)};H(Ct,K=>{i(l)&&i(p)&&K(sn)})}var R=f(Ve,2),U=u(R);U.__click=()=>d(c,!1);var ve=f(U,2);ve.__click=L,J(()=>ve.disabled=!i(l)||!i(p)),tt(Qe,()=>i(l),K=>d(l,K)),tt(Z,()=>i(v),K=>d(v,K)),tt(se,()=>i(g),K=>d(g,K)),tt(Ie,()=>i(p),K=>d(p,K)),x(m,E)};H(Ye,m=>{i(c)&&m(rt)})}var Ze=f(Ye,2);{var st=m=>{var E=ho();E.__click=()=>d(_,!1),E.__keydown=R=>R.key==="Escape"&&d(_,!1);var y=u(E);y.__click=R=>R.stopPropagation();var V=u(y),ae=u(V),Ve=u(ae),Ue=f(ae,2);Ue.__click=()=>d(_,!1);var it=f(V,2),Qe=u(it),At=f(u(Qe),2),Lt=f(Qe,2),Pt=f(u(Lt),2),Z=f(Lt,2),ie=f(u(Z),2),he=f(u(ie),2),Se=u(he);Se.value=Se.__value="manual";var be=f(Se);be.value=be.__value="schedule";var se=f(be);se.value=se.__value="device_state";var ye=f(ie,2);{var He=R=>{var U=oo(),ve=ue(U),K=f(u(ve),2),X=u(K);X.value=X.__value="time_of_day";var re=f(X);re.value=re.__value="interval";var oe=f(ve,2);{var Xe=Be=>{var mt=so(),Ft=ue(mt),Ce=f(u(Ft),2),bt=f(Ft,2),yt=f(u(bt),2);dt(yt,20,()=>["Su","Mo","Tu","We","Th","Fr","Sa"],qt,(lt,wt,ge)=>{var Te=ro(),Me=u(Te);Me.__change=()=>{i(P).includes(ge)?d(P,i(P).filter(ct=>ct!==ge),!0):d(P,[...i(P),ge].sort(),!0)};var Jt=f(Me);J(ct=>{wi(Me,ct),k(Jt,` ${wt??""}`)},[()=>i(P).includes(ge)]),x(lt,Te)}),xt(Ce,()=>i(O),lt=>d(O,lt)),x(Be,mt)},Ae=Be=>{var mt=io(),Ft=f(u(mt),2);xt(Ft,()=>i(F),Ce=>d(F,Ce)),x(Be,mt)};H(oe,Be=>{i(M)==="time_of_day"?Be(Xe):Be(Ae,!1)})}tt(K,()=>i(M),Be=>d(M,Be)),x(R,U)},ot=R=>{var U=tn(),ve=ue(U);{var K=X=>{var re=co(),oe=ue(re),Xe=f(u(oe),2),Ae=u(Xe);Ae.value=Ae.__value="";var Be=f(Ae);dt(Be,1,n,qt,(wt,ge)=>{const Te=Et(()=>kt(i(ge).ieee_address));var Me=lo(),Jt=u(Me),ct={};J(()=>{k(Jt,i(ge).friendly_name||i(ge).model||i(Te)),ct!==(ct=i(Te))&&(Me.value=(Me.__value=i(Te))??"")}),x(wt,Me)});var mt=f(oe,2),Ft=f(u(mt),2),Ce=u(Ft);Ce.value=Ce.__value="any";var bt=f(Ce);bt.value=bt.__value="turned_on";var yt=f(bt);yt.value=yt.__value="turned_off";var lt=f(yt);lt.value=lt.__value="toggled",tt(Xe,()=>i(B),wt=>d(B,wt)),tt(Ft,()=>i(j),wt=>d(j,wt)),x(X,re)};H(ve,X=>{i(b)==="device_state"&&X(K)},!0)}x(R,U)};H(ye,R=>{i(b)==="schedule"?R(He):R(ot,!1)})}var gt=f(Z,2),Ie=f(u(gt),2);dt(Ie,17,()=>i(I),qt,(R,U,ve)=>{var K=_o(),X=u(K),re=u(X);re.value=re.__value="device_control";var oe=f(re);oe.value=oe.__value="delay";var Xe=f(oe);Xe.value=Xe.__value="log";var Ae=f(X,2);{var Be=Ce=>{var bt=fo(),yt=ue(bt),lt=u(yt);lt.value=lt.__value="";var wt=f(lt);dt(wt,1,n,qt,(ct,Ha)=>{const _a=Et(()=>kt(i(Ha).ieee_address));var Zn=uo(),ss=u(Zn),Ba={};J(is=>{k(ss,is),Ba!==(Ba=i(_a))&&(Zn.value=(Zn.__value=i(_a))??"")},[()=>i(Ha).friendly_name||i(_a).slice(0,8)]),x(ct,Zn)});var ge=f(yt,2),Te=u(ge);Te.value=Te.__value="turn_on";var Me=f(Te);Me.value=Me.__value="turn_off";var Jt=f(Me);Jt.value=Jt.__value="toggle",tt(yt,()=>i(U).deviceIeee,ct=>i(U).deviceIeee=ct),tt(ge,()=>i(U).command,ct=>i(U).command=ct),x(Ce,bt)},mt=Ce=>{var bt=tn(),yt=ue(bt);{var lt=ge=>{var Te=vo(),Me=ue(Te);xt(Me,()=>i(U).seconds,Jt=>i(U).seconds=Jt),x(ge,Te)},wt=ge=>{var Te=po();xt(Te,()=>i(U).message,Me=>i(U).message=Me),x(ge,Te)};H(yt,ge=>{i(U).type==="delay"?ge(lt):ge(wt,!1)},!0)}x(Ce,bt)};H(Ae,Ce=>{i(U).type==="device_control"?Ce(Be):Ce(mt,!1)})}var Ft=f(Ae,2);Ft.__click=()=>q(ve),tt(X,()=>i(U).type,Ce=>i(U).type=Ce),x(R,K)});var It=f(Ie,2);It.__click=D;var Wt=f(it,2),Ct=u(Wt);Ct.__click=()=>d(_,!1);var sn=f(Ct,2);sn.__click=W,J(()=>k(Ve,`${i(h)?"Edit":"Add"} Automation`)),xt(At,()=>i(C),R=>d(C,R)),xt(Pt,()=>i(N),R=>d(N,R)),tt(he,()=>i(b),R=>d(b,R)),x(m,E)};H(Ze,m=>{i(_)&&m(st)})}J(()=>{k(Ge,`${a().length??""} rule(s)`),qe.disabled=s().automations}),x(e,Le),an(),o()}Kn(["click","keydown","change"]);var bo=S('<div class="error-overlay svelte-aremre"><span class="error-icon svelte-aremre">!</span> <span> </span></div>'),yo=S('<div class="loading-overlay svelte-aremre"><span class="loading-spinner svelte-aremre"></span> <span>Connecting...</span></div>'),wo=S('<img class="stream-media svelte-aremre"/>'),xo=S('<video class="stream-media svelte-aremre" autoplay playsinline=""></video>',2),Eo=S('<div class="unsupported svelte-aremre"><span>WebRTC not yet supported</span></div>'),ko=S('<div class="video-player svelte-aremre"><!> <!></div>');function So(e,t){nn(t,!0);let n=z(null),a=z(null),s=z(!0),r=null,o=null,c=[],l=!1,v=!1;qn(()=>{t.streamType==="rtsp"&&i(n)&&!v&&rn(()=>{v=!0,g()})}),Ci(()=>{p()});function p(){if(r&&r.readyState==="open")try{r.endOfStream()}catch{}r=null,o=null,c=[],l=!1,v=!1}async function g(){if(!("MediaSource"in window)){d(a,"MediaSource API not supported");return}if(r&&r.readyState==="open")try{r.endOfStream()}catch{}r=null,o=null,c=[],l=!1,d(s,!0),d(a,null),r=new MediaSource,r.addEventListener("sourceopen",async()=>{try{const w=['video/mp4; codecs="avc1.640028"','video/mp4; codecs="avc1.64001f"','video/mp4; codecs="avc1.4d401f"','video/mp4; codecs="avc1.42E01E"'];let A=null;for(const $ of w)if(MediaSource.isTypeSupported($)){A=$;break}if(!A){d(a,"H.264 codec not supported");return}console.log("Using codec:",A),o=r.addSourceBuffer(A),o.mode="segments",o.addEventListener("updateend",()=>{l=!1,h()}),o.addEventListener("error",$=>{console.error("SourceBuffer error:",$),d(a,"Stream decode error")}),await _()}catch(w){console.error("MSE init error:",w),d(a,`Failed to initialize: ${w}`)}}),r.addEventListener("sourceended",()=>{console.log("MediaSource ended")}),r.addEventListener("sourceclose",()=>{console.log("MediaSource closed")}),i(n)&&(i(n).src=URL.createObjectURL(r))}async function _(){try{console.log("Fetching stream:",t.streamUrl);const w=await fetch(t.streamUrl);if(!w.ok){d(a,`Stream error: ${w.status}`),d(s,!1);return}const A=w.body?.getReader();if(!A){d(a,"No stream body"),d(s,!1);return}for(d(s,!1),console.log("Stream connected, reading data...");;){const{done:$,value:te}=await A.read();if($){console.log("Stream ended");break}te&&o&&r?.readyState==="open"&&(c.push(te.buffer),h())}}catch(w){console.error("Fetch error:",w),d(a,`Connection error: ${w}`),d(s,!1)}}function h(){if(l||!o||c.length===0||o.updating)return;if(r?.readyState!=="open"){console.warn("MediaSource not open, skipping append"),c=[];return}try{if(i(n)&&o.buffered.length>0){const A=i(n).currentTime,$=o.buffered.start(0);if(A-$>30){o.remove($,A-10);return}}}catch{}l=!0;const w=c.shift();try{o.appendBuffer(w)}catch(A){if(console.error("Append error:",A?.name,A?.message),l=!1,A instanceof DOMException&&A.name==="QuotaExceededError"){if(o.buffered.length>0){const $=o.buffered.start(0),te=o.buffered.end(0);if(te-$>5)try{o.remove($,$+(te-$)/2)}catch(ne){console.error("Remove error:",ne)}}}else c=[]}}function C(w){const $=w.target.error;if($)switch($.code){case MediaError.MEDIA_ERR_ABORTED:d(a,"Playback aborted");break;case MediaError.MEDIA_ERR_NETWORK:d(a,"Network error");break;case MediaError.MEDIA_ERR_DECODE:d(a,"Decode error");break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:d(a,"Format not supported");break;default:d(a,"Unknown error")}}function N(){d(s,!1),d(a,null)}function b(){d(s,!1),d(a,"Failed to load stream")}var M=ko(),O=u(M);{var P=w=>{var A=bo(),$=f(u(A),2),te=u($);J(()=>k(te,i(a))),x(w,A)},F=w=>{var A=tn(),$=ue(A);{var te=ne=>{var ce=yo();x(ne,ce)};H($,ne=>{i(s)&&ne(te)},!0)}x(w,A)};H(O,w=>{i(a)?w(P):w(F,!1)})}var B=f(O,2);{var j=w=>{var A=wo();J(()=>{_n(A,"src",t.streamUrl),_n(A,"alt",t.name)}),ha("load",A,N),ha("error",A,b),x(w,A)},I=w=>{var A=tn(),$=ue(A);{var te=ce=>{var de=xo();de.muted=!0,Ei(de,T=>d(n,T),()=>i(n)),ha("error",de,C),x(ce,de)},ne=ce=>{var de=Eo();x(ce,de)};H($,ce=>{t.streamType==="rtsp"?ce(te):ce(ne,!1)},!0)}x(w,A)};H(B,w=>{t.streamType==="mjpeg"?w(j):w(I,!1)})}x(e,M),an()}var Ao=S('<div class="empty-state">No cameras configured.</div>'),Co=ua('<svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M5 3.5h6A1.5 1.5 0 0 1 12.5 5v6a1.5 1.5 0 0 1-1.5 1.5H5A1.5 1.5 0 0 1 3.5 11V5A1.5 1.5 0 0 1 5 3.5z"></path></svg>'),To=ua('<svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"></path></svg>'),Mo=S('<div class="camera-stream-row svelte-3om0xx"><!></div>'),$o=S('<div class="camera-row svelte-3om0xx"><span class="camera-name mono svelte-3om0xx"> </span> <span class="camera-tags svelte-3om0xx"><span class="tag"> </span> <span> </span></span> <span class="camera-actions svelte-3om0xx"><button class="btn btn-sm"><!></button> <button class="btn btn-sm" title="Edit"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"></path></svg></button> <button class="btn btn-sm btn-danger" title="Delete"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"></path><path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"></path></svg></button></span></div> <!>',1),Do=S('<div class="camera-list svelte-3om0xx"></div>'),Oo=S('<div class="form-hint">H.264 streams are efficiently served as fMP4 (no transcoding)</div>'),No=S('<div class="form-group"><label class="form-label">Username (optional)</label> <input class="form-input" type="text" placeholder="admin"/></div> <div class="form-group"><label class="form-label">Password (optional)</label> <input class="form-input" type="password"/></div>',1),Lo=S('<div class="modal-backdrop"><div class="modal"><div class="modal-header"><span class="modal-title"> </span> <button class="btn btn-sm">×</button></div> <div class="modal-body"><div class="form-group"><label class="form-label">Name</label> <input class="form-input" type="text" placeholder="Living Room" required/></div> <div class="form-group"><label class="form-label">Stream Type</label> <select class="form-select"><option>MJPEG (HTTP)</option><option>RTSP</option><option>WebRTC</option></select></div> <div class="form-group"><label class="form-label">Stream URL</label> <input class="form-input" type="text" required/> <!></div> <!></div> <div class="modal-footer"><button class="btn">Cancel</button> <button class="btn btn-primary"> </button></div></div></div>'),Po=S('<div class="toolbar"><button class="btn btn-sm"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"></path></svg> Add</button> <div class="toolbar-spacer"></div> <span class="text-sm muted"> </span> <button class="btn btn-sm" title="Refresh"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"></path><path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"></path></svg></button></div> <!> <!>',1);function Io(e,t){nn(t,!0);const n=()=>ee(ts,"$cameras",s),a=()=>ee(_t,"$loading",s),[s,r]=Tn();let o=z(!1),c=z(null),l=z(""),v=z(""),p=z("mjpeg"),g=z(""),_=z(""),h=z(Kt(new Set));function C(){d(c,null),d(l,""),d(v,""),d(p,"mjpeg"),d(g,""),d(_,"")}function N(T){d(c,T.id,!0),d(l,T.name,!0),d(v,T.stream_url,!0),d(p,T.stream_type,!0),d(g,""),d(_,""),d(o,!0)}async function b(){try{i(c)?await pe.updateCamera(i(c),i(l),i(v),i(p),i(g)||void 0,i(_)||void 0):await pe.addCamera(i(l),i(v),i(p),i(g)||void 0,i(_)||void 0),d(o,!1),C(),Rn()}catch(T){console.error("Failed to save camera:",T),alert("Failed to save camera")}}async function M(T){if(confirm(`Delete "${T.name}"?`))try{await pe.deleteCamera(T.id),Rn()}catch(D){console.error("Failed to delete:",D)}}function O(T){i(h).has(T)?(i(h).delete(T),d(h,new Set(i(h)),!0)):(i(h).add(T),d(h,new Set(i(h)),!0))}function P(T){return pe.getCameraStreamUrl(T)}var F=Po(),B=ue(F),j=u(B);j.__click=()=>{C(),d(o,!0)};var I=f(j,4),w=u(I),A=f(I,2);A.__click=()=>Rn();var $=f(B,2);{var te=T=>{var D=Ao();x(T,D)},ne=T=>{var D=Do();dt(D,5,n,q=>q.id,(q,L)=>{const W=Et(()=>i(h).has(i(L).id));var fe=$o(),Ee=ue(fe),Ne=u(Ee),Re=u(Ne),Le=f(Ne,2),ke=u(Le),ze=u(ke),_e=f(ke,2);let Pe;var Ge=u(_e),qe=f(Le,2),me=u(qe);me.__click=()=>O(i(L).id);var ht=u(me);{var Ke=E=>{var y=Co();x(E,y)},Ye=E=>{var y=To();x(E,y)};H(ht,E=>{i(W)?E(Ke):E(Ye,!1)})}var rt=f(me,2);rt.__click=()=>N(i(L));var Ze=f(rt,2);Ze.__click=()=>M(i(L));var st=f(Ee,2);{var m=E=>{var y=Mo(),V=u(y);{let ae=Et(()=>P(i(L).id));So(V,{get streamUrl(){return i(ae)},get streamType(){return i(L).stream_type},get name(){return i(L).name}})}x(E,y)};H(st,E=>{i(W)&&E(m)})}J(E=>{k(Re,i(L).name),k(ze,E),Pe=we(_e,1,"tag",null,Pe,{"tag-green":i(L).enabled,"tag-red":!i(L).enabled}),k(Ge,i(L).enabled?"ON":"OFF"),_n(me,"title",i(W)?"Stop":"Play")},[()=>i(L).stream_type.toUpperCase()]),x(q,fe)}),x(T,D)};H($,T=>{n().length===0?T(te):T(ne,!1)})}var ce=f($,2);{var de=T=>{var D=Lo();D.__click=()=>d(o,!1);var q=u(D);q.__click=y=>y.stopPropagation();var L=u(q),W=u(L),fe=u(W),Ee=f(W,2);Ee.__click=()=>d(o,!1);var Ne=f(L,2),Re=u(Ne),Le=f(u(Re),2),ke=f(Re,2),ze=f(u(ke),2),_e=u(ze);_e.value=_e.__value="mjpeg";var Pe=f(_e);Pe.value=Pe.__value="rtsp";var Ge=f(Pe);Ge.value=Ge.__value="webrtc";var qe=f(ke,2),me=f(u(qe),2),ht=f(me,2);{var Ke=y=>{var V=Oo();x(y,V)};H(ht,y=>{i(p)==="rtsp"&&y(Ke)})}var Ye=f(qe,2);{var rt=y=>{var V=No(),ae=ue(V),Ve=f(u(ae),2),Ue=f(ae,2),it=f(u(Ue),2);xt(Ve,()=>i(g),Qe=>d(g,Qe)),xt(it,()=>i(_),Qe=>d(_,Qe)),x(y,V)};H(Ye,y=>{i(p)==="rtsp"&&y(rt)})}var Ze=f(Ne,2),st=u(Ze);st.__click=()=>d(o,!1);var m=f(st,2);m.__click=b;var E=u(m);J(()=>{k(fe,`${i(c)?"Edit":"Add"} Camera`),_n(me,"placeholder",i(p)==="rtsp"?"rtsp://192.168.1.x:554/stream":"http://192.168.1.x:8000/video_feed"),k(E,i(c)?"Save":"Add")}),xt(Le,()=>i(l),y=>d(l,y)),tt(ze,()=>i(p),y=>d(p,y)),xt(me,()=>i(v),y=>d(v,y)),x(T,D)};H(ce,T=>{i(o)&&T(de)})}J(()=>{k(w,`${n().length??""} camera(s)`),A.disabled=a().cameras}),x(e,F),an(),r()}Kn(["click"]);var Fo=S('<div class="info-row"><span class="info-label">Application</span> <span class="info-value"> </span></div> <div class="info-row"><span class="info-label">Version</span> <span class="info-value"> </span></div> <div class="info-row"><span class="info-label">Firmware</span> <span class="info-value"> </span></div>',1),Ro=S('<div class="muted text-sm">Loading...</div>'),zo=S('<div class="info-row"><span class="info-label">State</span> <span class="info-value"><span> </span></span></div> <div class="info-row"><span class="info-label">Channel</span> <span class="info-value"> </span></div> <div class="info-row"><span class="info-label">PAN ID</span> <span class="info-value"> </span></div> <div class="info-row"><span class="info-label">Ext PAN ID</span> <span class="info-value text-xs"> </span></div> <div class="info-row"><span class="info-label">Permit Join</span> <span class="info-value"><span> </span></span></div>',1),qo=S('<div class="muted text-sm">No Zigbee adapter detected</div>'),Vo=S('<div class="muted text-sm">Loading...</div>'),Uo=S('<div class="toolbar"><span class="text-sm">Overall: <span> </span></span> <div class="toolbar-spacer"></div> <button class="btn btn-sm" title="Refresh"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"></path><path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"></path></svg></button></div> <div class="section"><div class="section-title">Connections</div> <div class="connection-list svelte-rgo3ix"><div class="connection-row svelte-rgo3ix"><span class="connection-name mono svelte-rgo3ix">Backend API</span> <span> </span> <span class="connection-detail mono text-xs muted svelte-rgo3ix"> </span></div> <div class="connection-row svelte-rgo3ix"><span class="connection-name mono svelte-rgo3ix">Zigbee Adapter</span> <span> </span> <span class="connection-detail mono text-xs muted svelte-rgo3ix"> </span></div> <div class="connection-row svelte-rgo3ix"><span class="connection-name mono svelte-rgo3ix">Zigbee Network</span> <span> </span> <span class="connection-detail mono text-xs muted svelte-rgo3ix"> </span></div> <div class="connection-row svelte-rgo3ix"><span class="connection-name mono svelte-rgo3ix">WebSocket</span> <span> </span> <span class="connection-detail mono text-xs muted svelte-rgo3ix"> </span></div></div></div> <div class="status-panels svelte-rgo3ix"><div class="info-panel"><div class="info-panel-title">System</div> <!></div> <div class="info-panel"><div class="info-panel-title">Zigbee Network</div> <!></div> <div class="info-panel"><div class="info-panel-title">Statistics</div> <div class="info-row"><span class="info-label">Devices</span> <span class="info-value"> </span></div> <div class="info-row"><span class="info-label">Automations</span> <span class="info-value"> </span></div> <div class="info-row"><span class="info-label">WebSocket</span> <span class="info-value"><span> </span></span></div></div></div>',1);function Ho(e,t){nn(t,!1);const n=()=>ee(ns,"$overallHealth",g),a=()=>ee(_t,"$loading",g),s=()=>ee(Ua,"$connectionStatus",g),r=()=>ee(da,"$systemInfo",g),o=()=>ee(Va,"$networkStatus",g),c=()=>ee(as,"$deviceCount",g),l=()=>ee(va,"$automations",g),v=()=>ee(Ii,"$enabledAutomations",g),p=()=>ee(Bn,"$wsConnected",g),[g,_]=Tn();function h(Z){return"0x"+Z.toString(16).padStart(4,"0").toUpperCase()}function C(){pa(),rs()}function N(Z){switch(Z){case"online":return"tag-green";case"offline":return"tag-red";case"degraded":return"tag-yellow";default:return""}}function b(Z){switch(Z){case"online":return"ONLINE";case"offline":return"OFFLINE";case"degraded":return"DEGRADED";default:return"UNKNOWN"}}Xr();var M=Uo(),O=ue(M),P=u(O),F=f(u(P)),B=u(F),j=f(P,4);j.__click=C;var I=f(O,2),w=f(u(I),2),A=u(w),$=f(u(A),2),te=u($),ne=f($,2),ce=u(ne),de=f(A,2),T=f(u(de),2),D=u(T),q=f(T,2),L=u(q),W=f(de,2),fe=f(u(W),2),Ee=u(fe),Ne=f(fe,2),Re=u(Ne),Le=f(W,2),ke=f(u(Le),2),ze=u(ke),_e=f(ke,2),Pe=u(_e),Ge=f(I,2),qe=u(Ge),me=f(u(qe),2);{var ht=Z=>{var ie=Fo(),he=ue(ie),Se=f(u(he),2),be=u(Se),se=f(he,2),ye=f(u(se),2),He=u(ye),ot=f(se,2),gt=f(u(ot),2),Ie=u(gt);J(()=>{k(be,r().name),k(He,r().version),k(Ie,r().firmware??"Not detected")}),x(Z,ie)},Ke=Z=>{var ie=Ro();x(Z,ie)};H(me,Z=>{r()?Z(ht):Z(Ke,!1)})}var Ye=f(qe,2),rt=f(u(Ye),2);{var Ze=Z=>{var ie=zo(),he=ue(ie),Se=f(u(he),2),be=u(Se);let se;var ye=u(be),He=f(he,2),ot=f(u(He),2),gt=u(ot),Ie=f(He,2),It=f(u(Ie),2),Wt=u(It),Ct=f(Ie,2),sn=f(u(Ct),2),R=u(sn),U=f(Ct,2),ve=f(u(U),2),K=u(ve);let X;var re=u(K);J(oe=>{se=we(be,1,"tag",null,se,{"tag-green":o().connected,"tag-red":!o().connected}),k(ye,o().connected?"Joined":"Disconnected"),k(gt,o().channel),k(Wt,oe),k(R,o().extended_pan_id),X=we(K,1,"tag",null,X,{"tag-yellow":o().permit_join}),k(re,o().permit_join?"Active":"No")},[()=>h(o().pan_id)]),x(Z,ie)},st=Z=>{var ie=tn(),he=ue(ie);{var Se=se=>{var ye=qo();x(se,ye)},be=se=>{var ye=Vo();x(se,ye)};H(he,se=>{s().coordinator.state==="offline"?se(Se):se(be,!1)},!0)}x(Z,ie)};H(rt,Z=>{o()?Z(Ze):Z(st,!1)})}var m=f(Ye,2),E=f(u(m),2),y=f(u(E),2),V=u(y),ae=f(E,2),Ve=f(u(ae),2),Ue=u(Ve),it=f(ae,2),Qe=f(u(it),2),At=u(Qe);let Lt;var Pt=u(At);J((Z,ie,he,Se,be,se,ye,He,ot,gt)=>{we(F,1,`tag ${Z??""}`,"svelte-rgo3ix"),k(B,ie),j.disabled=a().network,we($,1,`tag ${he??""}`,"svelte-rgo3ix"),k(te,Se),k(ce,s().backend.detail),we(T,1,`tag ${be??""}`,"svelte-rgo3ix"),k(D,se),k(L,s().coordinator.detail),we(fe,1,`tag ${ye??""}`,"svelte-rgo3ix"),k(Ee,He),k(Re,s().zigbee.detail),we(ke,1,`tag ${ot??""}`,"svelte-rgo3ix"),k(ze,gt),k(Pe,s().websocket.detail),k(V,c()),k(Ue,`${l().length??""} (${v()??""} active)`),Lt=we(At,1,"tag",null,Lt,{"tag-green":p(),"tag-red":!p()}),k(Pt,p()?"Live":"Disconnected")},[()=>N(n()),()=>b(n()),()=>N(s().backend.state),()=>b(s().backend.state),()=>N(s().coordinator.state),()=>b(s().coordinator.state),()=>N(s().zigbee.state),()=>b(s().zigbee.state),()=>N(s().websocket.state),()=>b(s().websocket.state)]),x(e,M),an(),_()}Kn(["click"]);var Bo=ua('<path d="M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z"></path>'),jo=ua('<path d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"></path>'),Wo=S('<button class="pane-nav-btn pane-toggle"><svg width="10" height="10" viewBox="0 0 16 16" fill="currentColor"><!></svg></button>'),Jo=S("<button> </button>"),Go=S('<div class="pane-content"><!></div>'),Ko=S('<div><nav class="pane-nav"><!> <!></nav> <!></div>');function ir(e,t){nn(t,!0);const n=()=>ee(t.collapsed,"$collapsed",s),a=()=>ee(t.view,"$view",s),[s,r]=Tn();let o=Ai(t,"collapsible",3,!1);const c=[{id:"devices",label:"Devices"},{id:"automations",label:"Auto"},{id:"cameras",label:"Cameras"},{id:"status",label:"Status"}];function l(O){t.view.set(O),O==="devices"?fn():O==="automations"?Tt():O==="cameras"?Rn():O==="status"&&pa()}function v(){t.collapsed&&t.collapsed.update(O=>!O)}qn(()=>{t.collapsed&&!n()&&l(a())});var p=Ko();let g;var _=u(p),h=u(_);{var C=O=>{var P=Wo();P.__click=v;var F=u(P),B=u(F);{var j=w=>{var A=Bo();x(w,A)},I=w=>{var A=jo();x(w,A)};H(B,w=>{t.collapsed&&n()?w(j):w(I,!1)})}J(()=>_n(P,"title",t.collapsed&&n()?"Expand":"Collapse")),x(O,P)};H(h,O=>{o()&&O(C)})}var N=f(h,2);dt(N,17,()=>c,qt,(O,P)=>{var F=Jo();let B;F.__click=()=>l(i(P).id);var j=u(F);J(()=>{B=we(F,1,"pane-nav-btn",null,B,{active:a()===i(P).id}),k(j,i(P).label)}),x(O,F)});var b=f(_,2);{var M=O=>{var P=Go(),F=u(P);{var B=I=>{Ji(I,{})},j=I=>{var w=tn(),A=ue(w);{var $=ne=>{mo(ne,{})},te=ne=>{var ce=tn(),de=ue(ce);{var T=q=>{Io(q,{})},D=q=>{var L=tn(),W=ue(L);{var fe=Ee=>{Ho(Ee,{})};H(W,Ee=>{a()==="status"&&Ee(fe)},!0)}x(q,L)};H(de,q=>{a()==="cameras"?q(T):q(D,!1)},!0)}x(ne,ce)};H(A,ne=>{a()==="automations"?ne($):ne(te,!1)},!0)}x(I,w)};H(F,I=>{a()==="devices"?I(B):I(j,!1)})}x(O,P)};H(b,O=>{(!t.collapsed||!n())&&O(M)})}J(()=>g=we(p,1,"pane",null,g,{"pane-collapsed":t.collapsed&&n()})),x(e,p),an(),r()}Kn(["click"]);var Yo=S('<div class="footer-item"><span> </span></div>'),Zo=S('<div id="app"><header class="header"><div class="header-title">casita</div> <div class="header-status"><span></span> <span class="mono"> </span> <span class="muted">|</span> <span class="mono"> </span></div></header> <div class="panes-container"><!> <!></div> <footer class="footer"><div class="footer-item"><span></span> <span>ws</span></div> <div class="footer-item"><span> </span></div> <!></footer></div>');function Qo(e,t){nn(t,!1);const n=()=>ee(ns,"$overallHealth",c),a=()=>ee(as,"$deviceCount",c),s=()=>ee(Bn,"$wsConnected",c),r=()=>ee(da,"$systemInfo",c),o=()=>ee(Ua,"$connectionStatus",c),[c,l]=Tn();function v(T){switch(T){case"online":return"online";case"degraded":return"warning";case"offline":return"offline";default:return"warning"}}function p(T){switch(T){case"online":return"all systems operational";case"degraded":return"degraded";case"offline":return"offline";default:return"unknown"}}es(()=>{Rt.connect(),Rt.on("device_joined",()=>fn()),Rt.on("device_left",()=>fn()),Rt.on("device_updated",()=>fn()),Rt.on("device_state_changed",T=>{T.ieee&&T.state_on!==void 0&&Ma(T.ieee,T.state_on)}),Rt.on("network_state_changed",()=>pa()),Rt.on("automation_created",()=>Tt()),Rt.on("automation_updated",()=>Tt()),Rt.on("automation_deleted",()=>Tt()),Fi()}),Xr();var g=Zo(),_=u(g),h=f(u(_),2),C=u(h),N=f(C,2),b=u(N),M=f(N,4),O=u(M),P=f(_,2),F=u(P);ir(F,{get view(){return Oi}});var B=f(F,2);ir(B,{get view(){return Ni},collapsible:!0,get collapsed(){return Li}});var j=f(P,2),I=u(j),w=u(I);let A;var $=f(I,2),te=u($),ne=u(te),ce=f($,2);{var de=T=>{var D=Yo(),q=u(D),L=u(q);J(()=>k(L,o().coordinator.detail)),x(T,D)};H(ce,T=>{o().coordinator.state==="online"&&T(de)})}J((T,D)=>{we(C,1,`status-dot ${T??""}`),k(b,D),k(O,`${a()??""} devices`),A=we(w,1,"status-dot",null,A,{online:s(),offline:!s()}),k(ne,`v${r()?.version??"?"??""}`)},[()=>v(n()),()=>p(n())]),x(e,g),an(),l()}ui(Qo,{target:document.getElementById("app")});
